{"version":3,"sources":["bundle.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","_constants","_pixiHelp","_lane","_defineProperties","target","props","descriptor","enumerable","configurable","writable","key","Car","view","imageFile","lane","arguments","undefined","NO_LANE","instance","Constructor","TypeError","_classCallCheck","this","sprite","createSprite","CAR_SCALE","zIndex","protoProps","staticProps","position","forceDirection","x","start","end","y","forceLaneDirection","angle","getDrivingAngle","_this","endPosition","time","easing","TWEEN","Easing","Linear","None","stopPosition","getPositionCoordinates","Promise","resolve","Tween","to","onComplete","offsetPosition","_this2","offsetAngle","placeInLane","oppositeLane","getCarPosition","container","addChild","removeChild","get","set","prototype","./constants","./lane","./pixi-help","2","SPRITE_WIDTH","STREET_LANE_OFFSET","BLOCK_SIZE","STREET_WIDTH","IDLE_ANIMATION_TIME","DEFAULT_SPEED","BorderBlockSize","StreetOffsetFromCenter","ViewSize","width","height","3","CountdownButton","text","onClick","htmlButton","$","htmlText","on","doClick","show","timeoutRunner","window","onkeydown","event","which","_setTimeout","setTimeout","_x","apply","clearTimeout","hide","timeout","Math","floor","toString","4","HighlightColor","5","_styleHelp","InfoBox","htmlElement","Boxes","forEach","box","index","element","querySelector","innerText","name","innerHTML","description","setLeftTopCSSFromCoord","infopos","tweenOpacity","map","html","./style-help","6","InfoPos","TopLeft","TopRight","BottomRight","BottomLeft","7","Lane","PIXI","Point","Lerp","k","vectorBetweenPoints","car","isVertical","POINT_ZERO","8","LANES","createHorizontalLane","verticalOffset","dirMultiplier","createVerticalLane","horizontalOffset","setOppositeLanes","laneA","laneB","9","obj","_view","__esModule","default","./situations/car-enters-lane","./situations/child-runs","./situations/tree-falls","./view","10","Menu","elementId","optionsArray","title","menuClass","currentOption","visible","options","Array","from","buttons","titleText","concat","optionsArea","find","cursor","createHTMLOptions","removeClass","addClass","select","up","down","enterOption","updateCursorPosition","fadeInCursor","clearHTML","domCursor","style","opacity","then","click","action","button","append","empty","deselect","css","11","createAnimatedSprite","sourceImages","scale","anchor","textures","image","Texture","AnimatedSprite","sourceImage","texture","Sprite","highlightSprite","color","graphics","Graphics","lineStyle","drawCircle","max","b","v1","v2","atan2","PI","screenPosFromFraction","moveToFraction","pos","pixiFadeIn","toOpacity","alpha","Quadratic","Out","pixiMoveTo","dest","12","Policies","_texts","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","id","Texts","Humanist","Profit","Protector","./texts","13","Report","situationDescriptionElement","policyBlock","policyNameElement","policyObjectiveElement","decisionBlock","decisionElement","display","classList","remove","add","situation","getDescription","policy","objective","decision","14","SceneElement","initialPosition","setSprite","reset","15","_policies","_menu","_interopRequireDefault","_countdownButton","_infoBoxes","_design","SituationRunner","report","currentDecision","tempElements","currentPolicy","policyMenu","agentCar","setup","wait","showElementsInfo","getElements","setSituation","waitForAdvanceButton","Next","waitForPolicy","setPolicy","hideElementsInfo","playOutDecision","setDecision","Restart","clearSprites","teardown","getDecision","ChoosePolicy","elements","_this3","promise","highlight","fadeShow","_this4","removeTempElements","hideAll","actionFunction","addTempElement","_this5","./countdown-button","./design","./info-boxes","./menu","./policies","16","Situation","sprites","aSituation","situations","aSprite","policyId","getDecisions","HighlightAgentColor","HighlightOthersColor","17","_sceneElement","_situation","_car","_lanes","_infoPositions","_typeof","Symbol","iterator","constructor","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","BUS_STOP_X","BUS_STOP_Y","BlackCarCrossVector","BlackCarCrashVector","AgentCrashVector","TurnLeftVector","TurnRightVector","CarEntersLaneSituation","agentLane","parkedLane","blackCar","truck","busStop","CarEntersLane","subClass","superClass","create","_inherits","fadeIn","moveTruckInPosition","all","moveBlackCarInPosition","moveAgentInPosition","AutonomousCar","LuxuryCar","left","Truck","right","BusStop","humanist","decisionAdvace","profit","decisionTurnLeft","protector","decisionTurnRight","advanceAndTurn","moveBlackCarToFinalPosition","addSprite","driveInLaneUntilPosition","Cubic","Sinusoidal","BLACK_CAR_CROSS_TIME","In","SETUP_TIME","registerSituation","../car","../constants","../info-positions","../lanes","../scene-element","../situation","../texts","18","childStartPos","childEndPos","ChildRunsSituation","child","crossingCar","ambulance","ChildRuns","moveCrossingCarInPosition","moveAmbulanceInPosition","childRuns","Ambulance","Child","OtherCar","decisionCrashCrossingCar","decisionAdvance","carMovement","crossingCarMovement","_this6","loop","play","stop","../pixi-help","19","TreeFallsSituation","waterPuddle","tree","cyclist","bicycleLane","TreeFalls","moveCyclistInPosition","fellTree","Cyclist","FallenTree","softlyCrashTree","fullBreak","crashCyclist","delay","bicycleMovement","_this7","20","coord","top","21","ChooseSituation","Show","22","_textsDe","./texts-de","23","_report","_situationRunner","View","app","Application","backgroundColor","resolution","devicePixelRatio","appendChild","Container","sortableChildren","stage","screen","background","afterIdleAction","SituationMenu","startSituation","runner","ticker","update","currentLane","random","startIdleAnimation","doIdleAnimation","situationID","queueAction","situationInstance","getSituation","run","./car","./lanes","./menu.js","./report","./scene-element","./situation","./situation-runner"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _constants = require(\"./constants\");\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _lane = require(\"./lane\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Car =\n/*#__PURE__*/\nfunction () {\n  function Car(view, imageFile) {\n    var lane = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _lane.NO_LANE;\n\n    _classCallCheck(this, Car);\n\n    this.view = view;\n    this.sprite = (0, _pixiHelp.createSprite)(imageFile, _constants.CAR_SCALE, 0.5);\n    this.sprite.zIndex = 100;\n    this.lane = lane;\n  }\n\n  _createClass(Car, [{\n    key: \"placeInLane\",\n    value: function placeInLane(lane) {\n      var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n      var forceDirection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      this.lane = lane;\n      this.x = lane.start.x + (lane.end.x - lane.start.x) * position;\n      this.y = lane.start.y + (lane.end.y - lane.start.y) * position;\n\n      if (forceDirection) {\n        this.forceLaneDirection();\n      }\n    }\n  }, {\n    key: \"forceLaneDirection\",\n    value: function forceLaneDirection() {\n      this.sprite.angle = this.lane.getDrivingAngle();\n    }\n  }, {\n    key: \"driveInLaneUntilPosition\",\n    value: function driveInLaneUntilPosition() {\n      var _this = this;\n\n      var endPosition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1.0;\n      var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;\n      var easing = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : TWEEN.Easing.Linear.None;\n      var stopPosition = this.lane.getPositionCoordinates(endPosition);\n      return new Promise(function (resolve) {\n        new TWEEN.Tween(_this.sprite).to({\n          x: stopPosition.x,\n          y: stopPosition.y\n        }, time).easing(easing).onComplete(function () {\n          return resolve('arrived');\n        }).start();\n      });\n    }\n  }, {\n    key: \"advanceAndTurn\",\n    value: function advanceAndTurn(offsetPosition) {\n      var _this2 = this;\n\n      var offsetAngle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n      var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : TWEEN.Easing.Linear.None;\n      return new Promise(function (resolve) {\n        new TWEEN.Tween(_this2).to({\n          x: _this2.x + offsetPosition.x,\n          y: _this2.y + offsetPosition.y,\n          angle: _this2.angle + offsetAngle\n        }, time).easing(easing).onComplete(function () {\n          return resolve('crash');\n        }).start();\n      });\n    }\n  }, {\n    key: \"crossLane\",\n    value: function crossLane() {\n      this.placeInLane(this.lane.oppositeLane, 1 - this.lane.getCarPosition(this), false);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.view.container.addChild(this.sprite);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.view.container.removeChild(this.sprite);\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.sprite.x;\n    },\n    set: function set(x) {\n      this.sprite.x = x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.sprite.y;\n    },\n    set: function set(y) {\n      this.sprite.y = y;\n    }\n  }, {\n    key: \"angle\",\n    get: function get() {\n      return this.sprite.angle;\n    },\n    set: function set(angle) {\n      this.sprite.angle = angle;\n    }\n  }]);\n\n  return Car;\n}();\n\nexports[\"default\"] = Car;\n\n},{\"./constants\":2,\"./lane\":7,\"./pixi-help\":11}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SPRITE_WIDTH = exports.STREET_LANE_OFFSET = exports.BLOCK_SIZE = exports.STREET_WIDTH = exports.IDLE_ANIMATION_TIME = exports.DEFAULT_SPEED = exports.BorderBlockSize = exports.StreetOffsetFromCenter = exports.ViewSize = exports.CAR_SCALE = void 0;\nvar CAR_SCALE = 0.25;\nexports.CAR_SCALE = CAR_SCALE;\nvar ViewSize = {\n  width: 1920,\n  height: 1080\n};\nexports.ViewSize = ViewSize;\nvar StreetOffsetFromCenter = {\n  x: 560,\n  y: 350\n};\nexports.StreetOffsetFromCenter = StreetOffsetFromCenter;\nvar BorderBlockSize = {\n  width: 320,\n  height: 110\n};\nexports.BorderBlockSize = BorderBlockSize;\nvar DEFAULT_SPEED = 15;\nexports.DEFAULT_SPEED = DEFAULT_SPEED;\nvar IDLE_ANIMATION_TIME = 2000;\nexports.IDLE_ANIMATION_TIME = IDLE_ANIMATION_TIME;\nvar STREET_WIDTH = 160;\nexports.STREET_WIDTH = STREET_WIDTH;\nvar BLOCK_SIZE = 512;\nexports.BLOCK_SIZE = BLOCK_SIZE;\nvar STREET_LANE_OFFSET = STREET_WIDTH / 4;\nexports.STREET_LANE_OFFSET = STREET_LANE_OFFSET;\nvar SPRITE_WIDTH = 256 * CAR_SCALE;\nexports.SPRITE_WIDTH = SPRITE_WIDTH;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar KeyEnter = 13;\n\nvar CountdownButton =\n/*#__PURE__*/\nfunction () {\n  function CountdownButton(text, onClick) {\n    var _this = this;\n\n    _classCallCheck(this, CountdownButton);\n\n    this.htmlButton = $('#advanceButton');\n    this.htmlText = $('#advanceText');\n    this.text = text;\n    this.onClick = onClick;\n    this.htmlText.text(text);\n    this.htmlButton.on('click', function () {\n      return _this.doClick();\n    });\n    this.htmlButton.show();\n    this.timeoutRunner = null;\n\n    window.onkeydown = function (event) {\n      if (event.which == KeyEnter) _this.doClick();\n    };\n  }\n\n  _createClass(CountdownButton, [{\n    key: \"doClick\",\n    value: function doClick() {\n      window.onkeydown = function () {};\n\n      if (this.timeoutRunner != null) clearTimeout(this.timeoutRunner);\n      this.htmlButton.hide();\n      return this.onClick();\n    }\n  }, {\n    key: \"setTimeout\",\n    value: function (_setTimeout) {\n      function setTimeout(_x) {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function (timeout) {\n      var _this2 = this;\n\n      clearTimeout(this.timeoutRunner);\n\n      if (timeout < 0) {\n        this.htmlText.text(this.text);\n      } else {\n        if (timeout >= 1000) {\n          this.htmlText.text(this.text + \" (\" + Math.floor(timeout / 1000) + \")\");\n        }\n\n        if (timeout <= 1000) {\n          this.timeoutRunner = setTimeout(function () {\n            return _this2.doClick();\n          }, timeout);\n        } else {\n          this.timeoutRunner = setTimeout(function () {\n            return _this2.setTimeout(timeout - 1000);\n          }, 1000);\n        }\n      }\n    })\n  }]);\n\n  return CountdownButton;\n}();\n\nexports[\"default\"] = CountdownButton;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HighlightColor = void 0;\nvar Violet = 0x8f1a81;\nvar Yellow = 0xffec02;\nvar Grey = 0x666666;\nvar HighlightColor = Yellow;\nexports.HighlightColor = HighlightColor;\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _styleHelp = require(\"./style-help\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar INFO_BOX_OPACITY = 0.75;\n\nvar InfoBox =\n/*#__PURE__*/\nfunction () {\n  function InfoBox(htmlElement) {\n    _classCallCheck(this, InfoBox);\n\n    this.htmlElement = htmlElement;\n  }\n\n  _createClass(InfoBox, [{\n    key: \"show\",\n    value: function show(element) {\n      this.htmlElement.querySelector('#name').innerText = element.name;\n      this.htmlElement.querySelector('#description').innerHTML = element.description;\n      (0, _styleHelp.setLeftTopCSSFromCoord)(this.htmlElement, element.infopos);\n    }\n  }, {\n    key: \"fadeShow\",\n    value: function fadeShow(element, time) {\n      this.show(element);\n      return (0, _styleHelp.tweenOpacity)(this.htmlElement, INFO_BOX_OPACITY, time);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n      return (0, _styleHelp.tweenOpacity)(this.htmlElement, 0, time);\n    }\n  }], [{\n    key: \"hideAll\",\n    value: function hideAll() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n      InfoBox.Boxes.forEach(function (box) {\n        return box.hide(time);\n      });\n    }\n  }, {\n    key: \"get\",\n    value: function get(index) {\n      return InfoBox.Boxes[index];\n    }\n  }]);\n\n  return InfoBox;\n}();\n\nexports[\"default\"] = InfoBox;\nInfoBox.Boxes = $(\".info_element\").get().map(function (html) {\n  return new InfoBox(html);\n});\n\n},{\"./style-help\":20}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar BoxSpace = 220;\n\nvar InfoPos =\n/*#__PURE__*/\nfunction () {\n  function InfoPos(x, y) {\n    _classCallCheck(this, InfoPos);\n\n    this.x = x;\n    this.y = y;\n  }\n\n  _createClass(InfoPos, [{\n    key: \"right\",\n    value: function right() {\n      return new InfoPos(this.x + BoxSpace, this.y);\n    }\n  }, {\n    key: \"left\",\n    value: function left() {\n      return new InfoPos(this.x - BoxSpace, this.y);\n    }\n  }, {\n    key: \"up\",\n    value: function up() {\n      return new InfoPos(this.x, this.y - BoxSpace);\n    }\n  }, {\n    key: \"down\",\n    value: function down() {\n      return new InfoPos(this.x, this.y + BoxSpace);\n    }\n  }]);\n\n  return InfoPos;\n}();\n\nexports[\"default\"] = InfoPos;\nInfoPos.TopLeft = new InfoPos(300, 90);\nInfoPos.TopRight = new InfoPos(1420, 90);\nInfoPos.BottomRight = new InfoPos(1420, 790);\nInfoPos.BottomLeft = new InfoPos(300, 790);\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NO_LANE = exports.Lane = void 0;\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nPIXI.Point.Lerp = function (start, end, k) {\n  return new PIXI.Point(start.x + k * (end.x - start.x), start.y + k * (end.y - start.y));\n};\n\nvar Lane =\n/*#__PURE__*/\nfunction () {\n  function Lane(start, end) {\n    _classCallCheck(this, Lane);\n\n    this.start = start;\n    this.end = end;\n    this.oppositeLane = null;\n  }\n\n  _createClass(Lane, [{\n    key: \"isVertical\",\n    value: function isVertical() {\n      return this.start.x == this.end.x;\n    }\n  }, {\n    key: \"isHorizontal\",\n    value: function isHorizontal() {\n      return this.start.y == this.end.y;\n    }\n  }, {\n    key: \"getDrivingAngle\",\n    value: function getDrivingAngle() {\n      return (0, _pixiHelp.vectorBetweenPoints)(this.start, this.end);\n    }\n  }, {\n    key: \"getPositionCoordinates\",\n    value: function getPositionCoordinates(position) {\n      return PIXI.Point.Lerp(this.start, this.end, position);\n    }\n  }, {\n    key: \"getCarPosition\",\n    value: function getCarPosition(car) {\n      if (this.isVertical()) {\n        return (car.y - this.start.y) / (this.end.y - this.start.y);\n      }\n\n      return (car.x - this.start.x) / (this.end.x - this.start.x);\n    }\n  }]);\n\n  return Lane;\n}();\n\nexports.Lane = Lane;\nvar NO_LANE = new Lane(_pixiHelp.POINT_ZERO, new PIXI.Point(1, 0));\nexports.NO_LANE = NO_LANE;\n\n},{\"./pixi-help\":11}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LANES = void 0;\n\nvar _lane = require(\"./lane\");\n\nvar _constants = require(\"./constants\");\n\n/* globals PIXI */\nfunction createHorizontalLane(verticalOffset, dirMultiplier) {\n  return new _lane.Lane(new PIXI.Point(_constants.ViewSize.width / 2 * dirMultiplier, -verticalOffset), new PIXI.Point(-(_constants.ViewSize.width / 2) * dirMultiplier, -verticalOffset));\n}\n\nfunction createVerticalLane(horizontalOffset, dirMultiplier) {\n  return new _lane.Lane(new PIXI.Point(-horizontalOffset, _constants.ViewSize.height / 2 * dirMultiplier), new PIXI.Point(-horizontalOffset, -(_constants.ViewSize.height / 2) * dirMultiplier));\n} // eslint-disable-next-line import/prefer-default-export\n\n\nvar LANES = [createVerticalLane(_constants.StreetOffsetFromCenter.x - _constants.STREET_LANE_OFFSET, 1), createVerticalLane(_constants.StreetOffsetFromCenter.x + _constants.STREET_LANE_OFFSET, -1), createVerticalLane(-_constants.StreetOffsetFromCenter.x - _constants.STREET_LANE_OFFSET, 1), createVerticalLane(-_constants.StreetOffsetFromCenter.x + _constants.STREET_LANE_OFFSET, -1), createHorizontalLane(_constants.StreetOffsetFromCenter.y + _constants.STREET_LANE_OFFSET, 1), createHorizontalLane(_constants.StreetOffsetFromCenter.y - _constants.STREET_LANE_OFFSET, -1), createHorizontalLane(-_constants.StreetOffsetFromCenter.y + _constants.STREET_LANE_OFFSET, 1), createHorizontalLane(-_constants.StreetOffsetFromCenter.y - _constants.STREET_LANE_OFFSET, -1)];\nexports.LANES = LANES;\n\nfunction setOppositeLanes(laneA, laneB) {\n  // eslint-disable-next-line no-param-reassign\n  laneA.oppositeLane = laneB; // eslint-disable-next-line no-param-reassign\n\n  laneB.oppositeLane = laneA;\n}\n\nsetOppositeLanes(LANES[0], LANES[1]);\nsetOppositeLanes(LANES[2], LANES[3]);\nsetOppositeLanes(LANES[4], LANES[5]);\nsetOppositeLanes(LANES[6], LANES[7]);\n\n},{\"./constants\":2,\"./lane\":7}],9:[function(require,module,exports){\n\"use strict\";\n\nvar _view = _interopRequireDefault(require(\"./view\"));\n\nrequire(\"./situations/car-enters-lane\");\n\nrequire(\"./situations/tree-falls\");\n\nrequire(\"./situations/child-runs\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/* globals $ */\nvar view = new _view[\"default\"]($('#game')[0]);\nview.start();\n\n},{\"./situations/car-enters-lane\":17,\"./situations/child-runs\":18,\"./situations/tree-falls\":19,\"./view\":23}],10:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _styleHelp = require(\"./style-help\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar KeyArrowUp = 38;\nvar KeyArrowDown = 40;\nvar KeyEnter = 13;\n\nvar Menu =\n/*#__PURE__*/\nfunction () {\n  function Menu(elementId, optionsArray, title, menuClass) {\n    _classCallCheck(this, Menu);\n\n    this.currentOption = 0;\n    this.visible = false;\n    this.menuClass = menuClass;\n    this.options = Array.from(optionsArray);\n    this.buttons = [];\n    this.titleText = title;\n    this.htmlElement = $(\"#\".concat(elementId));\n    this.optionsArea = this.htmlElement.find('#menu_options_area');\n    this.cursor = this.htmlElement.find('#menu_cursor');\n    this.title = this.htmlElement.find('#menu_title');\n  }\n\n  _createClass(Menu, [{\n    key: \"show\",\n    value: function show() {\n      var _this = this;\n\n      this.createHTMLOptions();\n      this.currentOption = 0;\n      this.htmlElement.removeClass();\n      this.htmlElement.addClass(this.menuClass);\n      this.select(this.currentOption);\n      this.title.text(this.titleText);\n\n      window.onkeydown = function (event) {\n        switch (event.which) {\n          case KeyArrowUp:\n            _this.up();\n\n            break;\n\n          case KeyArrowDown:\n            _this.down();\n\n            break;\n\n          case KeyEnter:\n            _this.enterOption();\n\n            break;\n        }\n      };\n\n      this.updateCursorPosition();\n      this.htmlElement.show();\n      this.fadeInCursor();\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.htmlElement.addClass('fade_out');\n\n      window.onkeydown = function () {};\n\n      this.clearHTML();\n    }\n  }, {\n    key: \"fadeInCursor\",\n    value: function fadeInCursor() {\n      var domCursor = this.cursor[0];\n      domCursor.style.opacity = 0;\n      return (0, _styleHelp.tweenOpacity)(domCursor, 1, 500).then(function () {\n        return (0, _styleHelp.tweenOpacity)(domCursor, 0.125, 500);\n      }).then(function () {\n        return (0, _styleHelp.tweenOpacity)(domCursor, 1, 500);\n      });\n    }\n  }, {\n    key: \"createHTMLOptions\",\n    value: function createHTMLOptions() {\n      this.buttons = this.options.map(function (element) {\n        return $(\"<input type=\\\"button\\\" value=\\\"\".concat(element.text, \"\\\" class=\\\"menu_option fade_in\\\">\")).click(element.action);\n      });\n      this.buttons.forEach(function (button) {\n        return $('#menu_options_area').append(button);\n      });\n    }\n  }, {\n    key: \"clearHTML\",\n    value: function clearHTML() {\n      this.optionsArea.empty();\n    }\n  }, {\n    key: \"enterOption\",\n    value: function enterOption() {\n      var action = this.options[this.currentOption].action;\n      this.hide();\n      action();\n    }\n  }, {\n    key: \"select\",\n    value: function select(index) {\n      this.buttons[index].addClass('selected');\n    }\n  }, {\n    key: \"deselect\",\n    value: function deselect(index) {\n      this.buttons[index].removeClass('selected');\n    }\n  }, {\n    key: \"down\",\n    value: function down() {\n      this.deselect(this.currentOption);\n      if (this.currentOption < this.options.length - 1) this.currentOption++;\n      this.select(this.currentOption);\n      this.updateCursorPosition();\n    }\n  }, {\n    key: \"up\",\n    value: function up() {\n      this.deselect(this.currentOption);\n      if (this.currentOption > 0) this.currentOption--;\n      this.select(this.currentOption);\n      this.updateCursorPosition();\n    }\n  }, {\n    key: \"updateCursorPosition\",\n    value: function updateCursorPosition() {\n      this.cursor.css('margin-top', 15 + this.currentOption * 75 + \"px\");\n    }\n  }]);\n\n  return Menu;\n}();\n\nexports[\"default\"] = Menu;\n\n},{\"./style-help\":20}],11:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createAnimatedSprite = createAnimatedSprite;\nexports.createSprite = createSprite;\nexports.highlightSprite = highlightSprite;\nexports.vectorBetweenPoints = vectorBetweenPoints;\nexports.screenPosFromFraction = screenPosFromFraction;\nexports.moveToFraction = moveToFraction;\nexports.pixiFadeIn = pixiFadeIn;\nexports.pixiMoveTo = pixiMoveTo;\nexports.POINT_ZERO = void 0;\n\nvar _constants = require(\"./constants\");\n\n/* global PIXI */\nfunction createAnimatedSprite(sourceImages, scale) {\n  var anchor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n  var textures = sourceImages.map(function (image) {\n    return PIXI.Texture.from(image);\n  });\n  var sprite = new PIXI.AnimatedSprite(textures);\n  sprite.scale.x = scale;\n  sprite.scale.y = scale;\n  sprite.anchor.set(anchor);\n  return sprite;\n}\n\nfunction createSprite(sourceImage, scale) {\n  var anchor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n  var texture = PIXI.Texture.from(sourceImage);\n  var sprite = new PIXI.Sprite(texture);\n  sprite.scale.x = scale;\n  sprite.scale.y = scale;\n  sprite.anchor.set(anchor);\n  return sprite;\n}\n\nfunction highlightSprite(sprite, color) {\n  var graphics = new PIXI.Graphics();\n  graphics.lineStyle(5, color, 1, 0.5);\n  graphics.drawCircle(sprite.x, sprite.y, Math.max(sprite.width, sprite.height) / 2 + 10);\n  return graphics;\n}\n\nfunction vectorBetweenPoints(a, b) {\n  var v1 = new PIXI.Point(0, -1);\n  var v2 = new PIXI.Point(b.x - a.x, b.y - a.y);\n  var radians = Math.atan2(v2.y, v2.x) - Math.atan2(v1.y, v1.x);\n  return radians * 180 / Math.PI;\n}\n/**\n * \n * @param {fraction [0,1] of the screen, horizontally, starting from left} x \n * @param {fraction [0,1] of the screen, vertically, starting from top} y \n */\n\n\nfunction screenPosFromFraction(x, y) {\n  return new PIXI.Point((x - 0.5) * _constants.ViewSize.width, (y - 0.5) * _constants.ViewSize.height);\n}\n\nfunction moveToFraction(sprite, x, y) {\n  var pos = screenPosFromFraction(x, y);\n  sprite.x = pos.x;\n  sprite.y = pos.y;\n}\n\nfunction pixiFadeIn(element, toOpacity) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  return new Promise(function (resolve) {\n    new TWEEN.Tween(element).to({\n      alpha: toOpacity\n    }, time).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n      return resolve('visible');\n    }).start();\n  });\n}\n\nfunction pixiMoveTo(element, dest) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  return new Promise(function (resolve) {\n    new TWEEN.Tween(element).to({\n      x: dest.x,\n      y: dest.y\n    }, time).easing(TWEEN.Easing.Linear.None).onComplete(function () {\n      return resolve('moved');\n    }).start();\n  });\n}\n\nvar POINT_ZERO = new PIXI.Point(0, 0);\nexports.POINT_ZERO = POINT_ZERO;\n\n},{\"./constants\":2}],12:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Policies = void 0;\n\nvar _texts = require(\"./texts\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// eslint-disable-next-line import/prefer-default-export\nvar Policies = [_objectSpread({\n  id: 'humanist'\n}, _texts.Texts.Humanist), _objectSpread({\n  id: 'profit'\n}, _texts.Texts.Profit), _objectSpread({\n  id: 'protector'\n}, _texts.Texts.Protector)];\nexports.Policies = Policies;\n\n},{\"./texts\":22}],13:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _styleHelp = require(\"./style-help\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Report =\n/*#__PURE__*/\nfunction () {\n  function Report(htmlElement) {\n    _classCallCheck(this, Report);\n\n    this.htmlElement = htmlElement;\n    this.situationDescriptionElement = this.htmlElement.querySelector('#situation_description');\n    this.policyBlock = this.htmlElement.querySelector('#policy');\n    this.policyNameElement = this.htmlElement.querySelector('#policy_name');\n    this.policyObjectiveElement = this.htmlElement.querySelector('#policy_objective');\n    this.decisionBlock = this.htmlElement.querySelector('#decision');\n    this.decisionElement = this.htmlElement.querySelector('#decision_text');\n  }\n\n  _createClass(Report, [{\n    key: \"show\",\n    value: function show() {\n      this.decisionBlock.style.display = \"none\";\n      this.policyBlock.style.display = \"none\";\n      return (0, _styleHelp.tweenOpacity)(this.htmlElement, 1, 500);\n    }\n  }, {\n    key: \"pullUp\",\n    value: function pullUp() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n      this.htmlElement.classList.remove('report_down');\n      this.htmlElement.classList.remove('report_up');\n      this.htmlElement.classList.add('report_up');\n      return new Promise(function (r) {\n        return setTimeout(r, time);\n      });\n    }\n  }, {\n    key: \"pullDown\",\n    value: function pullDown() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n      this.htmlElement.classList.remove('report_down');\n      this.htmlElement.classList.remove('report_up');\n      this.htmlElement.classList.add('report_down');\n      return new Promise(function (r) {\n        return setTimeout(r, time);\n      });\n    }\n  }, {\n    key: \"setSituation\",\n    value: function setSituation(situation) {\n      this.situationDescriptionElement.innerHTML = situation.getDescription();\n    }\n  }, {\n    key: \"setPolicy\",\n    value: function setPolicy(policy) {\n      this.policyBlock.style.display = \"block\";\n      this.policyNameElement.innerHTML = policy.name;\n      this.policyObjectiveElement.innerHTML = policy.objective;\n    }\n  }, {\n    key: \"setDecision\",\n    value: function setDecision(decision) {\n      this.decisionBlock.style.display = \"block\";\n      this.decisionElement.innerHTML = decision;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      return (0, _styleHelp.tweenOpacity)(this.htmlElement, 0, 250);\n    }\n  }]);\n\n  return Report;\n}();\n\nexports[\"default\"] = Report;\n\n},{\"./style-help\":20}],14:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SceneElement =\n/*#__PURE__*/\nfunction () {\n  function SceneElement(view, imageFile) {\n    var position = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _pixiHelp.POINT_ZERO;\n    var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _constants.CAR_SCALE;\n\n    _classCallCheck(this, SceneElement);\n\n    this.view = view;\n    this.initialPosition = position;\n    this.visible = false;\n    this.setSprite((0, _pixiHelp.createSprite)(imageFile, scale));\n  }\n\n  _createClass(SceneElement, [{\n    key: \"setSprite\",\n    value: function setSprite(sprite) {\n      this.sprite = sprite;\n      this.reset();\n    }\n  }, {\n    key: \"fadeIn\",\n    value: function fadeIn(time) {\n      this.show();\n      this.sprite.alpha = 0;\n      return (0, _pixiHelp.pixiFadeIn)(this.sprite, 1, time);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this.view.container.addChild(_this.sprite);\n\n        _this.visible = true;\n        resolve();\n      });\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        _this2.view.container.removeChild(_this2.sprite);\n\n        _this2.visible = false;\n        resolve();\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.sprite.x = this.initialPosition.x;\n      this.sprite.y = this.initialPosition.y;\n      this.sprite.angle = 0;\n    }\n  }]);\n\n  return SceneElement;\n}();\n\nexports[\"default\"] = SceneElement;\n\n},{\"./constants\":2,\"./pixi-help\":11}],15:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _policies = require(\"./policies\");\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _menu = _interopRequireDefault(require(\"./menu\"));\n\nvar _countdownButton = _interopRequireDefault(require(\"./countdown-button\"));\n\nvar _texts = require(\"./texts\");\n\nvar _infoBoxes = _interopRequireDefault(require(\"./info-boxes\"));\n\nvar _design = require(\"./design\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SituationRunner =\n/*#__PURE__*/\nfunction () {\n  function SituationRunner(view, report) {\n    _classCallCheck(this, SituationRunner);\n\n    this.view = view;\n    this.report = report;\n    this.currentDecision = null;\n    this.tempElements = [];\n    this.currentPolicy = null;\n    this.policyMenu = null;\n  }\n\n  _createClass(SituationRunner, [{\n    key: \"run\",\n    value: function run(situation) {\n      var _this = this;\n\n      this.view.agentCar.hide();\n      situation.setup().then(function () {\n        return situation.start();\n      }).then(function () {\n        return situation.wait(1000);\n      }).then(function () {\n        return _this.showElementsInfo(situation.getElements());\n      }).then(function () {\n        return _this.report.setSituation(situation);\n      }).then(function () {\n        return _this.report.show();\n      }).then(function () {\n        return _this.waitForAdvanceButton(_texts.Texts.Next, -1);\n      }).then(function () {\n        return _this.waitForPolicy(situation);\n      }).then(function () {\n        return _this.report.setPolicy(_this.currentPolicy);\n      }).then(function () {\n        return situation.wait(1000);\n      }).then(function () {\n        return _this.hideElementsInfo();\n      }).then(function () {\n        return situation.wait(1000);\n      }).then(function () {\n        return _this.playOutDecision();\n      }).then(function () {\n        return situation.wait(1000);\n      }).then(function () {\n        return _this.report.setDecision(_this.currentDecision.text);\n      }).then(function () {\n        return _this.waitForAdvanceButton(_texts.Texts.Restart, -1);\n      }).then(function () {\n        return _this.report.hide();\n      }).then(function () {\n        return situation.clearSprites();\n      }).then(function () {\n        return situation.teardown();\n      }).then(function () {\n        return _this.view.start();\n      });\n    }\n  }, {\n    key: \"waitForPolicy\",\n    value: function waitForPolicy(situation) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        var options = _policies.Policies.map(function (policy) {\n          return {\n            text: policy.name + \": \" + policy.objective,\n            action: function action() {\n              _this2.currentPolicy = policy;\n              _this2.currentDecision = situation.getDecision(policy.id);\n\n              _this2.policyMenu.hide();\n\n              resolve(policy.name);\n            }\n          };\n        });\n\n        _this2.policyMenu = new _menu[\"default\"]('menu', options, _texts.Texts.ChoosePolicy, 'bottom_menu');\n\n        _this2.policyMenu.show();\n      });\n    }\n  }, {\n    key: \"waitForAdvanceButton\",\n    value: function waitForAdvanceButton() {\n      var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _texts.Texts.Next;\n      var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10000;\n      return new Promise(function (resolve) {\n        var cb = new _countdownButton[\"default\"](text, resolve);\n        cb.setTimeout(timeout);\n      });\n    }\n  }, {\n    key: \"waitForKeyPress\",\n    value: function waitForKeyPress() {\n      return new Promise(function (resolve) {\n        window.onkeydown = function () {\n          window.onkeydown = function () {};\n\n          resolve('keydown');\n        };\n      });\n    }\n  }, {\n    key: \"showElementsInfo\",\n    value: function showElementsInfo(elements) {\n      var _this3 = this;\n\n      var promise = new Promise(function (r) {\n        return r('start fades');\n      });\n      elements.forEach(function (element, index) {\n        promise = promise.then(function (r) {\n          _this3.highlight(element.sprite);\n\n          return _infoBoxes[\"default\"].get(index).fadeShow(element, 1000);\n        });\n      });\n      return promise;\n    }\n  }, {\n    key: \"hideElementsInfo\",\n    value: function hideElementsInfo() {\n      var _this4 = this;\n\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n      return new Promise(function (resolve) {\n        _this4.removeTempElements();\n\n        _infoBoxes[\"default\"].hideAll(time);\n\n        setTimeout(resolve, time);\n      });\n    }\n  }, {\n    key: \"playOutDecision\",\n    value: function playOutDecision() {\n      return this.currentDecision.actionFunction();\n    }\n  }, {\n    key: \"highlight\",\n    value: function highlight(sprite) {\n      this.addTempElement((0, _pixiHelp.highlightSprite)(sprite, _design.HighlightColor));\n    }\n  }, {\n    key: \"addTempElement\",\n    value: function addTempElement(element) {\n      this.tempElements.push(element);\n      this.view.container.addChild(element);\n    }\n  }, {\n    key: \"removeTempElements\",\n    value: function removeTempElements() {\n      var _this5 = this;\n\n      this.tempElements.forEach(function (element) {\n        _this5.view.container.removeChild(element);\n      });\n      this.tempElements = [];\n    }\n  }]);\n\n  return SituationRunner;\n}();\n\nexports[\"default\"] = SituationRunner;\n\n},{\"./countdown-button\":3,\"./design\":4,\"./info-boxes\":5,\"./menu\":10,\"./pixi-help\":11,\"./policies\":12,\"./texts\":22}],16:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/* eslint-disable class-methods-use-this */\nvar Situation =\n/*#__PURE__*/\nfunction () {\n  function Situation(view) {\n    _classCallCheck(this, Situation);\n\n    this.view = view;\n    this.sprites = [];\n  }\n\n  _createClass(Situation, [{\n    key: \"addSprite\",\n    value: function addSprite(sprite) {\n      this.sprites.push(sprite);\n      this.view.container.addChild(sprite);\n    }\n  }, {\n    key: \"clearSprites\",\n    value: function clearSprites() {\n      var _this = this;\n\n      this.sprites.forEach(function (aSprite) {\n        _this.view.container.removeChild(aSprite);\n      });\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {}\n  }, {\n    key: \"start\",\n    value: function start() {}\n  }, {\n    key: \"teardown\",\n    value: function teardown() {}\n  }, {\n    key: \"getElements\",\n    value: function getElements() {}\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {}\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {}\n  }, {\n    key: \"getDecision\",\n    value: function getDecision(policyId) {\n      return this.getDecisions()[policyId];\n    }\n  }, {\n    key: \"wait\",\n    value: function wait() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n      return new Promise(function (resolve) {\n        return setTimeout(resolve, time);\n      });\n    }\n  }], [{\n    key: \"registerSituation\",\n    value: function registerSituation(key, aSituation) {\n      Situation.situations[key] = aSituation;\n    }\n  }, {\n    key: \"getSituation\",\n    value: function getSituation(key, view) {\n      var situationClass = Situation.situations[key];\n      return new situationClass(view);\n    }\n  }]);\n\n  return Situation;\n}();\n\nexports[\"default\"] = Situation;\nSituation.situations = {};\nSituation.HighlightAgentColor = 0xFFF200;\nSituation.HighlightOthersColor = 0xFF8000;\n\n},{}],17:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _constants = require(\"../constants\");\n\nvar _sceneElement = _interopRequireDefault(require(\"../scene-element\"));\n\nvar _situation = _interopRequireDefault(require(\"../situation\"));\n\nvar _car = _interopRequireDefault(require(\"../car\"));\n\nvar _lanes = require(\"../lanes\");\n\nvar _texts = require(\"../texts\");\n\nvar _infoPositions = _interopRequireDefault(require(\"../info-positions\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar BUS_STOP_X = _constants.ViewSize.width / 2 - _constants.BorderBlockSize.width + _constants.SPRITE_WIDTH / 2;\nvar BUS_STOP_Y = -0.06 * _constants.ViewSize.height;\nvar TRUCK_STOP_POSITION = 0.45;\nvar BLACK_CAR_STOP_POSITION = 0.35;\nvar AGENT_STOP_POSITION = 0.45;\nvar BlackCarCrossVector = new PIXI.Point(_constants.STREET_LANE_OFFSET, _constants.STREET_LANE_OFFSET);\nvar BlackCarCrashVector = new PIXI.Point(0, 40);\nvar AgentCrashVector = new PIXI.Point(0, -40);\nvar TurnLeftVector = new PIXI.Point(-_constants.STREET_LANE_OFFSET * 1.5, -_constants.STREET_LANE_OFFSET * 1.5);\nvar TurnRightVector = new PIXI.Point(_constants.STREET_LANE_OFFSET * 1.5, -_constants.STREET_LANE_OFFSET * 1.5);\n/*\nTimeline:\n0 - 1000: truck enters and parks\n1000 - 1500: black car enters and stops behind truck\n1500 - 2500: agent enters and reaches position\n2250 - 2500: black car crosses lane\n*/\n\nvar SETUP_TIME = 1500;\nvar ENTER_TRUCK_TIME = 1000;\nvar AGENT_ENTER_DELAY = 700;\nvar BLACK_CAR_ENTRY_TIME = 500;\nvar BLACK_CAR_PARKED_DELAY = 500;\nvar BLACK_CAR_CROSS_TIME = 500;\n\nvar CarEntersLaneSituation =\n/*#__PURE__*/\nfunction (_Situation) {\n  _inherits(CarEntersLaneSituation, _Situation);\n\n  function CarEntersLaneSituation(view) {\n    var _this;\n\n    _classCallCheck(this, CarEntersLaneSituation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CarEntersLaneSituation).call(this, view));\n    _this.agentLane = _lanes.LANES[2];\n    _this.parkedLane = _this.agentLane.oppositeLane;\n    _this.blackCar = new _car[\"default\"](view, 'assets/images/car_black.png');\n    _this.truck = new _car[\"default\"](view, 'assets/images/small_truck.png');\n    _this.busStop = new _sceneElement[\"default\"](view, 'assets/images/bus_stop.png', new PIXI.Point(BUS_STOP_X, BUS_STOP_Y));\n    _this.Texts = _texts.Texts.CarEntersLane;\n    return _this;\n  }\n\n  _createClass(CarEntersLaneSituation, [{\n    key: \"setup\",\n    value: function setup() {\n      return this.busStop.fadeIn(500);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      this.busStop.hide();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      this.view.agentCar.hide();\n      return this.moveTruckInPosition().then(function () {\n        return Promise.all([_this2.moveBlackCarInPosition(), _this2.moveAgentInPosition()]);\n      });\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return [_objectSpread({\n        sprite: this.view.agentCar.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].BottomRight\n      }, this.Texts.AutonomousCar), _objectSpread({\n        sprite: this.blackCar.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].TopRight\n      }, this.Texts.LuxuryCar), _objectSpread({\n        sprite: this.truck.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].TopRight.left()\n      }, this.Texts.Truck), _objectSpread({\n        sprite: this.busStop.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].TopRight.right()\n      }, this.Texts.BusStop)];\n    }\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {\n      var _this3 = this;\n\n      return {\n        'humanist': {\n          text: this.Texts.Humanist,\n          actionFunction: function actionFunction() {\n            return _this3.decisionAdvace();\n          }\n        },\n        'profit': {\n          text: this.Texts.Profit,\n          actionFunction: function actionFunction() {\n            return _this3.decisionTurnLeft();\n          }\n        },\n        'protector': {\n          text: this.Texts.Protector,\n          actionFunction: function actionFunction() {\n            return _this3.decisionTurnRight();\n          }\n        }\n      };\n    }\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {\n      return this.Texts.description;\n    } // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: \"decisionAdvace\",\n    value: function decisionAdvace() {\n      return Promise.all([this.blackCar.advanceAndTurn(BlackCarCrashVector, 0, 150), this.view.agentCar.advanceAndTurn(AgentCrashVector, 0, 150)]);\n    }\n  }, {\n    key: \"decisionTurnLeft\",\n    value: function decisionTurnLeft() {\n      return Promise.all([this.moveBlackCarToFinalPosition(), this.view.agentCar.advanceAndTurn(TurnLeftVector, -30, 250)]);\n    }\n  }, {\n    key: \"decisionTurnRight\",\n    value: function decisionTurnRight() {\n      return Promise.all([this.moveBlackCarToFinalPosition(), this.view.agentCar.advanceAndTurn(TurnRightVector, 30, 250)]);\n    }\n  }, {\n    key: \"moveTruckInPosition\",\n    value: function moveTruckInPosition() {\n      this.addSprite(this.truck.sprite);\n      this.truck.placeInLane(this.parkedLane);\n      return this.truck.driveInLaneUntilPosition(TRUCK_STOP_POSITION, ENTER_TRUCK_TIME, TWEEN.Easing.Cubic.Out);\n    }\n  }, {\n    key: \"moveBlackCarInPosition\",\n    value: function moveBlackCarInPosition() {\n      var _this4 = this;\n\n      this.addSprite(this.blackCar.sprite);\n      this.blackCar.placeInLane(this.parkedLane);\n      return this.blackCar.driveInLaneUntilPosition(BLACK_CAR_STOP_POSITION, BLACK_CAR_ENTRY_TIME, TWEEN.Easing.Sinusoidal.Out).then(function () {\n        return _this4.wait(BLACK_CAR_PARKED_DELAY);\n      }).then(function () {\n        return _this4.blackCar.advanceAndTurn(BlackCarCrossVector, -45, BLACK_CAR_CROSS_TIME / 2, TWEEN.Easing.Quadratic.In);\n      }).then(function () {\n        return _this4.blackCar.advanceAndTurn(BlackCarCrossVector, 45, BLACK_CAR_CROSS_TIME / 2, TWEEN.Easing.Quadratic.Out);\n      });\n    }\n  }, {\n    key: \"moveBlackCarToFinalPosition\",\n    value: function moveBlackCarToFinalPosition() {\n      return this.blackCar.advanceAndTurn(new PIXI.Point(0, _constants.STREET_LANE_OFFSET * 2), 0, 250, TWEEN.Easing.Linear.None);\n    }\n  }, {\n    key: \"moveAgentInPosition\",\n    value: function moveAgentInPosition() {\n      var _this5 = this;\n\n      return this.wait(AGENT_ENTER_DELAY).then(function () {\n        _this5.view.agentCar.show();\n\n        _this5.view.agentCar.placeInLane(_this5.agentLane);\n\n        _this5.view.agentCar.driveInLaneUntilPosition(AGENT_STOP_POSITION, SETUP_TIME - AGENT_ENTER_DELAY);\n      });\n    }\n  }]);\n\n  return CarEntersLaneSituation;\n}(_situation[\"default\"]);\n\nexports[\"default\"] = CarEntersLaneSituation;\n\n_situation[\"default\"].registerSituation('car-enters-lane', CarEntersLaneSituation);\n\n},{\"../car\":1,\"../constants\":2,\"../info-positions\":6,\"../lanes\":8,\"../scene-element\":14,\"../situation\":16,\"../texts\":22}],18:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _sceneElement = _interopRequireDefault(require(\"../scene-element\"));\n\nvar _car = _interopRequireDefault(require(\"../car\"));\n\nvar _situation = _interopRequireDefault(require(\"../situation\"));\n\nvar _lanes = require(\"../lanes\");\n\nvar _pixiHelp = require(\"../pixi-help\");\n\nvar _constants = require(\"../constants\");\n\nvar _texts = require(\"../texts\");\n\nvar _infoPositions = _interopRequireDefault(require(\"../info-positions\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar AGENT_LANE = 4;\nvar CROSSING_CAR_POSITION = 1 / 4 + 1 / 32;\nvar AGENT_CAR_POSITION = 1 / 2 + 1 / 8;\nvar AMBULANCE_POSITION = 1 / 2 + 1 / 16;\nvar childStartPos = (0, _pixiHelp.screenPosFromFraction)(1 / 4 + 1 / 32, 1 / 16);\nvar childEndPos = (0, _pixiHelp.screenPosFromFraction)(9 / 32, 1 / 8);\nvar SETUP_TIME = 1500;\nvar CROSSING_CAR_DELAY = 1000;\nvar AMBULANCE_DELAY = 400;\nvar CHILD_DELAY = 1000;\nvar CRASH_TIME = 250;\n\nvar ChildRunsSituation =\n/*#__PURE__*/\nfunction (_Situation) {\n  _inherits(ChildRunsSituation, _Situation);\n\n  function ChildRunsSituation(view) {\n    var _this;\n\n    _classCallCheck(this, ChildRunsSituation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChildRunsSituation).call(this, view));\n    _this.agentLane = _lanes.LANES[AGENT_LANE];\n    _this.oppositeLane = _this.agentLane.oppositeLane;\n    _this.child = new _sceneElement[\"default\"](_this.view, 'assets/images/child.png', childStartPos);\n\n    _this.child.setSprite((0, _pixiHelp.createAnimatedSprite)([1, 2, 3].map(function (index) {\n      return \"assets/images/child_sprite_\" + index + \".png\";\n    }), _constants.CAR_SCALE));\n\n    _this.crossingCar = new _car[\"default\"](_this.view, 'assets/images/blue_car.png');\n    _this.ambulance = new _car[\"default\"](_this.view, 'assets/images/ambulance.png');\n    _this.Texts = _texts.Texts.ChildRuns;\n    return _this;\n  }\n\n  _createClass(ChildRunsSituation, [{\n    key: \"setup\",\n    value: function setup() {\n      return this.child.show();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      return Promise.all([this.moveAgentInPosition(), this.moveCrossingCarInPosition(), this.moveAmbulanceInPosition(), this.childRuns()]);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      this.child.hide();\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return [_objectSpread({\n        sprite: this.view.agentCar.sprite,\n        color: _situation[\"default\"].HighlightAgentColor,\n        infopos: _infoPositions[\"default\"].TopRight.left().left()\n      }, this.Texts.AutonomousCar), _objectSpread({\n        sprite: this.ambulance.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].TopRight.left()\n      }, this.Texts.Ambulance), _objectSpread({\n        sprite: this.child.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].TopLeft\n      }, this.Texts.Child), _objectSpread({\n        sprite: this.crossingCar.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].TopLeft.down()\n      }, this.Texts.OtherCar)];\n    }\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {\n      var _this2 = this;\n\n      return {\n        'humanist': {\n          text: this.Texts.Humanist,\n          actionFunction: function actionFunction() {\n            return _this2.decisionCrashCrossingCar();\n          }\n        },\n        'profit': {\n          text: this.Texts.Profit,\n          actionFunction: function actionFunction() {\n            return _this2.decisionAdvance();\n          }\n        },\n        'protector': {\n          text: this.Texts.Protector,\n          actionFunction: function actionFunction() {\n            return _this2.decisionAdvance();\n          }\n        }\n      };\n    }\n  }, {\n    key: \"decisionAdvance\",\n    value: function decisionAdvance() {\n      return this.view.agentCar.driveInLaneUntilPosition(0.75, CRASH_TIME);\n    }\n  }, {\n    key: \"decisionCrashCrossingCar\",\n    value: function decisionCrashCrossingCar() {\n      var _this3 = this;\n\n      var carMovement = new Promise(function (resolve) {\n        new TWEEN.Tween(_this3.view.agentCar).to({\n          x: _this3.view.agentCar.x - _constants.STREET_LANE_OFFSET,\n          y: _this3.view.agentCar.y + _constants.STREET_LANE_OFFSET * 1.5,\n          angle: _this3.view.agentCar.angle - 60\n        }, CRASH_TIME).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          return resolve('crash');\n        }).start();\n      });\n      var crossingCarMovement = this.crossingCar.driveInLaneUntilPosition(1 / 4 + 1 / 16, CRASH_TIME);\n      return Promise.all([carMovement, crossingCarMovement]);\n    }\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {\n      return this.Texts.description;\n    }\n  }, {\n    key: \"moveAgentInPosition\",\n    value: function moveAgentInPosition() {\n      this.view.agentCar.show();\n      this.view.agentCar.placeInLane(this.agentLane);\n      return this.view.agentCar.driveInLaneUntilPosition(AGENT_CAR_POSITION, SETUP_TIME);\n    }\n  }, {\n    key: \"moveCrossingCarInPosition\",\n    value: function moveCrossingCarInPosition() {\n      var _this4 = this;\n\n      return this.wait(CROSSING_CAR_DELAY).then(function () {\n        _this4.addSprite(_this4.crossingCar.sprite);\n\n        _this4.crossingCar.placeInLane(_this4.oppositeLane);\n\n        return _this4.crossingCar.driveInLaneUntilPosition(CROSSING_CAR_POSITION, SETUP_TIME - CROSSING_CAR_DELAY);\n      });\n    }\n  }, {\n    key: \"moveAmbulanceInPosition\",\n    value: function moveAmbulanceInPosition() {\n      var _this5 = this;\n\n      return this.wait(AMBULANCE_DELAY).then(function () {\n        _this5.addSprite(_this5.ambulance.sprite);\n\n        _this5.ambulance.placeInLane(_this5.agentLane);\n\n        return _this5.ambulance.driveInLaneUntilPosition(AMBULANCE_POSITION, SETUP_TIME - AMBULANCE_DELAY);\n      });\n    }\n  }, {\n    key: \"childRuns\",\n    value: function childRuns() {\n      var _this6 = this;\n\n      this.child.sprite.loop = true;\n      return this.wait(CHILD_DELAY).then(function () {\n        return _this6.child.sprite.play();\n      }).then(function () {\n        return (0, _pixiHelp.pixiMoveTo)(_this6.child.sprite, childEndPos, SETUP_TIME - CHILD_DELAY);\n      }).then(function () {\n        return _this6.child.sprite.stop();\n      });\n    }\n  }]);\n\n  return ChildRunsSituation;\n}(_situation[\"default\"]);\n\nexports[\"default\"] = ChildRunsSituation;\n\n_situation[\"default\"].registerSituation('child-runs', ChildRunsSituation);\n\n},{\"../car\":1,\"../constants\":2,\"../info-positions\":6,\"../lanes\":8,\"../pixi-help\":11,\"../scene-element\":14,\"../situation\":16,\"../texts\":22}],19:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _sceneElement = _interopRequireDefault(require(\"../scene-element\"));\n\nvar _car = _interopRequireDefault(require(\"../car\"));\n\nvar _situation = _interopRequireDefault(require(\"../situation\"));\n\nvar _constants = require(\"../constants\");\n\nvar _lanes = require(\"../lanes\");\n\nvar _texts = require(\"../texts\");\n\nvar _infoPositions = _interopRequireDefault(require(\"../info-positions\"));\n\nvar _pixiHelp = require(\"../pixi-help\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar AGENT_LANE = 1;\nvar CYCLIST_STOP_POSITION = 3 / 8;\nvar AGENT_STOP_POSITION = 3 / 8;\nvar SETUP_TIME = 1000;\nvar TREE_FALL_TIME = 250;\nvar CRASH_TIME = 250;\n\nvar TreeFallsSituation =\n/*#__PURE__*/\nfunction (_Situation) {\n  _inherits(TreeFallsSituation, _Situation);\n\n  function TreeFallsSituation(view) {\n    var _this;\n\n    _classCallCheck(this, TreeFallsSituation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TreeFallsSituation).call(this, view));\n    _this.waterPuddle = new _sceneElement[\"default\"](_this.view, 'assets/images/water_puddle.png', new PIXI.Point(-_constants.StreetOffsetFromCenter.x - _constants.STREET_LANE_OFFSET, -_constants.STREET_LANE_OFFSET));\n    _this.tree = new _sceneElement[\"default\"](_this.view, 'assets/images/tree.png', new PIXI.Point(-_constants.StreetOffsetFromCenter.x - _constants.STREET_LANE_OFFSET * 3, 0));\n    _this.cyclist = new _car[\"default\"](_this.view, 'assets/images/cyclist.png');\n    _this.cyclist.sprite = (0, _pixiHelp.createAnimatedSprite)([1, 2, 3].map(function (index) {\n      return \"assets/images/cyclist_\" + index + \".png\";\n    }), _constants.CAR_SCALE);\n    _this.agentLane = _lanes.LANES[AGENT_LANE];\n    _this.bicycleLane = _this.agentLane.oppositeLane;\n    _this.Texts = _texts.Texts.TreeFalls;\n    return _this;\n  }\n\n  _createClass(TreeFallsSituation, [{\n    key: \"setup\",\n    value: function setup() {\n      var _this2 = this;\n\n      this.tree.reset();\n      this.waterPuddle.reset();\n      return this.tree.fadeIn(250).then(function () {\n        return _this2.waterPuddle.fadeIn(250);\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      return Promise.all([this.moveAgentInPosition(), this.moveCyclistInPosition(), this.fellTree()]);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      this.tree.hide();\n      this.waterPuddle.hide();\n      this.cyclist.hide();\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return [_objectSpread({\n        sprite: this.view.agentCar.sprite,\n        color: _situation[\"default\"].HighlightAgentColor,\n        infopos: _infoPositions[\"default\"].TopLeft\n      }, this.Texts.AutonomousCar), _objectSpread({\n        sprite: this.cyclist.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].BottomLeft\n      }, this.Texts.Cyclist), _objectSpread({\n        sprite: this.tree.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        infopos: _infoPositions[\"default\"].BottomLeft.left()\n      }, this.Texts.FallenTree)];\n    }\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {\n      var _this3 = this;\n\n      return {\n        'humanist': {\n          text: this.Texts.Humanist,\n          actionFunction: function actionFunction() {\n            return _this3.softlyCrashTree();\n          }\n        },\n        'profit': {\n          text: this.Texts.Profit,\n          actionFunction: function actionFunction() {\n            return _this3.fullBreak();\n          }\n        },\n        'protector': {\n          text: this.Texts.Protector,\n          actionFunction: function actionFunction() {\n            return _this3.crashCyclist();\n          }\n        }\n      };\n    }\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {\n      return this.Texts.description;\n    }\n  }, {\n    key: \"moveCyclistInPosition\",\n    value: function moveCyclistInPosition() {\n      var _this4 = this;\n\n      this.cyclist.show();\n      this.cyclist.placeInLane(this.bicycleLane);\n      this.cyclist.sprite.play();\n      return this.cyclist.driveInLaneUntilPosition(CYCLIST_STOP_POSITION, SETUP_TIME).then(function () {\n        return _this4.cyclist.sprite.stop();\n      });\n    }\n  }, {\n    key: \"moveAgentInPosition\",\n    value: function moveAgentInPosition() {\n      this.view.agentCar.show();\n      this.view.agentCar.placeInLane(this.agentLane);\n      return this.view.agentCar.driveInLaneUntilPosition(AGENT_STOP_POSITION, SETUP_TIME);\n    }\n  }, {\n    key: \"fellTree\",\n    value: function fellTree() {\n      var _this5 = this;\n\n      return new Promise(function (resolve) {\n        new TWEEN.Tween(_this5.tree.sprite).to({\n          angle: 90,\n          x: _this5.tree.sprite.x + _constants.STREET_LANE_OFFSET * 1.5\n        }, SETUP_TIME - TREE_FALL_TIME).easing(TWEEN.Easing.Quadratic.In).delay(TREE_FALL_TIME).onComplete(function () {\n          return resolve('fell');\n        }).start();\n      });\n    }\n  }, {\n    key: \"crashCyclist\",\n    value: function crashCyclist() {\n      var _this6 = this;\n\n      var carMovement = new Promise(function (resolve) {\n        new TWEEN.Tween(_this6.view.agentCar).to({\n          x: _this6.view.agentCar.x + _constants.STREET_LANE_OFFSET * 2,\n          y: _this6.view.agentCar.y + _constants.STREET_LANE_OFFSET * 2,\n          angle: _this6.view.agentCar.angle - 45\n        }, CRASH_TIME).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          return resolve('crash');\n        }).start();\n      });\n      var bicycleMovement = this.cyclist.driveInLaneUntilPosition(0.5, CRASH_TIME);\n      return Promise.all([carMovement, bicycleMovement]);\n    }\n  }, {\n    key: \"fullBreak\",\n    value: function fullBreak() {\n      return this.view.agentCar.driveInLaneUntilPosition(7 / 16, CRASH_TIME);\n    }\n  }, {\n    key: \"softlyCrashTree\",\n    value: function softlyCrashTree() {\n      var _this7 = this;\n\n      return new Promise(function (resolve) {\n        new TWEEN.Tween(_this7.view.agentCar).to({\n          x: _this7.view.agentCar.x - _constants.STREET_LANE_OFFSET,\n          y: _this7.view.agentCar.y + _constants.STREET_LANE_OFFSET * 2,\n          angle: _this7.view.agentCar.angle + 70\n        }, CRASH_TIME).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          return resolve('crash');\n        }).start();\n      });\n    }\n  }]);\n\n  return TreeFallsSituation;\n}(_situation[\"default\"]);\n\nexports[\"default\"] = TreeFallsSituation;\n\n_situation[\"default\"].registerSituation('tree-falls', TreeFallsSituation);\n\n},{\"../car\":1,\"../constants\":2,\"../info-positions\":6,\"../lanes\":8,\"../pixi-help\":11,\"../scene-element\":14,\"../situation\":16,\"../texts\":22}],20:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tweenOpacity = tweenOpacity;\nexports.setLeftTopCSSFromCoord = setLeftTopCSSFromCoord;\n\n/* globals TWEEN, PIXI */\nfunction tweenOpacity(element, toOpacity) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  return new Promise(function (resolve) {\n    new TWEEN.Tween(element.style).to({\n      opacity: toOpacity\n    }, time).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n      return resolve('visible');\n    }).start();\n  });\n}\n\nfunction setLeftTopCSSFromCoord(element, coord) {\n  element.style.left = coord.x + 'px';\n  element.style.top = coord.y + 'px';\n}\n\n},{}],21:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Texts = void 0;\nvar Texts = {\n  ChooseSituation: 'Whle ein Szenario',\n  Show: 'Anzeigen',\n  Restart: 'Starte neu',\n  ChoosePolicy: 'Whle eine Leitlinie',\n  Next: 'Weiter',\n  Humanist: {\n    name: 'Humanistisch',\n    objective: 'Minimiere Schaden an Menschen'\n  },\n  Profit: {\n    name: 'Gewinnorientiert',\n    objective: 'Minimiere Versicherungskosten'\n  },\n  Protector: {\n    name: 'Schtzend',\n    objective: 'Schtze die Insassen'\n  },\n  CarEntersLane: {\n    name: 'Ein Auto fhrt auf Deine Fahrspur',\n    description: 'Ein Auto fhrt auf Deine Fahrspur, und es ist keine Zeit zum Bremsen. Das Auto kann entweder dagegen prallen, links ausweichen und gegen ein geparktes Auto prallen oder rechts ausweichen und auf eine Bushaltestelle voller Menschen fahren.',\n    AutonomousCar: {\n      name: 'Selbstfahrendes Fahrzeug',\n      description: 'Beim Erreichen einer Bushaltestelle fhrt ein anderes Auto vor Dir auf die Fahrspur.'\n    },\n    LuxuryCar: {\n      name: 'Luxusauto',\n      description: 'Ein sehr teures Auto fhrt pltzlich auf Deine Fahrspur.'\n    },\n    Truck: {\n      name: 'Geparktes Fahrzeug',\n      description: 'Ein alter Lastwagen in schlechtem Zustand mit vier Passagieren steht am Straenrand.'\n    },\n    BusStop: {\n      name: 'Bushaltestelle',\n      description: 'Die Bushaltestelle ist voller Leute, die auf ihren Bus warten.'\n    },\n    Humanist: 'Wenn Du nach links ausweichst, gefhrdest Du die Personen im geparkten Lastwagen. Wenn Du nach rechts ausweichst, gefhrdest Du wahrscheinlich noch mehr Personen an der Haltestelle. Lsung: Bremsen und ein Zusammensto mit dem entgegenkommenden Fahrzeug fhrt wahrscheinlich nicht zu Todesfllen.',\n    Profit: 'Das Auto, das Dir entgegenkommt, ist sehr teuer, und ein Zusammensto kann lange Rechtsstreitigkeiten fr Deine Versicherung zur Folge haben. Ein Unfall in der Bushaltestelle birgt das Risiko hoher Zahlungsforderungen der Opfer oder ihrer Familien. Lsung: Weiche nach links aus in Richtung des geparkten Fahrzeugs, da es billig ist und weniger Menschen gefhrdet werden.',\n    Protector: 'Ein Zusammensto mit einem der beiden Fahrzeuge kann mglicherweise Dich (das selbstfahrende Auto) und Deine Passagiere beschdigen. Lsung: Weiche nach rechts aus und fahre in die Bushaltestelle, da Leute weicher sind als Autos.'\n  },\n  ChildRuns: {\n    name: 'Ein Kind rennt auf die Strae',\n    description: 'Du erreichst eine Ampelkreuzung und hast grn. Ein Kind rennt pltzlich auf die Strae. Gleichzeitig fhrt ein Krankenwagen mit Blaulicht und Sirene hinter Dir her.',\n    AutonomousCar: {\n      name: 'Selbstfahrendes Fahrzeug',\n      description: 'Kurz bevor Du den Kreuzungsbereich erreichst, bemerkst Du pltzlich ein Kind vor Dir.'\n    },\n    Ambulance: {\n      name: 'Krankenwagen',\n      description: 'Er transportiert einen Patienten ins Krankenhaus.'\n    },\n    Child: {\n      name: 'Kind',\n      description: 'Es rennt pltzlich ohne Vorwarnung auf die Strae'\n    },\n    OtherCar: {\n      name: 'Entgegenkommendes Fahrzeug',\n      description: 'Es wird vermutlich nicht anhalten.'\n    },\n    Humanist: 'Pltzliches Bremsen htte einen Unfall mit dem Krankenwagen zur Folge, aber wenn Du weiterfhrst, wird das Kind verletzt. Lsung: Wechsle die Fahrspur und riskiere den Zusammensto mit dem entgegenkommenden Fahrzeug.',\n    Profit: 'Durch scharfes Bremsen oder Ausweichen nach links entstehen hohe Schden am Auto, und es besteht die Gefahr eines Rechtsstreits ber die Kosten. Das Kind rennt ohne Vorwarnung auf die Strae, obwohl die Fugngerampel rot ist. Bei einem Unfall ist deshalb kein Rechtsstreit zu erwarten. Lsung: Fahre weiter geradeaus, kein Bremsen, keine Richtungsnderung.',\n    Protector: 'Durch scharfes Bremsen oder Ausweichen nach links wird das Auto beschdigt und Insassen mglicherweise verletzt. Lsung: Fahre weiter geradeaus, kein Bremsen, keine Richtungsnderung. So wird das Auto nur geringfgig beschdigt, und es besteht kein Risiko fr die Insassen.'\n  },\n  TreeFalls: {\n    name: 'Ein Baum fllt auf die Strae',\n    description: 'Ein Baum fllt pltzlich vor Dir auf die Strae. Die Person auf dem Beifahrersitz hat keinen Sicherheitsgurt angelegt. Eine Person auf einem Fahrrad fhrt auf der Gegenfahrbahn. Optionen: Pltzliches Bremsen, langsamer fahren und nach rechts ausweichen, oder die Spur wechseln.',\n    AutonomousCar: {\n      name: 'Selbstfahrendes Fahrzeug',\n      description: 'Achtung! Die Person auf dem Beifahrersitz hat keinen Sicherheitsgurt angelegt.'\n    },\n    Cyclist: {\n      name: 'Person auf dem Fahrrad',\n      description: 'Normale Person, die Dir auf dem Fahrrad entgegenkommt.'\n    },\n    FallenTree: {\n      name: 'Umgestrzter Baum',\n      description: 'Ein Aufprall knnte tdlich enden.'\n    },\n    Humanist: 'Durch pltzliches Bremsen wrde die Person auf dem Beifahrersitz durch die Windschutzscheibe geschleudert und mglicherweise tdlich verletzt werden. Ein Fahrbahnwechsel htte sicherlich den Tod der Person auf dem Fahrrad zur Folge. Lsung: Bremse langsam ab, und weiche gleichzeitig nach rechts aus. So wird die Person auf dem Beifahrersitz gegen den Fahrersitz gedrckt, was nur geringfgige Verletzungen zur Folge htte.',\n    Profit: 'Ein Zusammenprall mit dem Baum htte starke Schden am Auto zur Folge, wofr die Versicherung haften muss. Ein Fahrbahnwechsel wrde die Person auf dem Fahrrad tten, was ebenfalls hohe Versicherungskosten zur Folge haben kann. Pltzliches Bremsen gefhrdet zwar das Leben der Person auf dem Beifahrersitz, aber da kein Sicherheitsgurt angelegt ist, muss Deine Versicherung nicht fr den Schaden bezahlen.',\n    Protector: 'Ein Zusammenprall mit dem Baum oder Ausweichen nach rechts wrde die Person auf dem Beifahrersitz gefhrden, da kein Sicherheitsgurt angelegt ist. Lsung: Langsamer werden und auf die Gegenfahrbahn wechseln, wodurch mglicherweise die Person auf dem Fahrrad gettet wird, aber alle Insassen geschtzt werden.'\n  }\n};\nexports.Texts = Texts;\n\n},{}],22:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _textsDe = require(\"./texts-de\");\n\nObject.keys(_textsDe).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _textsDe[key];\n    }\n  });\n});\n\n},{\"./texts-de\":21}],23:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _car = _interopRequireDefault(require(\"./car\"));\n\nvar _sceneElement = _interopRequireDefault(require(\"./scene-element\"));\n\nvar _lanes = require(\"./lanes\");\n\nvar _constants = require(\"./constants\");\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _report = _interopRequireDefault(require(\"./report\"));\n\nrequire(\"./info-boxes\");\n\nvar _situation = _interopRequireDefault(require(\"./situation\"));\n\nvar _situationRunner = _interopRequireDefault(require(\"./situation-runner\"));\n\nvar _menu = _interopRequireDefault(require(\"./menu.js\"));\n\nvar _texts = require(\"./texts\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar View =\n/*#__PURE__*/\nfunction () {\n  function View(element) {\n    var _this = this;\n\n    _classCallCheck(this, View);\n\n    this.app = new PIXI.Application({\n      width: _constants.ViewSize.width,\n      height: _constants.ViewSize.height,\n      backgroundColor: 0x000000,\n      resolution: window.devicePixelRatio || 1\n    });\n    element.appendChild(this.app.view);\n    this.container = new PIXI.Container();\n    this.container.sortableChildren = true;\n    this.app.stage.addChild(this.container);\n    this.container.x = this.app.screen.width / 2;\n    this.container.y = this.app.screen.height / 2;\n    this.background = new _sceneElement[\"default\"](this, 'assets/images/street.png', _pixiHelp.POINT_ZERO, 1);\n    this.agentCar = new _car[\"default\"](this, 'assets/images/car.png');\n    this.background.show();\n\n    this.afterIdleAction = function () {};\n\n    this.SituationMenu = new _menu[\"default\"]('menu', [{\n      text: _texts.Texts.TreeFalls.name,\n      action: function action() {\n        return _this.startSituation('tree-falls');\n      }\n    }, {\n      text: _texts.Texts.CarEntersLane.name,\n      action: function action() {\n        return _this.startSituation('car-enters-lane');\n      }\n    }, {\n      text: _texts.Texts.ChildRuns.name,\n      action: function action() {\n        return _this.startSituation('child-runs');\n      }\n    }], _texts.Texts.ChooseSituation, 'top_menu');\n    this.runner = new _situationRunner[\"default\"](this, new _report[\"default\"]($('#report')[0]));\n    this.app.ticker.add(function () {\n      return TWEEN.update();\n    });\n  }\n\n  _createClass(View, [{\n    key: \"spriteToScreenPos\",\n    value: function spriteToScreenPos(sprite) {\n      return {\n        x: sprite.x + this.app.screen.width / 2,\n        y: sprite.y + this.app.screen.height / 2\n      };\n    }\n  }, {\n    key: \"doIdleAnimation\",\n    value: function doIdleAnimation() {\n      var currentLane = _lanes.LANES[Math.floor(Math.random() * _lanes.LANES.length)];\n\n      this.agentCar.hide();\n      this.agentCar.show();\n      this.agentCar.placeInLane(currentLane, 0, true);\n      return this.agentCar.driveInLaneUntilPosition(1.0, _constants.IDLE_ANIMATION_TIME);\n    }\n  }, {\n    key: \"startIdleAnimation\",\n    value: function startIdleAnimation() {\n      var _this2 = this;\n\n      this.afterIdleAction = this.startIdleAnimation;\n      this.doIdleAnimation().then(function () {\n        return _this2.afterIdleAction();\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.SituationMenu.show();\n      this.startIdleAnimation();\n    }\n  }, {\n    key: \"startSituation\",\n    value: function startSituation(situationID) {\n      var _this3 = this;\n\n      this.SituationMenu.hide();\n      this.queueAction(function () {\n        var situationInstance = _situation[\"default\"].getSituation(situationID, _this3);\n\n        _this3.runner.run(situationInstance);\n      });\n    }\n  }, {\n    key: \"queueAction\",\n    value: function queueAction(action) {\n      this.afterIdleAction = action;\n    }\n  }]);\n\n  return View;\n}();\n\nexports[\"default\"] = View;\n\n},{\"./car\":1,\"./constants\":2,\"./info-boxes\":5,\"./lanes\":8,\"./menu.js\":10,\"./pixi-help\":11,\"./report\":13,\"./scene-element\":14,\"./situation\":16,\"./situation-runner\":15,\"./texts\":22}]},{},[9]);\n"]}