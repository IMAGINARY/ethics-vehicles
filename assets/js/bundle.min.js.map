{"version":3,"sources":["bundle.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","value","Sounds","Sound","instance","Constructor","TypeError","_classCallCheck","this","_len","arguments","mediaFiles","Array","_key","media","map","arg","Audio","protoProps","staticProps","index","Math","floor","random","getAudio","play","prototype","crash500ms","crash250ms","carIdling2000ms","freeze","2","_constants","_pixiHelp","_lane","Car","view","imageFile","lane","undefined","NO_LANE","sprite","createSprite","CAR_SCALE","zIndex","position","forceDirection","x","start","end","y","forceLaneDirection","angle","getDrivingAngle","_this","endPosition","time","easing","TWEEN","Easing","Linear","None","stopPosition","getPositionCoordinates","Promise","resolve","Tween","to","onComplete","offsetPosition","_this2","offsetAngle","placeInLane","oppositeLane","getCarPosition","container","addChild","removeChild","get","set","./constants","./lane","./pixi-help","3","SPRITE_WIDTH","STREET_LANE_OFFSET","BLOCK_SIZE","STREET_WIDTH","IDLE_ANIMATION_TIME","DEFAULT_SPEED","BorderBlockSize","StreetOffsetFromCenter","ViewSize","width","height","4","_styleHelp","InfoBoxes","htmlElement","infoElements","from","$","element","infoElement","querySelector","innerText","name","innerHTML","description","style","visibility","show","opacity","tweenOpacity","forEach","hide","./style-help","5","Lane","PIXI","Point","Lerp","k","vectorBetweenPoints","car","isVertical","POINT_ZERO","6","LANES","createHorizontalLane","verticalOffset","dirMultiplier","createVerticalLane","horizontalOffset","setOppositeLanes","laneA","laneB","7","obj","_view","__esModule","default","./situations/car-enters-lane","./situations/child-runs","./situations/tree-falls","./view","8","Menu","elementId","optionsArray","title","currentOption","visible","options","titleText","concat","optionsArea","find","cursor","createHTMLOptions","text","window","onkeydown","event","which","up","down","enterOption","updateCursorPosition","fadeInCursor","clearHTML","domCursor","then","button","append","click","action","empty","css","9","sourceImage","scale","anchor","texture","Texture","Sprite","highlightSprite","color","graphics","Graphics","beginFill","drawRoundedRect","endFill","b","v1","v2","atan2","PI","screenPosFromFraction","moveToFraction","pos","pixiFadeIn","toOpacity","alpha","Quadratic","Out","pixiMoveTo","dest","10","Policies","id","objective","11","Report","decisionElement","policyNameElement","policyObjectiveElement","situationDescriptionElement","situation","policy","decision","getDescription","12","SceneElement","initialPosition","13","_policies","_menu","SituationRunner","report","infoBoxes","currentDecision","tempElements","currentPolicy","policyMenu","agentCar","setup","wait","showElementsInfo","getElements","waitForPolicy","hideElementsInfo","showDecision","waitForAdvanceButton","hideDecision","playOutDecision","clearSprites","teardown","getDecision","on","elements","_this3","promise","highlight","fadeShow","_this4","removeTempElements","hideAll","actionFunction","addTempElement","push","_this5","./menu","./policies","14","Situation","sprites","aSituation","situations","aSprite","policyId","getDecisions","setTimeout","HighlightAgentColor","HighlightOthersColor","15","_sceneElement","_interopRequireDefault","_situation","_audio","_car","_lanes","_typeof","Symbol","iterator","constructor","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","BUS_STOP_X","BUS_STOP_Y","BlackCarCrossVector","BlackCarCrashVector","AgentCrashVector","TurnLeftVector","TurnRightVector","CarEntersLaneSituation","agentLane","parkedLane","blackCar","truck","busStop","subClass","superClass","create","_inherits","fadeIn","moveTruckInPosition","all","moveBlackCarInPosition","moveAgentInPosition","humanist","decisionAdvace","profit","decisionTurnLeft","protector","decisionTurnRight","advanceAndTurn","moveBlackCarToFinalPosition","addSprite","driveInLaneUntilPosition","Cubic","Sinusoidal","BLACK_CAR_CROSS_TIME","In","SETUP_TIME","registerSituation","../audio","../car","../constants","../lanes","../scene-element","../situation","16","childStartPos","childEndPos","ChildRunsSituation","child","crossingCar","ambulance","moveCrossingCarInPosition","moveAmbulanceInPosition","childRuns","decisionCrashCrossingCar","decisionAdvance","carMovement","crossingCarMovement","_this6","../pixi-help","17","TreeFallsSituation","waterPuddle","tree","cyclist","bicycleLane","reset","moveCyclistInPosition","fellTree","softlyCrashTree","fullBreak","crashCyclist","delay","bicycleMovement","18","19","_report","_infoBoxes","_situationRunner","View","app","Application","backgroundColor","resolution","devicePixelRatio","appendChild","Container","sortableChildren","stage","screen","background","debugLayer","afterIdleAction","SituationMenu","startSituation","runner","ticker","add","update","currentLane","startIdleAnimation","doIdleAnimation","situationID","queueAction","situationInstance","getSituation","run","./audio","./car","./info-boxes","./lanes","./menu.js","./report","./scene-element","./situation","./situation-runner"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sounds = exports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Sound =\n/*#__PURE__*/\nfunction () {\n  function Sound() {\n    _classCallCheck(this, Sound);\n\n    for (var _len = arguments.length, mediaFiles = new Array(_len), _key = 0; _key < _len; _key++) {\n      mediaFiles[_key] = arguments[_key];\n    }\n\n    this.media = mediaFiles.map(function (arg) {\n      return new Audio(arg);\n    });\n  }\n\n  _createClass(Sound, [{\n    key: \"getAudio\",\n    value: function getAudio() {\n      var index = Math.floor(Math.random() * Math.floor(this.media.length));\n      return this.media[index];\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.getAudio().play();\n    }\n  }]);\n\n  return Sound;\n}();\n\nexports[\"default\"] = Sound;\nvar Sounds = {\n  crash500ms: new Sound('assets/audio/crash_500ms.mp3'),\n  crash250ms: new Sound('assets/audio/crash_250ms.mp3'),\n  carIdling2000ms: new Sound('assets/audio/passing_by_1_2000ms.mp3', 'assets/audio/passing_by_2_2000ms.mp3', 'assets/audio/passing_by_3_2000ms.mp3')\n};\nexports.Sounds = Sounds;\nObject.freeze(Sounds);\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _constants = require(\"./constants\");\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _lane = require(\"./lane\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Car =\n/*#__PURE__*/\nfunction () {\n  function Car(view, imageFile) {\n    var lane = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _lane.NO_LANE;\n\n    _classCallCheck(this, Car);\n\n    this.view = view;\n    this.sprite = (0, _pixiHelp.createSprite)(imageFile, _constants.CAR_SCALE, 0.5);\n    this.sprite.zIndex = 100;\n    this.lane = lane;\n  }\n\n  _createClass(Car, [{\n    key: \"placeInLane\",\n    value: function placeInLane(lane) {\n      var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n      var forceDirection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      this.lane = lane;\n      this.x = lane.start.x + (lane.end.x - lane.start.x) * position;\n      this.y = lane.start.y + (lane.end.y - lane.start.y) * position;\n\n      if (forceDirection) {\n        this.forceLaneDirection();\n      }\n    }\n  }, {\n    key: \"forceLaneDirection\",\n    value: function forceLaneDirection() {\n      this.sprite.angle = this.lane.getDrivingAngle();\n    }\n  }, {\n    key: \"driveInLaneUntilPosition\",\n    value: function driveInLaneUntilPosition() {\n      var _this = this;\n\n      var endPosition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1.0;\n      var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;\n      var easing = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : TWEEN.Easing.Linear.None;\n      var stopPosition = this.lane.getPositionCoordinates(endPosition);\n      return new Promise(function (resolve) {\n        new TWEEN.Tween(_this.sprite).to({\n          x: stopPosition.x,\n          y: stopPosition.y\n        }, time).easing(easing).onComplete(function () {\n          return resolve('arrived');\n        }).start();\n      });\n    }\n  }, {\n    key: \"advanceAndTurn\",\n    value: function advanceAndTurn(offsetPosition) {\n      var _this2 = this;\n\n      var offsetAngle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n      var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : TWEEN.Easing.Linear.None;\n      return new Promise(function (resolve) {\n        new TWEEN.Tween(_this2).to({\n          x: _this2.x + offsetPosition.x,\n          y: _this2.y + offsetPosition.y,\n          angle: _this2.angle + offsetAngle\n        }, time).easing(easing).onComplete(function () {\n          return resolve('crash');\n        }).start();\n      });\n    }\n  }, {\n    key: \"crossLane\",\n    value: function crossLane() {\n      this.placeInLane(this.lane.oppositeLane, 1 - this.lane.getCarPosition(this), false);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.view.container.addChild(this.sprite);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.view.container.removeChild(this.sprite);\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.sprite.x;\n    },\n    set: function set(x) {\n      this.sprite.x = x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.sprite.y;\n    },\n    set: function set(y) {\n      this.sprite.y = y;\n    }\n  }, {\n    key: \"angle\",\n    get: function get() {\n      return this.sprite.angle;\n    },\n    set: function set(angle) {\n      this.sprite.angle = angle;\n    }\n  }]);\n\n  return Car;\n}();\n\nexports[\"default\"] = Car;\n\n},{\"./constants\":3,\"./lane\":5,\"./pixi-help\":9}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SPRITE_WIDTH = exports.STREET_LANE_OFFSET = exports.BLOCK_SIZE = exports.STREET_WIDTH = exports.IDLE_ANIMATION_TIME = exports.DEFAULT_SPEED = exports.BorderBlockSize = exports.StreetOffsetFromCenter = exports.ViewSize = exports.CAR_SCALE = void 0;\nvar CAR_SCALE = 0.25;\nexports.CAR_SCALE = CAR_SCALE;\nvar ViewSize = {\n  width: 1920,\n  height: 1080\n};\nexports.ViewSize = ViewSize;\nvar StreetOffsetFromCenter = {\n  x: 560,\n  y: 350\n};\nexports.StreetOffsetFromCenter = StreetOffsetFromCenter;\nvar BorderBlockSize = {\n  width: 320,\n  height: 110\n};\nexports.BorderBlockSize = BorderBlockSize;\nvar DEFAULT_SPEED = 15;\nexports.DEFAULT_SPEED = DEFAULT_SPEED;\nvar IDLE_ANIMATION_TIME = 2000;\nexports.IDLE_ANIMATION_TIME = IDLE_ANIMATION_TIME;\nvar STREET_WIDTH = 160;\nexports.STREET_WIDTH = STREET_WIDTH;\nvar BLOCK_SIZE = 512;\nexports.BLOCK_SIZE = BLOCK_SIZE;\nvar STREET_LANE_OFFSET = STREET_WIDTH / 4;\nexports.STREET_LANE_OFFSET = STREET_LANE_OFFSET;\nvar SPRITE_WIDTH = 256 * CAR_SCALE;\nexports.SPRITE_WIDTH = SPRITE_WIDTH;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _styleHelp = require(\"./style-help\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar INFO_BOX_OPACITY = 0.75;\n\nvar InfoBoxes =\n/*#__PURE__*/\nfunction () {\n  function InfoBoxes(htmlElement) {\n    _classCallCheck(this, InfoBoxes);\n\n    this.htmlElement = htmlElement;\n    this.infoElements = Array.from($('.info_element'));\n  }\n\n  _createClass(InfoBoxes, [{\n    key: \"show\",\n    value: function show(index, element) {\n      var infoElement = this.infoElements[index];\n      infoElement.querySelector('#name').innerText = element.name;\n      infoElement.querySelector('#description').innerHTML = element.description;\n      infoElement.style.visibility = 'visible';\n    }\n  }, {\n    key: \"fadeShow\",\n    value: function fadeShow(index, element, time) {\n      this.show(index, element);\n      var infoElement = this.infoElements[index];\n      infoElement.style.opacity = 0;\n      return (0, _styleHelp.tweenOpacity)(infoElement, INFO_BOX_OPACITY, time);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide(index) {\n      this.infoElements[index].style.visibility = 'hidden';\n    }\n  }, {\n    key: \"hideAll\",\n    value: function hideAll() {\n      var _this = this;\n\n      this.infoElements.forEach(function (element, index) {\n        return _this.hide(index);\n      });\n    }\n  }]);\n\n  return InfoBoxes;\n}();\n\nexports[\"default\"] = InfoBoxes;\n\n},{\"./style-help\":18}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NO_LANE = exports.Lane = void 0;\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nPIXI.Point.Lerp = function (start, end, k) {\n  return new PIXI.Point(start.x + k * (end.x - start.x), start.y + k * (end.y - start.y));\n};\n\nvar Lane =\n/*#__PURE__*/\nfunction () {\n  function Lane(start, end) {\n    _classCallCheck(this, Lane);\n\n    this.start = start;\n    this.end = end;\n    this.oppositeLane = null;\n  }\n\n  _createClass(Lane, [{\n    key: \"isVertical\",\n    value: function isVertical() {\n      return this.start.x == this.end.x;\n    }\n  }, {\n    key: \"isHorizontal\",\n    value: function isHorizontal() {\n      return this.start.y == this.end.y;\n    }\n  }, {\n    key: \"getDrivingAngle\",\n    value: function getDrivingAngle() {\n      return (0, _pixiHelp.vectorBetweenPoints)(this.start, this.end);\n    }\n  }, {\n    key: \"getPositionCoordinates\",\n    value: function getPositionCoordinates(position) {\n      return PIXI.Point.Lerp(this.start, this.end, position);\n    }\n  }, {\n    key: \"getCarPosition\",\n    value: function getCarPosition(car) {\n      if (this.isVertical()) {\n        return (car.y - this.start.y) / (this.end.y - this.start.y);\n      }\n\n      return (car.x - this.start.x) / (this.end.x - this.start.x);\n    }\n  }]);\n\n  return Lane;\n}();\n\nexports.Lane = Lane;\nvar NO_LANE = new Lane(_pixiHelp.POINT_ZERO, new PIXI.Point(1, 0));\nexports.NO_LANE = NO_LANE;\n\n},{\"./pixi-help\":9}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LANES = void 0;\n\nvar _lane = require(\"./lane\");\n\nvar _constants = require(\"./constants\");\n\n/* globals PIXI */\nfunction createHorizontalLane(verticalOffset, dirMultiplier) {\n  return new _lane.Lane(new PIXI.Point(_constants.ViewSize.width / 2 * dirMultiplier, -verticalOffset), new PIXI.Point(-(_constants.ViewSize.width / 2) * dirMultiplier, -verticalOffset));\n}\n\nfunction createVerticalLane(horizontalOffset, dirMultiplier) {\n  return new _lane.Lane(new PIXI.Point(-horizontalOffset, _constants.ViewSize.height / 2 * dirMultiplier), new PIXI.Point(-horizontalOffset, -(_constants.ViewSize.height / 2) * dirMultiplier));\n} // eslint-disable-next-line import/prefer-default-export\n\n\nvar LANES = [createVerticalLane(_constants.StreetOffsetFromCenter.x - _constants.STREET_LANE_OFFSET, 1), createVerticalLane(_constants.StreetOffsetFromCenter.x + _constants.STREET_LANE_OFFSET, -1), createVerticalLane(-_constants.StreetOffsetFromCenter.x - _constants.STREET_LANE_OFFSET, 1), createVerticalLane(-_constants.StreetOffsetFromCenter.x + _constants.STREET_LANE_OFFSET, -1), createHorizontalLane(_constants.StreetOffsetFromCenter.y + _constants.STREET_LANE_OFFSET, 1), createHorizontalLane(_constants.StreetOffsetFromCenter.y - _constants.STREET_LANE_OFFSET, -1), createHorizontalLane(-_constants.StreetOffsetFromCenter.y + _constants.STREET_LANE_OFFSET, 1), createHorizontalLane(-_constants.StreetOffsetFromCenter.y - _constants.STREET_LANE_OFFSET, -1)];\nexports.LANES = LANES;\n\nfunction setOppositeLanes(laneA, laneB) {\n  // eslint-disable-next-line no-param-reassign\n  laneA.oppositeLane = laneB; // eslint-disable-next-line no-param-reassign\n\n  laneB.oppositeLane = laneA;\n}\n\nsetOppositeLanes(LANES[0], LANES[1]);\nsetOppositeLanes(LANES[2], LANES[3]);\nsetOppositeLanes(LANES[4], LANES[5]);\nsetOppositeLanes(LANES[6], LANES[7]);\n\n},{\"./constants\":3,\"./lane\":5}],7:[function(require,module,exports){\n\"use strict\";\n\nvar _view = _interopRequireDefault(require(\"./view\"));\n\nrequire(\"./situations/car-enters-lane\");\n\nrequire(\"./situations/tree-falls\");\n\nrequire(\"./situations/child-runs\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/* globals $ */\nvar view = new _view[\"default\"]($('#game')[0]);\n/*\r\n$('#debugButton').on('click', () => {\r\n  if (view.debugLayer.visible)\r\n    view.debugLayer.hide();\r\n  else\r\n    view.debugLayer.show();\r\n});\r\n*/\n\nview.start();\n\n},{\"./situations/car-enters-lane\":15,\"./situations/child-runs\":16,\"./situations/tree-falls\":17,\"./view\":19}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _styleHelp = require(\"./style-help\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar KeyArrowUp = 38;\nvar KeyArrowDown = 40;\nvar KeyEnter = 13; // example use\n\nvar Menu =\n/*#__PURE__*/\nfunction () {\n  function Menu(elementId, optionsArray, title) {\n    _classCallCheck(this, Menu);\n\n    this.currentOption = 0;\n    this.visible = false;\n    this.options = Array.from(optionsArray);\n    this.titleText = title;\n    this.htmlElement = $(\"#\".concat(elementId));\n    this.optionsArea = this.htmlElement.find('#menu_options_area');\n    this.cursor = this.htmlElement.find('#menu_cursor');\n    this.title = this.htmlElement.find('#menu_title');\n  }\n\n  _createClass(Menu, [{\n    key: \"show\",\n    value: function show() {\n      var _this = this;\n\n      this.createHTMLOptions();\n      this.currentOption = 0;\n      this.title.text(this.titleText);\n\n      window.onkeydown = function (event) {\n        switch (event.which) {\n          case KeyArrowUp:\n            _this.up();\n\n            break;\n\n          case KeyArrowDown:\n            _this.down();\n\n            break;\n\n          case KeyEnter:\n            _this.enterOption();\n\n            break;\n        }\n      };\n\n      this.updateCursorPosition();\n      this.htmlElement.show();\n      this.fadeInCursor();\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.htmlElement.hide();\n\n      window.onkeydown = function () {};\n\n      this.clearHTML();\n    }\n  }, {\n    key: \"fadeInCursor\",\n    value: function fadeInCursor() {\n      var domCursor = this.cursor[0];\n      domCursor.style.opacity = 0;\n      return (0, _styleHelp.tweenOpacity)(domCursor, 1, 500).then(function () {\n        return (0, _styleHelp.tweenOpacity)(domCursor, 0.125, 500);\n      }).then(function () {\n        return (0, _styleHelp.tweenOpacity)(domCursor, 1, 500);\n      });\n    }\n  }, {\n    key: \"createHTMLOptions\",\n    value: function createHTMLOptions() {\n      this.options.forEach(function (element) {\n        var button = $(\"<input type=\\\"button\\\" value=\\\"\".concat(element.text, \"\\\" class=\\\"menu_option\\\">\"));\n        $('#menu_options_area').append(button);\n        button.click(element.action);\n      });\n    }\n  }, {\n    key: \"clearHTML\",\n    value: function clearHTML() {\n      this.optionsArea.empty();\n    }\n  }, {\n    key: \"enterOption\",\n    value: function enterOption() {\n      var action = this.options[this.currentOption].action;\n      this.hide();\n      action();\n    }\n  }, {\n    key: \"down\",\n    value: function down() {\n      if (this.currentOption < this.options.length - 1) this.currentOption++;\n      this.updateCursorPosition();\n    }\n  }, {\n    key: \"up\",\n    value: function up() {\n      if (this.currentOption > 0) this.currentOption--;\n      this.updateCursorPosition();\n    }\n  }, {\n    key: \"updateCursorPosition\",\n    value: function updateCursorPosition() {\n      this.cursor.css('margin-top', 15 + this.currentOption * 75 + \"px\");\n    }\n  }]);\n\n  return Menu;\n}();\n\nexports[\"default\"] = Menu;\n\n},{\"./style-help\":18}],9:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSprite = createSprite;\nexports.highlightSprite = highlightSprite;\nexports.vectorBetweenPoints = vectorBetweenPoints;\nexports.screenPosFromFraction = screenPosFromFraction;\nexports.moveToFraction = moveToFraction;\nexports.pixiFadeIn = pixiFadeIn;\nexports.pixiMoveTo = pixiMoveTo;\nexports.POINT_ZERO = void 0;\n\nvar _constants = require(\"./constants\");\n\n/* global PIXI */\nfunction createSprite(sourceImage, scale) {\n  var anchor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n  var texture = PIXI.Texture.from(sourceImage);\n  var sprite = new PIXI.Sprite(texture);\n  sprite.scale.x = scale;\n  sprite.scale.y = scale;\n  sprite.anchor.set(anchor);\n  return sprite;\n}\n\nfunction highlightSprite(sprite, color) {\n  var graphics = new PIXI.Graphics();\n  graphics.beginFill(color, 0.5);\n  graphics.drawRoundedRect(sprite.x - sprite.width / 2 - 10, sprite.y - sprite.height / 2 - 10, sprite.width + 20, sprite.height + 20, 10);\n  graphics.endFill();\n  return graphics;\n}\n\nfunction vectorBetweenPoints(a, b) {\n  var v1 = new PIXI.Point(0, -1);\n  var v2 = new PIXI.Point(b.x - a.x, b.y - a.y);\n  var radians = Math.atan2(v2.y, v2.x) - Math.atan2(v1.y, v1.x);\n  return radians * 180 / Math.PI;\n}\n/**\r\n * \r\n * @param {fraction [0,1] of the screen, horizontally, starting from left} x \r\n * @param {fraction [0,1] of the screen, vertically, starting from top} y \r\n */\n\n\nfunction screenPosFromFraction(x, y) {\n  return new PIXI.Point((x - 0.5) * _constants.ViewSize.width, (y - 0.5) * _constants.ViewSize.height);\n}\n\nfunction moveToFraction(sprite, x, y) {\n  var pos = screenPosFromFraction(x, y);\n  sprite.x = pos.x;\n  sprite.y = pos.y;\n}\n\nfunction pixiFadeIn(element, toOpacity) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  return new Promise(function (resolve) {\n    new TWEEN.Tween(element).to({\n      alpha: toOpacity\n    }, time).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n      return resolve('visible');\n    }).start();\n  });\n}\n\nfunction pixiMoveTo(element, dest) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  return new Promise(function (resolve) {\n    new TWEEN.Tween(element).to({\n      x: dest.x,\n      y: dest.y\n    }, time).easing(TWEEN.Easing.Linear.None).onComplete(function () {\n      return resolve('moved');\n    }).start();\n  });\n}\n\nvar POINT_ZERO = new PIXI.Point(0, 0);\nexports.POINT_ZERO = POINT_ZERO;\n\n},{\"./constants\":3}],10:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Policies = void 0;\n// eslint-disable-next-line import/prefer-default-export\nvar Policies = [{\n  id: 'humanist',\n  name: 'Humanist',\n  objective: 'Minimize human injuries'\n}, {\n  id: 'profit',\n  name: 'Profit-based',\n  objective: 'Minimize insurance costs'\n}, {\n  id: 'protector',\n  name: 'Protector',\n  objective: 'Protect car passengers'\n}];\nexports.Policies = Policies;\n\n},{}],11:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Report =\n/*#__PURE__*/\nfunction () {\n  function Report(htmlElement) {\n    _classCallCheck(this, Report);\n\n    this.htmlElement = htmlElement;\n    this.decisionElement = this.htmlElement.querySelector('#decision');\n    this.policyNameElement = this.htmlElement.querySelector('#policy_name');\n    this.policyObjectiveElement = this.htmlElement.querySelector('#policy_objective');\n    this.situationDescriptionElement = this.htmlElement.querySelector('#situation_description');\n  }\n\n  _createClass(Report, [{\n    key: \"show\",\n    value: function show(situation, policy, decision) {\n      this.decisionElement.innerHTML = decision;\n      this.policyNameElement.innerHTML = policy.name;\n      this.policyObjectiveElement.innerHTML = policy.objective;\n      this.situationDescriptionElement.innerHTML = situation.getDescription();\n      this.htmlElement.style.visibility = 'visible';\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.htmlElement.style.visibility = 'hidden';\n    }\n  }]);\n\n  return Report;\n}();\n\nexports[\"default\"] = Report;\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SceneElement =\n/*#__PURE__*/\nfunction () {\n  function SceneElement(view, imageFile) {\n    var position = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _pixiHelp.POINT_ZERO;\n    var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _constants.CAR_SCALE;\n\n    _classCallCheck(this, SceneElement);\n\n    this.view = view;\n    this.sprite = (0, _pixiHelp.createSprite)(imageFile, scale);\n    this.sprite.x = position.x;\n    this.sprite.y = position.y;\n    this.initialPosition = position;\n    this.visible = false;\n  }\n\n  _createClass(SceneElement, [{\n    key: \"fadeIn\",\n    value: function fadeIn(time) {\n      this.show();\n      this.sprite.alpha = 0;\n      return (0, _pixiHelp.pixiFadeIn)(this.sprite, 1, time);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this.view.container.addChild(_this.sprite);\n\n        _this.visible = true;\n        resolve();\n      });\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        _this2.view.container.removeChild(_this2.sprite);\n\n        _this2.visible = false;\n        resolve();\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.sprite.x = this.initialPosition.x;\n      this.sprite.y = this.initialPosition.y;\n      this.sprite.angle = 0;\n    }\n  }]);\n\n  return SceneElement;\n}();\n\nexports[\"default\"] = SceneElement;\n\n},{\"./constants\":3,\"./pixi-help\":9}],13:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _policies = require(\"./policies\");\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _menu = _interopRequireDefault(require(\"./menu\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SituationRunner =\n/*#__PURE__*/\nfunction () {\n  function SituationRunner(view, report, infoBoxes) {\n    _classCallCheck(this, SituationRunner);\n\n    this.view = view;\n    this.report = report;\n    this.infoBoxes = infoBoxes;\n    this.currentDecision = null;\n    this.tempElements = [];\n    this.currentPolicy = null;\n    this.policyMenu = null;\n  }\n\n  _createClass(SituationRunner, [{\n    key: \"run\",\n    value: function run(situation) {\n      var _this = this;\n\n      this.view.agentCar.hide();\n      situation.setup().then(function () {\n        return situation.start();\n      }).then(function () {\n        return situation.wait(1000);\n      }).then(function () {\n        return _this.showElementsInfo(situation.getElements());\n      }).then(function () {\n        return _this.waitForPolicy(situation);\n      }).then(function () {\n        return _this.hideElementsInfo();\n      }).then(function () {\n        return _this.showDecision(situation);\n      }).then(function () {\n        return situation.wait(1000);\n      }).then(function () {\n        return _this.waitForAdvanceButton('Show');\n      }).then(function () {\n        return _this.hideDecision();\n      }).then(function () {\n        return _this.playOutDecision();\n      }).then(function () {\n        return situation.wait(1000);\n      }).then(function () {\n        return _this.waitForAdvanceButton('Restart');\n      }).then(function () {\n        return situation.clearSprites();\n      }).then(function () {\n        return situation.teardown();\n      }).then(function () {\n        return _this.view.start();\n      });\n    }\n  }, {\n    key: \"waitForPolicy\",\n    value: function waitForPolicy(situation) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        var options = _policies.Policies.map(function (policy) {\n          return {\n            text: policy.name + \": \" + policy.objective,\n            action: function action() {\n              _this2.currentPolicy = policy;\n              _this2.currentDecision = situation.getDecision(policy.id);\n\n              _this2.policyMenu.hide();\n\n              resolve(policy.name);\n            }\n          };\n        });\n\n        _this2.policyMenu = new _menu[\"default\"]('menu', options, 'Choose a policy');\n\n        _this2.policyMenu.show();\n      });\n    }\n  }, {\n    key: \"waitForAdvanceButton\",\n    value: function waitForAdvanceButton() {\n      var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Next';\n      return new Promise(function (resolve) {\n        $('#advanceText').text(text);\n        var button = $('#advanceButton');\n        button.show();\n        button.on('click', function () {\n          button.hide();\n          resolve('clicked');\n        });\n      });\n    }\n  }, {\n    key: \"waitForKeyPress\",\n    value: function waitForKeyPress() {\n      return new Promise(function (resolve) {\n        window.onkeydown = function () {\n          window.onkeydown = function () {};\n\n          resolve('keydown');\n        };\n      });\n    }\n  }, {\n    key: \"showElementsInfo\",\n    value: function showElementsInfo(elements) {\n      var _this3 = this;\n\n      var promise = new Promise(function (r) {\n        return r('start fades');\n      });\n      elements.forEach(function (element, index) {\n        promise = promise.then(function (r) {\n          _this3.highlight(element.sprite, element.color);\n\n          return _this3.infoBoxes.fadeShow(index, element, 1000);\n        });\n      });\n      return promise;\n    }\n  }, {\n    key: \"hideElementsInfo\",\n    value: function hideElementsInfo() {\n      var _this4 = this;\n\n      return new Promise(function (resolve) {\n        _this4.removeTempElements();\n\n        _this4.infoBoxes.hideAll();\n\n        resolve('clean');\n      });\n    }\n  }, {\n    key: \"showDecision\",\n    value: function showDecision(situation) {\n      return this.report.show(situation, this.currentPolicy, this.currentDecision.text);\n    }\n  }, {\n    key: \"hideDecision\",\n    value: function hideDecision() {\n      return this.report.hide();\n    }\n  }, {\n    key: \"playOutDecision\",\n    value: function playOutDecision() {\n      return this.currentDecision.actionFunction();\n    }\n  }, {\n    key: \"highlight\",\n    value: function highlight(sprite, color) {\n      this.addTempElement((0, _pixiHelp.highlightSprite)(sprite, color));\n    }\n  }, {\n    key: \"addTempElement\",\n    value: function addTempElement(element) {\n      this.tempElements.push(element);\n      this.view.container.addChild(element);\n    }\n  }, {\n    key: \"removeTempElements\",\n    value: function removeTempElements() {\n      var _this5 = this;\n\n      this.tempElements.forEach(function (element) {\n        _this5.view.container.removeChild(element);\n      });\n      this.tempElements = [];\n    }\n  }]);\n\n  return SituationRunner;\n}();\n\nexports[\"default\"] = SituationRunner;\n\n},{\"./menu\":8,\"./pixi-help\":9,\"./policies\":10}],14:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/* eslint-disable class-methods-use-this */\nvar Situation =\n/*#__PURE__*/\nfunction () {\n  function Situation(view) {\n    _classCallCheck(this, Situation);\n\n    this.view = view;\n    this.sprites = [];\n  }\n\n  _createClass(Situation, [{\n    key: \"addSprite\",\n    value: function addSprite(sprite) {\n      this.sprites.push(sprite);\n      this.view.container.addChild(sprite);\n    }\n  }, {\n    key: \"clearSprites\",\n    value: function clearSprites() {\n      var _this = this;\n\n      this.sprites.forEach(function (aSprite) {\n        _this.view.container.removeChild(aSprite);\n      });\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {}\n  }, {\n    key: \"start\",\n    value: function start() {}\n  }, {\n    key: \"teardown\",\n    value: function teardown() {}\n  }, {\n    key: \"getElements\",\n    value: function getElements() {}\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {}\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {}\n  }, {\n    key: \"getDecision\",\n    value: function getDecision(policyId) {\n      return this.getDecisions()[policyId];\n    }\n  }, {\n    key: \"wait\",\n    value: function wait() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1000;\n      return new Promise(function (resolve) {\n        return setTimeout(resolve, time);\n      });\n    }\n  }], [{\n    key: \"registerSituation\",\n    value: function registerSituation(key, aSituation) {\n      Situation.situations[key] = aSituation;\n    }\n  }, {\n    key: \"getSituation\",\n    value: function getSituation(key, view) {\n      var situationClass = Situation.situations[key];\n      return new situationClass(view);\n    }\n  }]);\n\n  return Situation;\n}();\n\nexports[\"default\"] = Situation;\nSituation.situations = {};\nSituation.HighlightAgentColor = 0xFFF200;\nSituation.HighlightOthersColor = 0xFF8000;\n\n},{}],15:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _constants = require(\"../constants\");\n\nvar _sceneElement = _interopRequireDefault(require(\"../scene-element\"));\n\nvar _situation = _interopRequireDefault(require(\"../situation\"));\n\nvar _audio = require(\"../audio\");\n\nvar _car = _interopRequireDefault(require(\"../car\"));\n\nvar _lanes = require(\"../lanes\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar BUS_STOP_X = _constants.ViewSize.width / 2 - _constants.BorderBlockSize.width + _constants.SPRITE_WIDTH / 2;\nvar BUS_STOP_Y = -0.06 * _constants.ViewSize.height;\nvar TRUCK_STOP_POSITION = 0.45;\nvar BLACK_CAR_STOP_POSITION = 0.35;\nvar AGENT_STOP_POSITION = 0.45;\nvar BlackCarCrossVector = new PIXI.Point(_constants.STREET_LANE_OFFSET, _constants.STREET_LANE_OFFSET);\nvar BlackCarCrashVector = new PIXI.Point(0, 40);\nvar AgentCrashVector = new PIXI.Point(0, -40);\nvar TurnLeftVector = new PIXI.Point(-_constants.STREET_LANE_OFFSET * 1.5, -_constants.STREET_LANE_OFFSET * 1.5);\nvar TurnRightVector = new PIXI.Point(_constants.STREET_LANE_OFFSET * 1.5, -_constants.STREET_LANE_OFFSET * 1.5);\n/*\r\nTimeline:\r\n0 - 1000: truck enters and parks\r\n1000 - 1500: black car enters and stops behind truck\r\n1500 - 2500: agent enters and reaches position\r\n2250 - 2500: black car crosses lane\r\n*/\n\nvar SETUP_TIME = 1500;\nvar ENTER_TRUCK_TIME = 1000;\nvar AGENT_ENTER_DELAY = 700;\nvar BLACK_CAR_ENTRY_TIME = 500;\nvar BLACK_CAR_PARKED_DELAY = 500;\nvar BLACK_CAR_CROSS_TIME = 500;\n\nvar CarEntersLaneSituation =\n/*#__PURE__*/\nfunction (_Situation) {\n  _inherits(CarEntersLaneSituation, _Situation);\n\n  function CarEntersLaneSituation(view) {\n    var _this;\n\n    _classCallCheck(this, CarEntersLaneSituation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CarEntersLaneSituation).call(this, view));\n    _this.agentLane = _lanes.LANES[2];\n    _this.parkedLane = _this.agentLane.oppositeLane;\n    _this.blackCar = new _car[\"default\"](view, 'assets/images/car_black.png');\n    _this.truck = new _car[\"default\"](view, 'assets/images/small_truck.png');\n    _this.busStop = new _sceneElement[\"default\"](view, 'assets/images/bus_stop.png', new PIXI.Point(BUS_STOP_X, BUS_STOP_Y));\n    return _this;\n  }\n\n  _createClass(CarEntersLaneSituation, [{\n    key: \"setup\",\n    value: function setup() {\n      return this.busStop.fadeIn(500);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      this.busStop.hide();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      this.view.agentCar.hide();\n      return this.moveTruckInPosition().then(function () {\n        return Promise.all([_this2.moveBlackCarInPosition(), _this2.moveAgentInPosition()]);\n      });\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return [{\n        sprite: this.view.agentCar.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'Autonomous car',\n        description: 'While reaching a bus stop, a car enters its lane in front of it'\n      }, {\n        sprite: this.blackCar.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'Luxury car',\n        description: 'A very expensive car suddenly enters your lane.'\n      }, {\n        sprite: this.truck.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'Parked car',\n        description: 'An old truck in bad shape, with four passengers'\n      }, {\n        sprite: this.busStop.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'Bus Stop',\n        description: 'Full of people waiting for their bus'\n      }];\n    }\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {\n      var _this3 = this;\n\n      return {\n        'humanist': {\n          text: 'Turning left will risk the people in the track. Turning right with probably risk even more people at the stop. Solution: breaking and crashing into the car in front will probably not result in fatalities.',\n          actionFunction: function actionFunction() {\n            return _this3.decisionAdvace();\n          }\n        },\n        'profit': {\n          text: 'The car facing you is very expensive, and crashing into it might mean long legal battles for your insurance. Crashing into the bus stop will risk high payouts to the victims in or their families. Solution: turn left towards the parked car, as it is cheap and if the risk of casualties is lower.',\n          actionFunction: function actionFunction() {\n            return _this3.decisionTurnLeft();\n          }\n        },\n        'protector': {\n          text: 'Crashing into either car will potentially damage the autonomous car and harm its passengers. Solution: turn right and crash into the bus stop, as people are softer than cars.',\n          actionFunction: function actionFunction() {\n            return _this3.decisionTurnRight();\n          }\n        }\n      };\n    }\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {\n      return 'A car enters your lane and there is no time to break. The car can either crash against it, turn left and crash against a parked car, or turn right and drive over a bus stop full of people';\n    } // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: \"decisionAdvace\",\n    value: function decisionAdvace() {\n      _audio.Sounds.crash250ms.play();\n\n      return Promise.all([this.blackCar.advanceAndTurn(BlackCarCrashVector, 0, 150), this.view.agentCar.advanceAndTurn(AgentCrashVector, 0, 150)]);\n    }\n  }, {\n    key: \"decisionTurnLeft\",\n    value: function decisionTurnLeft() {\n      _audio.Sounds.crash250ms.play();\n\n      return Promise.all([this.moveBlackCarToFinalPosition(), this.view.agentCar.advanceAndTurn(TurnLeftVector, -30, 250)]);\n    }\n  }, {\n    key: \"decisionTurnRight\",\n    value: function decisionTurnRight() {\n      _audio.Sounds.crash500ms.play();\n\n      return Promise.all([this.moveBlackCarToFinalPosition(), this.view.agentCar.advanceAndTurn(TurnRightVector, 30, 250)]);\n    }\n  }, {\n    key: \"moveTruckInPosition\",\n    value: function moveTruckInPosition() {\n      this.addSprite(this.truck.sprite);\n      this.truck.placeInLane(this.parkedLane);\n      return this.truck.driveInLaneUntilPosition(TRUCK_STOP_POSITION, ENTER_TRUCK_TIME, TWEEN.Easing.Cubic.Out);\n    }\n  }, {\n    key: \"moveBlackCarInPosition\",\n    value: function moveBlackCarInPosition() {\n      var _this4 = this;\n\n      this.addSprite(this.blackCar.sprite);\n      this.blackCar.placeInLane(this.parkedLane);\n      return this.blackCar.driveInLaneUntilPosition(BLACK_CAR_STOP_POSITION, BLACK_CAR_ENTRY_TIME, TWEEN.Easing.Sinusoidal.Out).then(function () {\n        return _this4.wait(BLACK_CAR_PARKED_DELAY);\n      }).then(function () {\n        return _this4.blackCar.advanceAndTurn(BlackCarCrossVector, -45, BLACK_CAR_CROSS_TIME / 2, TWEEN.Easing.Quadratic.In);\n      }).then(function () {\n        return _this4.blackCar.advanceAndTurn(BlackCarCrossVector, 45, BLACK_CAR_CROSS_TIME / 2, TWEEN.Easing.Quadratic.Out);\n      });\n    }\n  }, {\n    key: \"moveBlackCarToFinalPosition\",\n    value: function moveBlackCarToFinalPosition() {\n      return this.blackCar.advanceAndTurn(new PIXI.Point(0, _constants.STREET_LANE_OFFSET * 2), 0, 250, TWEEN.Easing.Linear.None);\n    }\n  }, {\n    key: \"moveAgentInPosition\",\n    value: function moveAgentInPosition() {\n      var _this5 = this;\n\n      return this.wait(AGENT_ENTER_DELAY).then(function () {\n        _this5.view.agentCar.show();\n\n        _this5.view.agentCar.placeInLane(_this5.agentLane);\n\n        _this5.view.agentCar.driveInLaneUntilPosition(AGENT_STOP_POSITION, SETUP_TIME - AGENT_ENTER_DELAY);\n      });\n    }\n  }]);\n\n  return CarEntersLaneSituation;\n}(_situation[\"default\"]);\n\nexports[\"default\"] = CarEntersLaneSituation;\n\n_situation[\"default\"].registerSituation('car-enters-lane', CarEntersLaneSituation);\n\n},{\"../audio\":1,\"../car\":2,\"../constants\":3,\"../lanes\":6,\"../scene-element\":12,\"../situation\":14}],16:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _sceneElement = _interopRequireDefault(require(\"../scene-element\"));\n\nvar _car = _interopRequireDefault(require(\"../car\"));\n\nvar _situation = _interopRequireDefault(require(\"../situation\"));\n\nvar _lanes = require(\"../lanes\");\n\nvar _pixiHelp = require(\"../pixi-help\");\n\nvar _constants = require(\"../constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar AGENT_LANE = 4;\nvar CROSSING_CAR_POSITION = 1 / 4;\nvar AGENT_CAR_POSITION = 1 / 2 + 1 / 8;\nvar AMBULANCE_POSITION = 1 / 2 + 1 / 16;\nvar childStartPos = (0, _pixiHelp.screenPosFromFraction)(1 / 4 + 1 / 32, 1 / 16);\nvar childEndPos = (0, _pixiHelp.screenPosFromFraction)(9 / 32, 1 / 8);\nvar SETUP_TIME = 1500;\nvar CROSSING_CAR_DELAY = 1000;\nvar AMBULANCE_DELAY = 400;\nvar CHILD_DELAY = 1000;\nvar CRASH_TIME = 250;\n\nvar ChildRunsSituation =\n/*#__PURE__*/\nfunction (_Situation) {\n  _inherits(ChildRunsSituation, _Situation);\n\n  function ChildRunsSituation(view) {\n    var _this;\n\n    _classCallCheck(this, ChildRunsSituation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChildRunsSituation).call(this, view));\n    _this.agentLane = _lanes.LANES[AGENT_LANE];\n    _this.oppositeLane = _this.agentLane.oppositeLane;\n    _this.child = new _sceneElement[\"default\"](_this.view, 'assets/images/child.png', childStartPos);\n    _this.crossingCar = new _car[\"default\"](_this.view, 'assets/images/blue_car.png');\n    _this.ambulance = new _car[\"default\"](_this.view, 'assets/images/ambulance.png');\n    return _this;\n  }\n\n  _createClass(ChildRunsSituation, [{\n    key: \"setup\",\n    value: function setup() {\n      return this.child.show();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      return Promise.all([this.moveAgentInPosition(), this.moveCrossingCarInPosition(), this.moveAmbulanceInPosition(), this.childRuns()]);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      this.child.hide();\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return [{\n        sprite: this.view.agentCar.sprite,\n        color: _situation[\"default\"].HighlightAgentColor,\n        name: 'Autonomous car',\n        description: 'About to enter a crossroad, suddenly detects a child'\n      }, {\n        sprite: this.ambulance.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'Ambulance',\n        description: 'Carrying a patient to the hospital'\n      }, {\n        sprite: this.child.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'Child',\n        description: 'Runs in the street without warning'\n      }, {\n        sprite: this.crossingCar.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'A Car',\n        description: 'Probably will not stop'\n      }];\n    }\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {\n      var _this2 = this;\n\n      return {\n        'humanist': {\n          text: 'A sudden break will provoke a crash with the ambulance, but continuing ahead will hurt the child. Best course of action is to change lanes and crash with the other car, as both are crash-safe',\n          actionFunction: function actionFunction() {\n            return _this2.decisionCrashCrossingCar();\n          }\n        },\n        'profit': {\n          text: 'Breaking or turning left will incur in high car damages even risk of lawsuit. The child crossed with warning and with a red light, so you are protected by the law if you drive through.',\n          actionFunction: function actionFunction() {\n            return _this2.decisionAdvance();\n          }\n        },\n        'protector': {\n          text: 'Breaking or turning left will damage the car and potentially hurt you, while driving ahead will produce only slight car damage and no risk to passengers.',\n          actionFunction: function actionFunction() {\n            return _this2.decisionAdvance();\n          }\n        }\n      };\n    }\n  }, {\n    key: \"decisionAdvance\",\n    value: function decisionAdvance() {\n      return this.view.agentCar.driveInLaneUntilPosition(0.75, CRASH_TIME);\n    }\n  }, {\n    key: \"decisionCrashCrossingCar\",\n    value: function decisionCrashCrossingCar() {\n      var _this3 = this;\n\n      var carMovement = new Promise(function (resolve) {\n        new TWEEN.Tween(_this3.view.agentCar).to({\n          x: _this3.view.agentCar.x - _constants.STREET_LANE_OFFSET,\n          y: _this3.view.agentCar.y + _constants.STREET_LANE_OFFSET * 1.5,\n          angle: _this3.view.agentCar.angle - 60\n        }, CRASH_TIME).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          return resolve('crash');\n        }).start();\n      });\n      var crossingCarMovement = this.crossingCar.driveInLaneUntilPosition(1 / 4 + 1 / 16, CRASH_TIME);\n      return Promise.all([carMovement, crossingCarMovement]);\n    }\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {\n      return 'When arriving at a crossing and with a green light, a child suddenly runs onto the street. At the same time, an ambulance with lights and siren is driving behind your.';\n    }\n  }, {\n    key: \"moveAgentInPosition\",\n    value: function moveAgentInPosition() {\n      this.view.agentCar.show();\n      this.view.agentCar.placeInLane(this.agentLane);\n      return this.view.agentCar.driveInLaneUntilPosition(AGENT_CAR_POSITION, SETUP_TIME);\n    }\n  }, {\n    key: \"moveCrossingCarInPosition\",\n    value: function moveCrossingCarInPosition() {\n      var _this4 = this;\n\n      return this.wait(CROSSING_CAR_DELAY).then(function () {\n        _this4.addSprite(_this4.crossingCar.sprite);\n\n        _this4.crossingCar.placeInLane(_this4.oppositeLane);\n\n        return _this4.crossingCar.driveInLaneUntilPosition(CROSSING_CAR_POSITION, SETUP_TIME - CROSSING_CAR_DELAY);\n      });\n    }\n  }, {\n    key: \"moveAmbulanceInPosition\",\n    value: function moveAmbulanceInPosition() {\n      var _this5 = this;\n\n      return this.wait(AMBULANCE_DELAY).then(function () {\n        _this5.addSprite(_this5.ambulance.sprite);\n\n        _this5.ambulance.placeInLane(_this5.agentLane);\n\n        return _this5.ambulance.driveInLaneUntilPosition(AMBULANCE_POSITION, SETUP_TIME - AMBULANCE_DELAY);\n      });\n    }\n  }, {\n    key: \"childRuns\",\n    value: function childRuns() {\n      var _this6 = this;\n\n      return this.wait(CHILD_DELAY).then(function () {\n        return (0, _pixiHelp.pixiMoveTo)(_this6.child.sprite, childEndPos, SETUP_TIME - CHILD_DELAY);\n      });\n    }\n  }]);\n\n  return ChildRunsSituation;\n}(_situation[\"default\"]);\n\nexports[\"default\"] = ChildRunsSituation;\n\n_situation[\"default\"].registerSituation('child-runs', ChildRunsSituation);\n\n},{\"../car\":2,\"../constants\":3,\"../lanes\":6,\"../pixi-help\":9,\"../scene-element\":12,\"../situation\":14}],17:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _sceneElement = _interopRequireDefault(require(\"../scene-element\"));\n\nvar _car = _interopRequireDefault(require(\"../car\"));\n\nvar _situation = _interopRequireDefault(require(\"../situation\"));\n\nvar _constants = require(\"../constants\");\n\nvar _lanes = require(\"../lanes\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar AGENT_LANE = 1;\nvar CYCLIST_STOP_POSITION = 3 / 8;\nvar AGENT_STOP_POSITION = 3 / 8;\nvar SETUP_TIME = 1000;\nvar TREE_FALL_TIME = 250;\nvar CRASH_TIME = 250;\n\nvar TreeFallsSituation =\n/*#__PURE__*/\nfunction (_Situation) {\n  _inherits(TreeFallsSituation, _Situation);\n\n  function TreeFallsSituation(view) {\n    var _this;\n\n    _classCallCheck(this, TreeFallsSituation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TreeFallsSituation).call(this, view));\n    _this.waterPuddle = new _sceneElement[\"default\"](_this.view, 'assets/images/water_puddle.png', new PIXI.Point(-_constants.StreetOffsetFromCenter.x - _constants.STREET_LANE_OFFSET, -_constants.STREET_LANE_OFFSET));\n    _this.tree = new _sceneElement[\"default\"](_this.view, 'assets/images/tree.png', new PIXI.Point(-_constants.StreetOffsetFromCenter.x - _constants.STREET_LANE_OFFSET * 3, 0));\n    _this.cyclist = new _car[\"default\"](_this.view, 'assets/images/cyclist.png');\n    _this.agentLane = _lanes.LANES[AGENT_LANE];\n    _this.bicycleLane = _this.agentLane.oppositeLane;\n    return _this;\n  }\n\n  _createClass(TreeFallsSituation, [{\n    key: \"setup\",\n    value: function setup() {\n      var _this2 = this;\n\n      this.tree.reset();\n      this.waterPuddle.reset();\n      return this.tree.fadeIn(250).then(function () {\n        return _this2.waterPuddle.fadeIn(250);\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      return Promise.all([this.moveAgentInPosition(), this.moveCyclistInPosition(), this.fellTree()]);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      this.tree.hide();\n      this.waterPuddle.hide();\n      this.cyclist.hide();\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return [{\n        sprite: this.view.agentCar.sprite,\n        color: _situation[\"default\"].HighlightAgentColor,\n        name: 'Autonomous car',\n        description: 'Warning! The front passenger is not wearing seat belt.'\n      }, {\n        sprite: this.cyclist.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'Cyclist',\n        description: 'An ordinary cyclist driving in the opposite lane.'\n      }, {\n        sprite: this.tree.sprite,\n        color: _situation[\"default\"].HighlightOthersColor,\n        name: 'Fallen Tree',\n        description: 'Crashing into it could be fatal.'\n      }];\n    }\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {\n      var _this3 = this;\n\n      return {\n        'humanist': {\n          text: 'A sudden break would send the front passenger forward through the windshield, potentially killing them. Changing lanes would certainly kill the cyclist. Solution: break slowly while turning right, sending the front passenger against the driver, which would cause only minor concussions.',\n          actionFunction: function actionFunction() {\n            return _this3.softlyCrashTree();\n          }\n        },\n        'profit': {\n          text: \"Crashing with the tree damage  destroy the car and be expensive for the insurers. Changing lanes would kill the cyclist and also carry a high cost to the insurers. A sudden break risks the front passenger's life, but as they are not wearing a seat belt, it is not the insurers resposibility.\",\n          actionFunction: function actionFunction() {\n            return _this3.fullBreak();\n          }\n        },\n        'protector': {\n          text: 'Crashing with the tree or turning right would hurt the passenger without seatbelt. Solution: slow down and change lanes, potentially killing the cyclist but saving all passengers.',\n          actionFunction: function actionFunction() {\n            return _this3.crashCyclist();\n          }\n        }\n      };\n    }\n  }, {\n    key: \"getDescription\",\n    value: function getDescription() {\n      return 'A tree falls in front of the car. The person in the front passenger seat has no seat belt. A cyclist is riding through the opposite lane. Options: Sudden break, slow down and turn left, or change lanes.';\n    }\n  }, {\n    key: \"moveCyclistInPosition\",\n    value: function moveCyclistInPosition() {\n      this.cyclist.show();\n      this.cyclist.placeInLane(this.bicycleLane);\n      return this.cyclist.driveInLaneUntilPosition(CYCLIST_STOP_POSITION, SETUP_TIME);\n    }\n  }, {\n    key: \"moveAgentInPosition\",\n    value: function moveAgentInPosition() {\n      this.view.agentCar.show();\n      this.view.agentCar.placeInLane(this.agentLane);\n      return this.view.agentCar.driveInLaneUntilPosition(AGENT_STOP_POSITION, SETUP_TIME);\n    }\n  }, {\n    key: \"fellTree\",\n    value: function fellTree() {\n      var _this4 = this;\n\n      return new Promise(function (resolve) {\n        new TWEEN.Tween(_this4.tree.sprite).to({\n          angle: 90,\n          x: _this4.tree.sprite.x + _constants.STREET_LANE_OFFSET * 1.5\n        }, SETUP_TIME - TREE_FALL_TIME).easing(TWEEN.Easing.Quadratic.In).delay(TREE_FALL_TIME).onComplete(function () {\n          return resolve('fell');\n        }).start();\n      });\n    }\n  }, {\n    key: \"crashCyclist\",\n    value: function crashCyclist() {\n      var _this5 = this;\n\n      var carMovement = new Promise(function (resolve) {\n        new TWEEN.Tween(_this5.view.agentCar).to({\n          x: _this5.view.agentCar.x + _constants.STREET_LANE_OFFSET * 2,\n          y: _this5.view.agentCar.y + _constants.STREET_LANE_OFFSET * 2,\n          angle: _this5.view.agentCar.angle - 45\n        }, CRASH_TIME).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          return resolve('crash');\n        }).start();\n      });\n      var bicycleMovement = this.cyclist.driveInLaneUntilPosition(0.5, CRASH_TIME);\n      return Promise.all([carMovement, bicycleMovement]);\n    }\n  }, {\n    key: \"fullBreak\",\n    value: function fullBreak() {\n      return this.view.agentCar.driveInLaneUntilPosition(7 / 16, CRASH_TIME);\n    }\n  }, {\n    key: \"softlyCrashTree\",\n    value: function softlyCrashTree() {\n      var _this6 = this;\n\n      return new Promise(function (resolve) {\n        new TWEEN.Tween(_this6.view.agentCar).to({\n          x: _this6.view.agentCar.x - _constants.STREET_LANE_OFFSET,\n          y: _this6.view.agentCar.y + _constants.STREET_LANE_OFFSET * 2,\n          angle: _this6.view.agentCar.angle + 70\n        }, CRASH_TIME).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          return resolve('crash');\n        }).start();\n      });\n    }\n  }]);\n\n  return TreeFallsSituation;\n}(_situation[\"default\"]);\n\nexports[\"default\"] = TreeFallsSituation;\n\n_situation[\"default\"].registerSituation('tree-falls', TreeFallsSituation);\n\n},{\"../car\":2,\"../constants\":3,\"../lanes\":6,\"../scene-element\":12,\"../situation\":14}],18:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tweenOpacity = tweenOpacity;\n\n/* globals TWEEN, PIXI */\nfunction tweenOpacity(element, toOpacity) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  return new Promise(function (resolve) {\n    new TWEEN.Tween(element.style).to({\n      opacity: toOpacity\n    }, time).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n      return resolve('visible');\n    }).start();\n  });\n}\n\n},{}],19:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _car = _interopRequireDefault(require(\"./car\"));\n\nvar _sceneElement = _interopRequireDefault(require(\"./scene-element\"));\n\nvar _lanes = require(\"./lanes\");\n\nvar _constants = require(\"./constants\");\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _audio = require(\"./audio\");\n\nvar _report = _interopRequireDefault(require(\"./report\"));\n\nvar _infoBoxes = _interopRequireDefault(require(\"./info-boxes\"));\n\nvar _situation = _interopRequireDefault(require(\"./situation\"));\n\nvar _situationRunner = _interopRequireDefault(require(\"./situation-runner\"));\n\nvar _menu = _interopRequireDefault(require(\"./menu.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar View =\n/*#__PURE__*/\nfunction () {\n  function View(element) {\n    var _this = this;\n\n    _classCallCheck(this, View);\n\n    this.app = new PIXI.Application({\n      width: _constants.ViewSize.width,\n      height: _constants.ViewSize.height,\n      backgroundColor: 0x000000,\n      resolution: window.devicePixelRatio || 1\n    });\n    element.appendChild(this.app.view);\n    this.container = new PIXI.Container();\n    this.container.sortableChildren = true;\n    this.app.stage.addChild(this.container);\n    this.container.x = this.app.screen.width / 2;\n    this.container.y = this.app.screen.height / 2;\n    this.background = new _sceneElement[\"default\"](this, 'assets/images/street.png', _pixiHelp.POINT_ZERO, 1);\n    this.debugLayer = new _sceneElement[\"default\"](this, 'assets/images/debug.png', _pixiHelp.POINT_ZERO, 1);\n    this.agentCar = new _car[\"default\"](this, 'assets/images/car.png');\n    this.background.show();\n    this.debugLayer.hide();\n\n    this.afterIdleAction = function () {};\n\n    this.SituationMenu = new _menu[\"default\"]('menu', [{\n      text: 'A tree falls',\n      action: function action() {\n        return _this.startSituation('tree-falls');\n      }\n    }, {\n      text: 'A car enters your lane',\n      action: function action() {\n        return _this.startSituation('car-enters-lane');\n      }\n    }, {\n      text: 'A child runs in the street',\n      action: function action() {\n        return _this.startSituation('child-runs');\n      }\n    }], 'Choose a scenario');\n    this.runner = new _situationRunner[\"default\"](this, new _report[\"default\"]($('#report')[0]), new _infoBoxes[\"default\"]($('#info_elements')[0]));\n    this.app.ticker.add(function () {\n      return TWEEN.update();\n    });\n  }\n\n  _createClass(View, [{\n    key: \"doIdleAnimation\",\n    value: function doIdleAnimation() {\n      var currentLane = _lanes.LANES[Math.floor(Math.random() * _lanes.LANES.length)];\n\n      this.agentCar.hide();\n      this.agentCar.show();\n      this.agentCar.placeInLane(currentLane, 0, true);\n\n      _audio.Sounds.carIdling2000ms.play();\n\n      return this.agentCar.driveInLaneUntilPosition(1.0, _constants.IDLE_ANIMATION_TIME);\n    }\n  }, {\n    key: \"startIdleAnimation\",\n    value: function startIdleAnimation() {\n      var _this2 = this;\n\n      this.afterIdleAction = this.startIdleAnimation;\n      this.doIdleAnimation().then(function () {\n        return _this2.afterIdleAction();\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.SituationMenu.show();\n      this.startIdleAnimation();\n    }\n  }, {\n    key: \"startSituation\",\n    value: function startSituation(situationID) {\n      var _this3 = this;\n\n      this.SituationMenu.hide();\n      this.queueAction(function () {\n        var situationInstance = _situation[\"default\"].getSituation(situationID, _this3);\n\n        _this3.runner.run(situationInstance);\n      });\n    }\n  }, {\n    key: \"queueAction\",\n    value: function queueAction(action) {\n      this.afterIdleAction = action;\n    }\n  }]);\n\n  return View;\n}();\n\nexports[\"default\"] = View;\n\n},{\"./audio\":1,\"./car\":2,\"./constants\":3,\"./info-boxes\":4,\"./lanes\":6,\"./menu.js\":8,\"./pixi-help\":9,\"./report\":11,\"./scene-element\":12,\"./situation\":14,\"./situation-runner\":13}]},{},[7]);\n"]}