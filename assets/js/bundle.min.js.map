{"version":3,"sources":["bundle.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","obj","_constants","_pixiHelp","_driveDirection","__esModule","default","_lane","_defineProperties","target","props","descriptor","enumerable","configurable","writable","key","Car","view","imageFile","lane","arguments","undefined","NO_LANE","instance","Constructor","TypeError","_classCallCheck","this","sprite","createSprite","CAR_SCALE","zIndex","currentLane","driveDirection","protoProps","staticProps","elapsed","x","carSpeed","y","position","forceDirection","start","end","forceLaneDirection","angle","carAngle","_this","endPosition","Promise","resolve","app","ticker","add","update","getCarPosition","remove","deltaTime","speedX","speedY","container","addChild","removeChild","get","set","prototype","./constants","./drive-direction","./lane","./pixi-help","2","OFF_SCREEN_LIMIT","STREET_LANE_OFFSET","STREET_Y_OFFSET","STREET_X_OFFSET","DEFAULT_SPEED","VIEW_SIZE","GLOBAL_SCALE","3","DriveDirection","PIXI","Point","LEFT","RIGHT","UP","DOWN","4","Lane","oppositeLane","isVertical","isHorizontal","car","POINT_ZERO","5","LANES","createHorizontalLane","verticalOffset","dirMultiplier","createVerticalLane","horizontalOffset","setOppositeLanes","laneA","laneB","6","_view","_interopRequireDefault","_situation","_situationRunner","$","runner","on","policyID","val","situationID","SituationClass","getSituation","queueAction","run","startIdleAnimation","./situation","./situation-runner","./situations/car-enters-lane","./situations/tree-falls","./view","7","sourceImage","scale","anchor","texture","Texture","from","Sprite","8","Policies","humanist","name","objective","profit","protector","9","SceneElement","initialPosition","10","_policies","SituationRunner","currentDecision","infoElements","situation","getDecisions","setup","then","waitForKeyPress","highlight","getElements","removeHighligts","showDecision","hideDecision","playOutDecision","clearSprites","teardown","window","onkeydown","elements","_this2","forEach","element","highlightSprite","color","text","placement","_this3","graphics","Graphics","beginFill","drawRect","width","height","endFill","push","addInfoText","style","InfoBoxStyle","infoText","Text","InfoTextSize","document","getElementById","innerHTML","setVisible","elementName","visibility","actionFunction","TextStyle","fontFamily","fontSize","fill","wordWrap","wordWrapWidth","./policies","11","Situation","sprites","aSituation","situations","aSprite","12","_sceneElement","_car","_lanes","_typeof","Symbol","iterator","constructor","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","BUS_STOP_X","BUS_STOP_Y","CarEntersLaneSituation","agentLane","parkedLane","blackCar","truck","busStop","subClass","superClass","create","_inherits","show","hide","moveTruckInPosition","moveBlackCarInPosition","moveAgentInPosition","blackCarCrossesLane","agentCar","decisionAdvace","decisionTurnLeft","decisionTurnRight","startingLane","placeInLane","driveInLaneUntilPosition","carCrossLane","addSprite","_this4","registerSituation","../car","../constants","../lanes","../scene-element","../situation","13","TreeFallsSituation","waterPuddle","tree","cyclist","bicycleLane","reset","moveCyclistInPosition","fellTree","14","View","Application","backgroundColor","resolution","devicePixelRatio","appendChild","Container","sortableChildren","stage","screen","background","afterIdleAction","Math","floor","random","doIdleAnimation","action","./car","./lanes","./scene-element"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _constants = require(\"./constants\");\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _driveDirection = _interopRequireDefault(require(\"./drive-direction\"));\n\nvar _lane = require(\"./lane\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Car =\n/*#__PURE__*/\nfunction () {\n  function Car(view, imageFile) {\n    var lane = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _lane.NO_LANE;\n\n    _classCallCheck(this, Car);\n\n    this.view = view;\n    this.sprite = (0, _pixiHelp.createSprite)(imageFile, _constants.CAR_SCALE, 0.5);\n    this.sprite.zIndex = 100;\n    this.currentLane = lane;\n    this.driveDirection = lane.driveDirection;\n  }\n\n  _createClass(Car, [{\n    key: \"update\",\n    value: function update(elapsed) {\n      this.x += this.driveDirection.carSpeed.x * elapsed;\n      this.y += this.driveDirection.carSpeed.y * elapsed;\n    }\n  }, {\n    key: \"placeInLane\",\n    value: function placeInLane(lane) {\n      var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n      var forceDirection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      this.lane = lane;\n      this.x = lane.start.x + (lane.end.x - lane.start.x) * position;\n      this.y = lane.start.y + (lane.end.y - lane.start.y) * position;\n\n      if (forceDirection) {\n        this.forceLaneDirection();\n      }\n    }\n  }, {\n    key: \"forceLaneDirection\",\n    value: function forceLaneDirection() {\n      this.driveDirection = this.lane.driveDirection;\n      this.sprite.angle = this.lane.driveDirection.carAngle;\n    }\n  }, {\n    key: \"driveInLaneUntilPosition\",\n    value: function driveInLaneUntilPosition() {\n      var _this = this;\n\n      var endPosition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1.0;\n      // force driving direction, or it might never stop\n      this.forceLaneDirection();\n      return new Promise(function (resolve) {\n        var update = function update() {\n          if (_this.lane.getCarPosition(_this) >= endPosition) {\n            _this.view.app.ticker.remove(update);\n\n            resolve('arrived');\n          }\n\n          _this.update(_this.view.app.ticker.deltaTime);\n        };\n\n        _this.view.app.ticker.add(update);\n      });\n    }\n  }, {\n    key: \"turnAround\",\n    value: function turnAround() {\n      this.driveDirection = new _driveDirection[\"default\"](360 - this.driveDirection.carAngle, -this.driveDirection.speedX, -this.driveDirection.speedY);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.view.container.addChild(this.sprite);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.view.container.removeChild(this.sprite);\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.sprite.x;\n    },\n    set: function set(x) {\n      this.sprite.x = x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.sprite.y;\n    },\n    set: function set(y) {\n      this.sprite.y = y;\n    }\n  }]);\n\n  return Car;\n}();\n\nexports[\"default\"] = Car;\n\n},{\"./constants\":2,\"./drive-direction\":3,\"./lane\":4,\"./pixi-help\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OFF_SCREEN_LIMIT = exports.STREET_LANE_OFFSET = exports.STREET_Y_OFFSET = exports.STREET_X_OFFSET = exports.DEFAULT_SPEED = exports.VIEW_SIZE = exports.CAR_SCALE = exports.GLOBAL_SCALE = void 0;\nvar GLOBAL_SCALE = 0.5;\nexports.GLOBAL_SCALE = GLOBAL_SCALE;\nvar CAR_SCALE = 0.25 * GLOBAL_SCALE;\nexports.CAR_SCALE = CAR_SCALE;\nvar VIEW_SIZE = 1024 * GLOBAL_SCALE;\nexports.VIEW_SIZE = VIEW_SIZE;\nvar DEFAULT_SPEED = 10 * GLOBAL_SCALE;\nexports.DEFAULT_SPEED = DEFAULT_SPEED;\nvar STREET_X_OFFSET = 1 / 4 * VIEW_SIZE;\nexports.STREET_X_OFFSET = STREET_X_OFFSET;\nvar STREET_Y_OFFSET = 1 / 4 * VIEW_SIZE;\nexports.STREET_Y_OFFSET = STREET_Y_OFFSET;\nvar STREET_LANE_OFFSET = 1 / 40 * VIEW_SIZE;\nexports.STREET_LANE_OFFSET = STREET_LANE_OFFSET;\nvar OFF_SCREEN_LIMIT = (1 / 2 + 1 / 10) * VIEW_SIZE;\nexports.OFF_SCREEN_LIMIT = OFF_SCREEN_LIMIT;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar DriveDirection =\n/*#__PURE__*/\nfunction () {\n  function DriveDirection(carAngle, speedX, speedY) {\n    _classCallCheck(this, DriveDirection);\n\n    this.carAngle = carAngle;\n    this.carSpeed = new PIXI.Point(speedX, speedY);\n  }\n\n  _createClass(DriveDirection, [{\n    key: \"isVertical\",\n    value: function isVertical() {\n      return this.carSpeed.x === 0;\n    }\n  }, {\n    key: \"isHorizontal\",\n    value: function isHorizontal() {\n      return this.carSpeed.y === 0;\n    }\n  }]);\n\n  return DriveDirection;\n}();\n\nexports[\"default\"] = DriveDirection;\nDriveDirection.LEFT = new DriveDirection(270, -_constants.DEFAULT_SPEED, 0);\nDriveDirection.RIGHT = new DriveDirection(90, _constants.DEFAULT_SPEED, 0);\nDriveDirection.UP = new DriveDirection(0, 0, -_constants.DEFAULT_SPEED);\nDriveDirection.DOWN = new DriveDirection(180, 0, _constants.DEFAULT_SPEED);\n\n},{\"./constants\":2}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NO_LANE = exports.Lane = void 0;\n\nvar _driveDirection = _interopRequireDefault(require(\"./drive-direction\"));\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Lane =\n/*#__PURE__*/\nfunction () {\n  function Lane(start, end, driveDirection) {\n    _classCallCheck(this, Lane);\n\n    this.start = start;\n    this.end = end;\n    this.driveDirection = driveDirection;\n    this.oppositeLane = null;\n  }\n\n  _createClass(Lane, [{\n    key: \"isVertical\",\n    value: function isVertical() {\n      return this.driveDirection.isVertical();\n    }\n  }, {\n    key: \"isHorizontal\",\n    value: function isHorizontal() {\n      return this.driveDirection.isHorizontal();\n    }\n  }, {\n    key: \"getCarPosition\",\n    value: function getCarPosition(car) {\n      if (this.isVertical()) {\n        return (car.y - this.start.y) / (this.end.y - this.start.y);\n      }\n\n      return (car.x - this.start.x) / (this.end.x - this.start.x);\n    }\n  }]);\n\n  return Lane;\n}();\n\nexports.Lane = Lane;\nvar NO_LANE = new Lane(_pixiHelp.POINT_ZERO, new PIXI.Point(1, 0), _driveDirection[\"default\"].RIGHT);\nexports.NO_LANE = NO_LANE;\n\n},{\"./drive-direction\":3,\"./pixi-help\":7}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LANES = void 0;\n\nvar _lane = require(\"./lane\");\n\nvar _driveDirection = _interopRequireDefault(require(\"./drive-direction\"));\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/* globals PIXI */\nfunction createHorizontalLane(verticalOffset, driveDirection) {\n  var dirMultiplier = driveDirection.carSpeed.x > 0 ? -1 : 1;\n  return new _lane.Lane(new PIXI.Point(_constants.OFF_SCREEN_LIMIT * dirMultiplier, -verticalOffset), new PIXI.Point(-_constants.OFF_SCREEN_LIMIT * dirMultiplier, -verticalOffset), driveDirection);\n}\n\nfunction createVerticalLane(horizontalOffset, driveDirection) {\n  var dirMultiplier = driveDirection.carSpeed.y > 0 ? -1 : 1;\n  return new _lane.Lane(new PIXI.Point(-horizontalOffset, _constants.OFF_SCREEN_LIMIT * dirMultiplier), new PIXI.Point(-horizontalOffset, -_constants.OFF_SCREEN_LIMIT * dirMultiplier), driveDirection);\n} // eslint-disable-next-line import/prefer-default-export\n\n\nvar LANES = [createVerticalLane(_constants.STREET_X_OFFSET - _constants.STREET_LANE_OFFSET, _driveDirection[\"default\"].UP), createVerticalLane(_constants.STREET_X_OFFSET + _constants.STREET_LANE_OFFSET, _driveDirection[\"default\"].DOWN), createVerticalLane(-_constants.STREET_X_OFFSET - _constants.STREET_LANE_OFFSET, _driveDirection[\"default\"].UP), createVerticalLane(-_constants.STREET_X_OFFSET + _constants.STREET_LANE_OFFSET, _driveDirection[\"default\"].DOWN), createHorizontalLane(_constants.STREET_Y_OFFSET + _constants.STREET_LANE_OFFSET, _driveDirection[\"default\"].LEFT), createHorizontalLane(_constants.STREET_Y_OFFSET - _constants.STREET_LANE_OFFSET, _driveDirection[\"default\"].RIGHT), createHorizontalLane(-_constants.STREET_Y_OFFSET + _constants.STREET_LANE_OFFSET, _driveDirection[\"default\"].LEFT), createHorizontalLane(-_constants.STREET_Y_OFFSET - _constants.STREET_LANE_OFFSET, _driveDirection[\"default\"].RIGHT)];\nexports.LANES = LANES;\n\nfunction setOppositeLanes(laneA, laneB) {\n  // eslint-disable-next-line no-param-reassign\n  laneA.oppositeLane = laneB; // eslint-disable-next-line no-param-reassign\n\n  laneB.oppositeLane = laneA;\n}\n\nsetOppositeLanes(LANES[0], LANES[1]);\nsetOppositeLanes(LANES[2], LANES[3]);\nsetOppositeLanes(LANES[4], LANES[5]);\nsetOppositeLanes(LANES[6], LANES[7]);\n\n},{\"./constants\":2,\"./drive-direction\":3,\"./lane\":4}],6:[function(require,module,exports){\n\"use strict\";\n\nvar _view = _interopRequireDefault(require(\"./view\"));\n\nvar _situation = _interopRequireDefault(require(\"./situation\"));\n\nvar _situationRunner = _interopRequireDefault(require(\"./situation-runner\"));\n\nrequire(\"./situations/car-enters-lane\");\n\nrequire(\"./situations/tree-falls\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/* globals $ */\nvar view = new _view[\"default\"]($('#game')[0]);\nvar runner = new _situationRunner[\"default\"](view);\n$('#startButton').on('click', function () {\n  var policyID = $('#option_policy').val();\n  var situationID = $('#option_situation').val();\n\n  var SituationClass = _situation[\"default\"].getSituation(situationID);\n\n  view.queueAction(function () {\n    runner.run(new SituationClass(view), policyID);\n  });\n});\nview.startIdleAnimation();\n\n},{\"./situation\":11,\"./situation-runner\":10,\"./situations/car-enters-lane\":12,\"./situations/tree-falls\":13,\"./view\":14}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSprite = createSprite;\nexports.POINT_ZERO = void 0;\n\n/* global PIXI */\nfunction createSprite(sourceImage, scale) {\n  var anchor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n  var texture = PIXI.Texture.from(sourceImage);\n  var sprite = new PIXI.Sprite(texture);\n  sprite.scale.x = scale;\n  sprite.scale.y = scale;\n  sprite.anchor.set(anchor);\n  return sprite;\n}\n\nvar POINT_ZERO = new PIXI.Point(0, 0);\nexports.POINT_ZERO = POINT_ZERO;\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Policies = void 0;\n// eslint-disable-next-line import/prefer-default-export\nvar Policies = {\n  humanist: {\n    name: 'Humanist',\n    objective: 'Minimize human injuries'\n  },\n  profit: {\n    name: 'Profit-based',\n    objective: 'Minimize costs (property and insurance)'\n  },\n  protector: {\n    name: 'Protector',\n    objective: 'Protect the autonomous car and its passengers'\n  }\n};\nexports.Policies = Policies;\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SceneElement =\n/*#__PURE__*/\nfunction () {\n  function SceneElement(view, imageFile) {\n    var position = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _pixiHelp.POINT_ZERO;\n    var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _constants.CAR_SCALE;\n\n    _classCallCheck(this, SceneElement);\n\n    this.view = view;\n    this.sprite = (0, _pixiHelp.createSprite)(imageFile, scale);\n    this.sprite.x = position.x;\n    this.sprite.y = position.y;\n    this.initialPosition = position;\n  }\n\n  _createClass(SceneElement, [{\n    key: \"show\",\n    value: function show() {\n      this.view.container.addChild(this.sprite);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.view.container.removeChild(this.sprite);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.sprite.x = this.initialPosition.x;\n      this.sprite.y = this.initialPosition.y;\n      this.sprite.angle = 0;\n    }\n  }]);\n\n  return SceneElement;\n}();\n\nexports[\"default\"] = SceneElement;\n\n},{\"./constants\":2,\"./pixi-help\":7}],10:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _policies = require(\"./policies\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SituationRunner =\n/*#__PURE__*/\nfunction () {\n  function SituationRunner(view) {\n    _classCallCheck(this, SituationRunner);\n\n    this.view = view;\n    this.currentDecision = null;\n    this.infoElements = [];\n  }\n\n  _createClass(SituationRunner, [{\n    key: \"run\",\n    value: function run(situation, policyID) {\n      var _this = this;\n\n      this.currentDecision = situation.getDecisions()[policyID];\n      situation.setup();\n      situation.start().then(function () {\n        return _this.waitForKeyPress();\n      }).then(function () {\n        return _this.highlight(situation.getElements());\n      }).then(function () {\n        return _this.waitForKeyPress();\n      }).then(function () {\n        return _this.removeHighligts();\n      }).then(function () {\n        return _this.showDecision(policyID);\n      }).then(function () {\n        return _this.waitForKeyPress();\n      }).then(function () {\n        return _this.hideDecision();\n      }).then(function () {\n        return _this.playOutDecision();\n      }).then(function () {\n        return _this.waitForKeyPress();\n      }).then(function () {\n        return situation.clearSprites();\n      }).then(function () {\n        return situation.teardown();\n      }).then(function () {\n        return _this.view.startIdleAnimation();\n      });\n    }\n  }, {\n    key: \"waitForKeyPress\",\n    value: function waitForKeyPress() {\n      return new Promise(function (resolve) {\n        window.onkeydown = function () {\n          window.onkeydown = function () {};\n\n          resolve('keydown');\n        };\n      });\n    }\n  }, {\n    key: \"highlight\",\n    value: function highlight(elements) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        elements.forEach(function (element) {\n          _this2.highlightSprite(element.sprite, element.color, element.text, element.placement);\n        });\n        resolve('highlight');\n      });\n    }\n  }, {\n    key: \"removeHighligts\",\n    value: function removeHighligts() {\n      var _this3 = this;\n\n      return new Promise(function (resolve) {\n        _this3.infoElements.forEach(function (element) {\n          _this3.view.container.removeChild(element);\n        });\n\n        resolve('clean');\n      });\n    }\n  }, {\n    key: \"highlightSprite\",\n    value: function highlightSprite(sprite, color, text) {\n      var placement = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'right';\n      var graphics = new PIXI.Graphics();\n      graphics.beginFill(color, 0.5);\n      graphics.drawRect(sprite.x - sprite.width / 2, sprite.y - sprite.height / 2, sprite.width, sprite.height);\n      graphics.endFill();\n      this.infoElements.push(graphics);\n      this.view.container.addChild(graphics);\n      this.addInfoText(sprite, text, placement);\n    }\n  }, {\n    key: \"addInfoText\",\n    value: function addInfoText(sprite, text) {\n      var placement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'right';\n      var style = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : SituationRunner.InfoBoxStyle;\n      var infoText = new PIXI.Text(text, style);\n      infoText.x = sprite.x - sprite.width / 2;\n      infoText.y = sprite.y - sprite.height / 2;\n\n      switch (placement) {\n        case 'right':\n          infoText.x += sprite.width;\n          break;\n\n        case 'left':\n          infoText.x -= sprite.width + SituationRunner.InfoTextSize;\n          break;\n\n        case 'up':\n          infoText.y -= sprite.height + SituationRunner.InfoTextSize;\n          break;\n\n        case 'down':\n          infoText.y += sprite.height;\n          break;\n\n        default:\n          infoText.x += sprite.width;\n          break;\n      }\n\n      this.infoElements.push(infoText);\n      this.view.container.addChild(infoText);\n    }\n  }, {\n    key: \"showDecision\",\n    value: function showDecision(policyID) {\n      document.getElementById('report_decision').innerHTML = this.currentDecision.text;\n      document.getElementById('report_policy_name').innerHTML = _policies.Policies[policyID].name;\n      document.getElementById('report_policy_objective').innerHTML = _policies.Policies[policyID].objective;\n      return this.setVisible('report', 'visible');\n    }\n  }, {\n    key: \"hideDecision\",\n    value: function hideDecision() {\n      return this.setVisible('report', 'hidden');\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(elementName) {\n      var visibility = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'visible';\n      document.getElementById(elementName).style.visibility = visibility;\n    }\n  }, {\n    key: \"playOutDecision\",\n    value: function playOutDecision() {\n      return this.currentDecision.actionFunction();\n    }\n  }]);\n\n  return SituationRunner;\n}();\n\nexports[\"default\"] = SituationRunner;\nSituationRunner.InfoTextSize = 80;\nSituationRunner.InfoBoxStyle = new PIXI.TextStyle({\n  fontFamily: 'Arial',\n  fontSize: 16,\n  fill: '#000000',\n  wordWrap: true,\n  wordWrapWidth: SituationRunner.InfoTextSize + 20\n});\n\n},{\"./policies\":8}],11:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/* eslint-disable class-methods-use-this */\nvar Situation =\n/*#__PURE__*/\nfunction () {\n  function Situation(view) {\n    _classCallCheck(this, Situation);\n\n    this.view = view;\n    this.sprites = [];\n  }\n\n  _createClass(Situation, [{\n    key: \"addSprite\",\n    value: function addSprite(sprite) {\n      this.sprites.push(sprite);\n      this.view.container.addChild(sprite);\n    }\n  }, {\n    key: \"clearSprites\",\n    value: function clearSprites() {\n      var _this = this;\n\n      this.sprites.forEach(function (aSprite) {\n        _this.view.container.removeChild(aSprite);\n      });\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {}\n  }, {\n    key: \"start\",\n    value: function start() {}\n  }, {\n    key: \"teardown\",\n    value: function teardown() {}\n  }, {\n    key: \"getElements\",\n    value: function getElements() {}\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {}\n  }], [{\n    key: \"registerSituation\",\n    value: function registerSituation(key, aSituation) {\n      Situation.situations[key] = aSituation;\n    }\n  }, {\n    key: \"getSituation\",\n    value: function getSituation(key) {\n      return Situation.situations[key];\n    }\n  }]);\n\n  return Situation;\n}();\n\nexports[\"default\"] = Situation;\nSituation.situations = {};\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _constants = require(\"../constants\");\n\nvar _sceneElement = _interopRequireDefault(require(\"../scene-element\"));\n\nvar _situation = _interopRequireDefault(require(\"../situation\"));\n\nvar _car = _interopRequireDefault(require(\"../car\"));\n\nvar _lanes = require(\"../lanes\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar BUS_STOP_X = -0.16 * _constants.VIEW_SIZE;\nvar BUS_STOP_Y = -0.06 * _constants.VIEW_SIZE;\nvar TRUCK_STOP_POSITION = 0.45;\nvar BLACK_CAR_STOP_POSITION = 0.38;\nvar AGENT_STOP_POSITION = 0.45;\n\nvar CarEntersLaneSituation =\n/*#__PURE__*/\nfunction (_Situation) {\n  _inherits(CarEntersLaneSituation, _Situation);\n\n  function CarEntersLaneSituation(view) {\n    var _this;\n\n    _classCallCheck(this, CarEntersLaneSituation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CarEntersLaneSituation).call(this, view));\n    _this.agentLane = _lanes.LANES[0];\n    _this.parkedLane = _this.agentLane.oppositeLane;\n    _this.blackCar = new _car[\"default\"](view, 'assets/images/car_black.png');\n    _this.truck = new _car[\"default\"](view, 'assets/images/small_truck.png');\n    _this.busStop = new _sceneElement[\"default\"](view, 'assets/images/bus_stop.png', new PIXI.Point(BUS_STOP_X, BUS_STOP_Y)); // // bind methods for use as pointers\n    // this.carCrossLane = this.carCrossLane.bind(this);\n    // this.decisionAdvace = this.decisionAdvace.bind(this);\n    // this.decisionTurnLeft = this.decisionTurnLeft.bind(this);\n    // this.decisionTurnRight = this.decisionTurnRight.bind(this);\n    // this.moveTruckInPosition = this.moveTruckInPosition.bind(this);\n    // this.moveBlackCarInPosition = this.moveBlackCarInPosition.bind(this);\n    // this.moveAgentInPosition = this.moveAgentInPosition.bind(this);\n    // this.blackCarCrossesLane = this.blackCarCrossesLane.bind(this);\n\n    return _this;\n  }\n\n  _createClass(CarEntersLaneSituation, [{\n    key: \"setup\",\n    value: function setup() {\n      this.busStop.show();\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      this.busStop.hide();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      return this.moveTruckInPosition().then(function () {\n        return _this2.moveBlackCarInPosition();\n      }).then(function () {\n        return _this2.moveAgentInPosition();\n      }).then(function () {\n        return _this2.blackCarCrossesLane();\n      });\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return [{\n        sprite: this.view.agentCar.sprite,\n        color: 0x3220DE,\n        text: 'autonomous car\\nProperty value: medium',\n        placement: 'down'\n      }, {\n        sprite: this.blackCar.sprite,\n        color: 0xDE3220,\n        text: 'car entering lane\\nPassengers: 1\\nProperty Value: high\\nInsurance: yes',\n        placement: 'up'\n      }, {\n        sprite: this.truck.sprite,\n        color: 0xDE3220,\n        text: 'parked car\\nPassengers: 4\\nProperty value: low\\nInsurance: none',\n        placement: 'left'\n      }, {\n        sprite: this.busStop.sprite,\n        color: 0xDE3220,\n        text: 'bus stop\\nPeople: 10\\nProperty value: medium',\n        placement: 'right'\n      }];\n    }\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {\n      var _this3 = this;\n\n      return {\n        humanist: {\n          text: 'Turning left will risk 4 lives. Turning right with certainly kill people at the stop. Solution: breaking and crashing into the car in front will probably not result in fatalities, so its the action taken',\n          actionFunction: function actionFunction() {\n            return _this3.decisionAdvace();\n          }\n        },\n        profit: {\n          text: 'the car ahead is very expensive, so braking is not recommended. Turning right will risk high payouts to the victims or their families. Solution: turn left towards the parked car, as it is cheap and if the risk of casualties is lower.',\n          actionFunction: function actionFunction() {\n            return _this3.decisionTurnLeft();\n          }\n        },\n        protector: {\n          text: 'breaking and turning left mean crashing into heavy, hard objects and potentially harming you. Solution: turning right has almost no risk for you and your car, as people are softer than cars.',\n          actionFunction: function actionFunction() {\n            return _this3.decisionTurnRight();\n          }\n        }\n      };\n    } // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: \"carCrossLane\",\n    value: function carCrossLane(car, startingLane) {\n      car.placeInLane(startingLane.oppositeLane, 1 - startingLane.getCarPosition(car), false);\n    }\n  }, {\n    key: \"decisionAdvace\",\n    value: function decisionAdvace() {\n      return this.view.agentCar.driveInLaneUntilPosition(this.agentLane.getCarPosition(this.blackCar));\n    }\n  }, {\n    key: \"decisionTurnLeft\",\n    value: function decisionTurnLeft() {\n      this.carCrossLane(this.view.agentCar, this.agentLane, false);\n    }\n  }, {\n    key: \"decisionTurnRight\",\n    value: function decisionTurnRight() {\n      this.view.agentCar.x += _constants.STREET_LANE_OFFSET * 2;\n    }\n  }, {\n    key: \"moveTruckInPosition\",\n    value: function moveTruckInPosition() {\n      this.addSprite(this.truck.sprite);\n      this.truck.placeInLane(this.parkedLane);\n      return this.truck.driveInLaneUntilPosition(TRUCK_STOP_POSITION);\n    }\n  }, {\n    key: \"moveBlackCarInPosition\",\n    value: function moveBlackCarInPosition() {\n      this.addSprite(this.blackCar.sprite);\n      this.blackCar.placeInLane(this.parkedLane);\n      return this.blackCar.driveInLaneUntilPosition(BLACK_CAR_STOP_POSITION);\n    }\n  }, {\n    key: \"moveAgentInPosition\",\n    value: function moveAgentInPosition() {\n      this.view.agentCar.placeInLane(this.agentLane);\n      return this.view.agentCar.driveInLaneUntilPosition(AGENT_STOP_POSITION);\n    }\n  }, {\n    key: \"blackCarCrossesLane\",\n    value: function blackCarCrossesLane() {\n      var _this4 = this;\n\n      return new Promise(function (resolve) {\n        _this4.carCrossLane(_this4.blackCar, _this4.parkedLane);\n\n        resolve();\n      });\n    }\n  }]);\n\n  return CarEntersLaneSituation;\n}(_situation[\"default\"]);\n\nexports[\"default\"] = CarEntersLaneSituation;\n\n_situation[\"default\"].registerSituation('car-enters-lane', CarEntersLaneSituation);\n\n},{\"../car\":1,\"../constants\":2,\"../lanes\":5,\"../scene-element\":9,\"../situation\":11}],13:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _sceneElement = _interopRequireDefault(require(\"../scene-element\"));\n\nvar _car = _interopRequireDefault(require(\"../car\"));\n\nvar _situation = _interopRequireDefault(require(\"../situation\"));\n\nvar _constants = require(\"../constants\");\n\nvar _lanes = require(\"../lanes\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar TREE_STOP_POSITION = 0.45;\nvar CYCLIST_STOP_POSITION = 0.40;\n\nvar TreeFallsSituation =\n/*#__PURE__*/\nfunction (_Situation) {\n  _inherits(TreeFallsSituation, _Situation);\n\n  function TreeFallsSituation(view) {\n    var _this;\n\n    _classCallCheck(this, TreeFallsSituation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TreeFallsSituation).call(this, view));\n    _this.waterPuddle = new _sceneElement[\"default\"](_this.view, 'assets/images/water_puddle.png', new PIXI.Point(0.225 * _constants.VIEW_SIZE, -0.05 * _constants.VIEW_SIZE));\n    _this.tree = new _sceneElement[\"default\"](_this.view, 'assets/images/tree.png', new PIXI.Point(0.18 * _constants.VIEW_SIZE, 0));\n    _this.cyclist = new _car[\"default\"](_this.view, 'assets/images/cyclist.png');\n    _this.agentLane = _lanes.LANES[3];\n    _this.bicycleLane = _this.agentLane.oppositeLane; // this.moveCyclistInPosition = this.moveCyclistInPosition.bind(this);\n    // this.moveAgentInPosition = this.moveAgentInPosition.bind(this);\n    // this.fellTree = this.fellTree.bind(this);\n\n    return _this;\n  }\n\n  _createClass(TreeFallsSituation, [{\n    key: \"setup\",\n    value: function setup() {\n      this.tree.reset();\n      this.tree.show();\n      this.waterPuddle.reset();\n      this.waterPuddle.show();\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      return this.moveCyclistInPosition().then(function () {\n        return _this2.moveAgentInPosition();\n      }).then(function () {\n        return _this2.fellTree();\n      });\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      this.tree.hide();\n      this.waterPuddle.hide();\n      this.cyclist.hide();\n    }\n  }, {\n    key: \"getElements\",\n    value: function getElements() {\n      return [{\n        sprite: this.view.agentCar.sprite,\n        color: 0x3220DE,\n        text: 'autonomous car\\nProperty value: medium',\n        placement: 'down'\n      }, {\n        sprite: this.cyclist.sprite,\n        color: 0xDE3220,\n        text: 'A cyclist. Insurance: unknown',\n        placement: 'up'\n      }, {\n        sprite: this.tree.sprite,\n        color: 0xDE3220,\n        text: 'A tree. It is hard.',\n        placement: 'left'\n      }];\n    }\n  }, {\n    key: \"getDecisions\",\n    value: function getDecisions() {\n      var _this3 = this;\n\n      return {\n        humanist: {\n          text: 'a sudden break would send the passenger without seatbelt forward through the glass, potentially killing them. Swerving might avoid the collision with the tree, but could also harm the passenger. Solution: turn right and break, crashing into the tree softly, with the passenger without seatbelt protected by the one on its side and by its airbag.',\n          actionFunction: function actionFunction() {\n            _this3.view.agentCar.x -= _constants.STREET_LANE_OFFSET;\n            _this3.view.agentCar.y += _constants.STREET_LANE_OFFSET;\n          }\n        },\n        profit: {\n          text: 'Crashing with the tree will cost the insurers money. Swerving might avoid the collision with the tree, but as the floor is wet it could also potentially turn around the car, damaging it. As the car has warned the passenger to wear the seat belt but they have not, any injury will be their own responsibility. Changing lanes would kill the cyclist, but its insurance status is unknown, so its a financial risk. Solution: a sudden break, fully protecting the car and passengers that wear a seat belt.',\n          actionFunction: function actionFunction() {\n            _this3.view.agentCar.y += _constants.STREET_LANE_OFFSET * 2;\n          }\n        },\n        protector: {\n          text: 'Crashing with the tree or swerving would hurt the passenger without seatbelt. Solution: slow down and change lanes, potentially killing the cyclist but saving all passengers.',\n          actionFunction: function actionFunction() {\n            _this3.view.agentCar.x += _constants.STREET_LANE_OFFSET * 2;\n            _this3.view.agentCar.y += _constants.STREET_LANE_OFFSET;\n          }\n        }\n      };\n    }\n  }, {\n    key: \"moveCyclistInPosition\",\n    value: function moveCyclistInPosition() {\n      this.cyclist.show();\n      this.cyclist.placeInLane(this.bicycleLane);\n      return this.cyclist.driveInLaneUntilPosition(CYCLIST_STOP_POSITION);\n    }\n  }, {\n    key: \"moveAgentInPosition\",\n    value: function moveAgentInPosition() {\n      this.view.agentCar.placeInLane(this.agentLane);\n      return this.view.agentCar.driveInLaneUntilPosition(TREE_STOP_POSITION);\n    }\n  }, {\n    key: \"fellTree\",\n    value: function fellTree() {\n      this.tree.sprite.x += _constants.STREET_LANE_OFFSET * 2;\n      this.tree.sprite.angle = 90;\n    }\n  }]);\n\n  return TreeFallsSituation;\n}(_situation[\"default\"]);\n\nexports[\"default\"] = TreeFallsSituation;\n\n_situation[\"default\"].registerSituation('tree-falls', TreeFallsSituation);\n\n},{\"../car\":1,\"../constants\":2,\"../lanes\":5,\"../scene-element\":9,\"../situation\":11}],14:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _car = _interopRequireDefault(require(\"./car\"));\n\nvar _sceneElement = _interopRequireDefault(require(\"./scene-element\"));\n\nvar _lanes = require(\"./lanes\");\n\nvar _constants = require(\"./constants\");\n\nvar _pixiHelp = require(\"./pixi-help\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar View =\n/*#__PURE__*/\nfunction () {\n  function View(element) {\n    _classCallCheck(this, View);\n\n    this.app = new PIXI.Application({\n      width: _constants.VIEW_SIZE,\n      height: _constants.VIEW_SIZE,\n      backgroundColor: 0x000000,\n      resolution: window.devicePixelRatio || 1\n    });\n    element.appendChild(this.app.view);\n    this.container = new PIXI.Container();\n    this.container.sortableChildren = true;\n    this.app.stage.addChild(this.container);\n    this.container.x = this.app.screen.width / 2;\n    this.container.y = this.app.screen.height / 2;\n    this.background = new _sceneElement[\"default\"](this, 'assets/images/street.png', _pixiHelp.POINT_ZERO, _constants.GLOBAL_SCALE);\n    this.agentCar = new _car[\"default\"](this, 'assets/images/car.png');\n    this.background.show();\n\n    this.afterIdleAction = function () {};\n  }\n\n  _createClass(View, [{\n    key: \"doIdleAnimation\",\n    value: function doIdleAnimation() {\n      var currentLane = _lanes.LANES[Math.floor(Math.random() * _lanes.LANES.length)];\n\n      this.agentCar.hide();\n      this.agentCar.show();\n      this.agentCar.placeInLane(currentLane, 0, true);\n      return this.agentCar.driveInLaneUntilPosition(1.0);\n    }\n  }, {\n    key: \"startIdleAnimation\",\n    value: function startIdleAnimation() {\n      var _this = this;\n\n      this.afterIdleAction = this.startIdleAnimation;\n      this.doIdleAnimation().then(function () {\n        return _this.afterIdleAction();\n      });\n    }\n  }, {\n    key: \"queueAction\",\n    value: function queueAction(action) {\n      this.afterIdleAction = action;\n    }\n  }]);\n\n  return View;\n}();\n\nexports[\"default\"] = View;\n\n},{\"./car\":1,\"./constants\":2,\"./lanes\":5,\"./pixi-help\":7,\"./scene-element\":9}]},{},[6]);\n"]}