!function o(s,a,u){function c(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[t]={exports:{}};s[t][0].call(r.exports,function(e){return c(s[t][1][e]||e)},r,r.exports,o,s,a,u)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./constants"),o=e("./pixi-help"),s=e("./lane");function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s.NO_LANE;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.view=e,this.sprite=(0,o.createSprite)(t,r.CAR_SCALE,.5),this.sprite.zIndex=100,this.lane=n}var e,t,n;return e=i,(t=[{key:"placeInLane",value:function(e,t,n){var i=1<arguments.length&&void 0!==t?t:0,r=!(2<arguments.length&&void 0!==n)||n;this.lane=e,this.x=e.start.x+(e.end.x-e.start.x)*i,this.y=e.start.y+(e.end.y-e.start.y)*i,r&&this.forceLaneDirection()}},{key:"forceLaneDirection",value:function(){this.sprite.angle=this.lane.getDrivingAngle()}},{key:"driveInLaneUntilPosition",value:function(e,t,n){var i=this,r=0<arguments.length&&void 0!==e?e:1,o=1<arguments.length&&void 0!==t?t:500,s=2<arguments.length&&void 0!==n?n:TWEEN.Easing.Linear.None,a=this.lane.getPositionCoordinates(r);return new Promise(function(e){new TWEEN.Tween(i.sprite).to({x:a.x,y:a.y},o).easing(s).onComplete(function(){return e("arrived")}).start()})}},{key:"advanceAndTurn",value:function(t,e,n,i){var r=this,o=1<arguments.length&&void 0!==e?e:0,s=2<arguments.length&&void 0!==n?n:1e3,a=3<arguments.length&&void 0!==i?i:TWEEN.Easing.Linear.None;return new Promise(function(e){new TWEEN.Tween(r).to({x:r.x+t.x,y:r.y+t.y,angle:r.angle+o},s).easing(a).onComplete(function(){return e("crash")}).start()})}},{key:"crossLane",value:function(){this.placeInLane(this.lane.oppositeLane,1-this.lane.getCarPosition(this),!1)}},{key:"show",value:function(){this.view.container.addChild(this.sprite)}},{key:"hide",value:function(){this.view.container.removeChild(this.sprite)}},{key:"x",get:function(){return this.sprite.x},set:function(e){this.sprite.x=e}},{key:"y",get:function(){return this.sprite.y},set:function(e){this.sprite.y=e}},{key:"angle",get:function(){return this.sprite.angle},set:function(e){this.sprite.angle=e}}])&&a(e.prototype,t),n&&a(e,n),i}();n.default=i},{"./constants":2,"./lane":7,"./pixi-help":11}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SPRITE_WIDTH=n.STREET_LANE_OFFSET=n.BLOCK_SIZE=n.STREET_WIDTH=n.IDLE_ANIMATION_TIME=n.DEFAULT_SPEED=n.BorderBlockSize=n.StreetOffsetFromCenter=n.ViewSize=n.CAR_SCALE=void 0;n.CAR_SCALE=.25;n.ViewSize={width:1920,height:1080};n.StreetOffsetFromCenter={x:560,y:350};n.BorderBlockSize={width:320,height:110};n.DEFAULT_SPEED=15;n.IDLE_ANIMATION_TIME=2e3;n.STREET_WIDTH=160;n.BLOCK_SIZE=512;n.STREET_LANE_OFFSET=40;n.SPRITE_WIDTH=64},{}],3:[function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function i(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.htmlButton=$("#advanceButton"),this.htmlText=$("#advanceText"),this.text=e,this.onClick=t,this.htmlText.text(e),this.htmlButton.on("click",function(){return n.doClick()}),this.htmlButton.show(),this.timeoutRunner=null,window.onkeydown=function(e){13==e.which&&n.doClick()}}var e,t,n,r;function o(e){return r.apply(this,arguments)}return e=i,(t=[{key:"doClick",value:function(){return window.onkeydown=function(){},null!=this.timeoutRunner&&clearTimeout(this.timeoutRunner),this.htmlButton.hide(),this.onClick()}},{key:"setTimeout",value:(r=function(e){var t=this;1e3<=e&&this.htmlText.text(this.text+" ("+Math.floor(e/1e3)+")"),this.timeoutRunner=e<=1e3?setTimeout(function(){return t.doClick()},e):setTimeout(function(){return t.setTimeout(e-1e3)},1e3)},o.toString=function(){return r.toString()},o)}])&&s(e.prototype,t),n&&s(e,n),i}();n.default=i},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HighlightColor=void 0;n.HighlightColor=16772098},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./style-help");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.htmlElement=e}var e,t,i;return e=n,i=[{key:"hideAll",value:function(e){var t=0<arguments.length&&void 0!==e?e:1e3;n.Boxes.forEach(function(e){return e.hide(t)})}},{key:"get",value:function(e){return n.Boxes[e]}}],(t=[{key:"show",value:function(e){this.htmlElement.querySelector("#name").innerText=e.name,this.htmlElement.querySelector("#description").innerHTML=e.description,(0,r.setLeftTopCSSFromCoord)(this.htmlElement,e.infopos)}},{key:"fadeShow",value:function(e,t){return this.show(e),(0,r.tweenOpacity)(this.htmlElement,.75,t)}},{key:"hide",value:function(e){var t=0<arguments.length&&void 0!==e?e:1e3;return(0,r.tweenOpacity)(this.htmlElement,0,t)}}])&&o(e.prototype,t),i&&o(e,i),n}();(n.default=i).Boxes=$(".info_element").get().map(function(e){return new i(e)})},{"./style-help":20}],6:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t}var e,t,i;return e=n,(t=[{key:"right",value:function(){return new n(this.x+220,this.y)}},{key:"left",value:function(){return new n(this.x-220,this.y)}},{key:"up",value:function(){return new n(this.x,this.y-220)}},{key:"down",value:function(){return new n(this.x,this.y+220)}}])&&r(e.prototype,t),i&&r(e,i),n}();(n.default=i).TopLeft=new i(300,90),i.TopRight=new i(1420,90),i.BottomRight=new i(1420,790),i.BottomLeft=new i(300,790)},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NO_LANE=n.Lane=void 0;var r=e("./pixi-help");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}PIXI.Point.Lerp=function(e,t,n){return new PIXI.Point(e.x+n*(t.x-e.x),e.y+n*(t.y-e.y))};var i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.start=e,this.end=t,this.oppositeLane=null}var e,t,i;return e=n,(t=[{key:"isVertical",value:function(){return this.start.x==this.end.x}},{key:"isHorizontal",value:function(){return this.start.y==this.end.y}},{key:"getDrivingAngle",value:function(){return(0,r.vectorBetweenPoints)(this.start,this.end)}},{key:"getPositionCoordinates",value:function(e){return PIXI.Point.Lerp(this.start,this.end,e)}},{key:"getCarPosition",value:function(e){return this.isVertical()?(e.y-this.start.y)/(this.end.y-this.start.y):(e.x-this.start.x)/(this.end.x-this.start.x)}}])&&o(e.prototype,t),i&&o(e,i),n}(),s=new(n.Lane=i)(r.POINT_ZERO,new PIXI.Point(1,0));n.NO_LANE=s},{"./pixi-help":11}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LANES=void 0;var i=e("./lane"),r=e("./constants");function o(e,t){return new i.Lane(new PIXI.Point(r.ViewSize.width/2*t,-e),new PIXI.Point(-r.ViewSize.width/2*t,-e))}function s(e,t){return new i.Lane(new PIXI.Point(-e,r.ViewSize.height/2*t),new PIXI.Point(-e,-r.ViewSize.height/2*t))}var a=[s(r.StreetOffsetFromCenter.x-r.STREET_LANE_OFFSET,1),s(r.StreetOffsetFromCenter.x+r.STREET_LANE_OFFSET,-1),s(-r.StreetOffsetFromCenter.x-r.STREET_LANE_OFFSET,1),s(-r.StreetOffsetFromCenter.x+r.STREET_LANE_OFFSET,-1),o(r.StreetOffsetFromCenter.y+r.STREET_LANE_OFFSET,1),o(r.StreetOffsetFromCenter.y-r.STREET_LANE_OFFSET,-1),o(-r.StreetOffsetFromCenter.y+r.STREET_LANE_OFFSET,1),o(-r.StreetOffsetFromCenter.y-r.STREET_LANE_OFFSET,-1)];function u(e,t){(e.oppositeLane=t).oppositeLane=e}u((n.LANES=a)[0],a[1]),u(a[2],a[3]),u(a[4],a[5]),u(a[6],a[7])},{"./constants":2,"./lane":7}],9:[function(e,t,n){"use strict";var i,r=(i=e("./view"))&&i.__esModule?i:{default:i};e("./situations/car-enters-lane"),e("./situations/tree-falls"),e("./situations/child-runs"),new r.default($("#game")[0]).start()},{"./situations/car-enters-lane":17,"./situations/child-runs":18,"./situations/tree-falls":19,"./view":22}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("./style-help");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function r(e,t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.currentOption=0,this.visible=!1,this.menuClass=i,this.options=Array.from(t),this.buttons=[],this.titleText=n,this.htmlElement=$("#".concat(e)),this.optionsArea=this.htmlElement.find("#menu_options_area"),this.cursor=this.htmlElement.find("#menu_cursor"),this.title=this.htmlElement.find("#menu_title")}var e,t,n;return e=r,(t=[{key:"show",value:function(){var t=this;this.createHTMLOptions(),this.currentOption=0,this.htmlElement.removeClass(),this.htmlElement.addClass(this.menuClass),this.select(this.currentOption),this.title.text(this.titleText),window.onkeydown=function(e){switch(e.which){case 38:t.up();break;case 40:t.down();break;case 13:t.enterOption()}},this.updateCursorPosition(),this.htmlElement.show(),this.fadeInCursor()}},{key:"hide",value:function(){this.htmlElement.addClass("fade_out"),window.onkeydown=function(){},this.clearHTML()}},{key:"fadeInCursor",value:function(){var e=this.cursor[0];return(e.style.opacity=0,i.tweenOpacity)(e,1,500).then(function(){return(0,i.tweenOpacity)(e,.125,500)}).then(function(){return(0,i.tweenOpacity)(e,1,500)})}},{key:"createHTMLOptions",value:function(){this.buttons=this.options.map(function(e){return $('<input type="button" value="'.concat(e.text,'" class="menu_option fade_in">')).click(e.action)}),this.buttons.forEach(function(e){return $("#menu_options_area").append(e)})}},{key:"clearHTML",value:function(){this.optionsArea.empty()}},{key:"enterOption",value:function(){var e=this.options[this.currentOption].action;this.hide(),e()}},{key:"select",value:function(e){this.buttons[e].addClass("selected")}},{key:"deselect",value:function(e){this.buttons[e].removeClass("selected")}},{key:"down",value:function(){this.deselect(this.currentOption),this.currentOption<this.options.length-1&&this.currentOption++,this.select(this.currentOption),this.updateCursorPosition()}},{key:"up",value:function(){this.deselect(this.currentOption),0<this.currentOption&&this.currentOption--,this.select(this.currentOption),this.updateCursorPosition()}},{key:"updateCursorPosition",value:function(){this.cursor.css("margin-top",15+75*this.currentOption+"px")}}])&&o(e.prototype,t),n&&o(e,n),r}();n.default=r},{"./style-help":20}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createAnimatedSprite=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.5,i=e.map(function(e){return PIXI.Texture.from(e)}),r=new PIXI.AnimatedSprite(i);return r.scale.x=t,r.scale.y=t,r.anchor.set(n),r},n.createSprite=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.5,i=PIXI.Texture.from(e),r=new PIXI.Sprite(i);return r.scale.x=t,r.scale.y=t,r.anchor.set(n),r},n.highlightSprite=function(e,t){var n=new PIXI.Graphics;return n.lineStyle(5,t,1,.5),n.drawCircle(e.x,e.y,Math.max(e.width,e.height)/2+10),n},n.vectorBetweenPoints=function(e,t){var n=new PIXI.Point(0,-1),i=new PIXI.Point(t.x-e.x,t.y-e.y);return 180*(Math.atan2(i.y,i.x)-Math.atan2(n.y,n.x))/Math.PI},n.screenPosFromFraction=r,n.moveToFraction=function(e,t,n){var i=r(t,n);e.x=i.x,e.y=i.y},n.pixiFadeIn=function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise(function(e){new TWEEN.Tween(t).to({alpha:n},i).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){return e("visible")}).start()})},n.pixiMoveTo=function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise(function(e){new TWEEN.Tween(t).to({x:n.x,y:n.y},i).easing(TWEEN.Easing.Linear.None).onComplete(function(){return e("moved")}).start()})},n.POINT_ZERO=void 0;var i=e("./constants");function r(e,t){return new PIXI.Point((e-.5)*i.ViewSize.width,(t-.5)*i.ViewSize.height)}var o=new PIXI.Point(0,0);n.POINT_ZERO=o},{"./constants":2}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Policies=void 0;var i=e("./texts");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=[o({id:"humanist"},i.Texts.Humanist),o({id:"profit"},i.Texts.Profit),o({id:"protector"},i.Texts.Protector)];n.Policies=a},{"./texts":21}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./style-help");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.htmlElement=e,this.situationDescriptionElement=this.htmlElement.querySelector("#situation_description"),this.policyBlock=this.htmlElement.querySelector("#policy"),this.policyNameElement=this.htmlElement.querySelector("#policy_name"),this.policyObjectiveElement=this.htmlElement.querySelector("#policy_objective"),this.decisionBlock=this.htmlElement.querySelector("#decision"),this.decisionElement=this.htmlElement.querySelector("#decision_text")}var e,n,i;return e=t,(n=[{key:"show",value:function(){return this.decisionBlock.style.display="none",this.policyBlock.style.display="none",(0,r.tweenOpacity)(this.htmlElement,1,500)}},{key:"pullUp",value:function(e){var t=0<arguments.length&&void 0!==e?e:1e3;return this.htmlElement.classList.remove("report_down"),this.htmlElement.classList.remove("report_up"),this.htmlElement.classList.add("report_up"),new Promise(function(e){return setTimeout(e,t)})}},{key:"pullDown",value:function(e){var t=0<arguments.length&&void 0!==e?e:1e3;return this.htmlElement.classList.remove("report_down"),this.htmlElement.classList.remove("report_up"),this.htmlElement.classList.add("report_down"),new Promise(function(e){return setTimeout(e,t)})}},{key:"setSituation",value:function(e){this.situationDescriptionElement.innerHTML=e.getDescription()}},{key:"setPolicy",value:function(e){this.policyBlock.style.display="block",this.policyNameElement.innerHTML=e.name,this.policyObjectiveElement.innerHTML=e.objective}},{key:"setDecision",value:function(e){this.decisionBlock.style.display="block",this.decisionElement.innerHTML=e}},{key:"hide",value:function(){return(0,r.tweenOpacity)(this.htmlElement,0,250)}}])&&o(e.prototype,n),i&&o(e,i),t}();n.default=i},{"./style-help":20}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("./pixi-help"),s=e("./constants");function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.POINT_ZERO,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:s.CAR_SCALE;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.view=e,this.initialPosition=n,this.visible=!1,this.setSprite((0,o.createSprite)(t,i))}var e,t,n;return e=r,(t=[{key:"setSprite",value:function(e){this.sprite=e,this.reset()}},{key:"fadeIn",value:function(e){return this.show(),(this.sprite.alpha=0,o.pixiFadeIn)(this.sprite,1,e)}},{key:"show",value:function(){var t=this;return new Promise(function(e){t.view.container.addChild(t.sprite),t.visible=!0,e()})}},{key:"hide",value:function(){var t=this;return new Promise(function(e){t.view.container.removeChild(t.sprite),t.visible=!1,e()})}},{key:"reset",value:function(){this.sprite.x=this.initialPosition.x,this.sprite.y=this.initialPosition.y,this.sprite.angle=0}}])&&i(e.prototype,t),n&&i(e,n),r}();n.default=r},{"./constants":2,"./pixi-help":11}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./policies"),o=e("./pixi-help"),s=i(e("./menu")),a=i(e("./countdown-button")),u=e("./texts"),c=i(e("./info-boxes")),l=e("./design");function i(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.view=e,this.report=t,this.currentDecision=null,this.tempElements=[],this.currentPolicy=null,this.policyMenu=null}var e,t,i;return e=n,(t=[{key:"run",value:function(e){var t=this;this.view.agentCar.hide(),e.setup().then(function(){return e.start()}).then(function(){return e.wait(1e3)}).then(function(){return t.showElementsInfo(e.getElements())}).then(function(){return t.report.setSituation(e)}).then(function(){return t.report.show()}).then(function(){return t.waitForAdvanceButton(u.Texts.Next)},3e3).then(function(){return t.waitForPolicy(e)}).then(function(){return t.report.setPolicy(t.currentPolicy)}).then(function(){return e.wait(1e3)}).then(function(){return t.hideElementsInfo()}).then(function(){return e.wait(1e3)}).then(function(){return t.playOutDecision()}).then(function(){return e.wait(1e3)}).then(function(){return t.report.setDecision(t.currentDecision.text)}).then(function(){return t.waitForAdvanceButton(u.Texts.Restart)},15e3).then(function(){return t.report.hide()}).then(function(){return e.clearSprites()}).then(function(){return e.teardown()}).then(function(){return t.view.start()})}},{key:"waitForPolicy",value:function(n){var i=this;return new Promise(function(t){var e=r.Policies.map(function(e){return{text:e.name+": "+e.objective,action:function(){i.currentPolicy=e,i.currentDecision=n.getDecision(e.id),i.policyMenu.hide(),t(e.name)}}});i.policyMenu=new s.default("menu",e,u.Texts.ChoosePolicy,"bottom_menu"),i.policyMenu.show()})}},{key:"waitForAdvanceButton",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:u.Texts.Next,i=1<arguments.length&&void 0!==t?t:1e4;return new Promise(function(e){new a.default(n,e).setTimeout(i)})}},{key:"waitForKeyPress",value:function(){return new Promise(function(e){window.onkeydown=function(){window.onkeydown=function(){},e("keydown")}})}},{key:"showElementsInfo",value:function(e){var i=this,r=new Promise(function(e){return e("start fades")});return e.forEach(function(t,n){r=r.then(function(e){return i.highlight(t.sprite),c.default.get(n).fadeShow(t,1e3)})}),r}},{key:"hideElementsInfo",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:1e3;return new Promise(function(e){t.removeTempElements(),c.default.hideAll(n),setTimeout(e,n)})}},{key:"playOutDecision",value:function(){return this.currentDecision.actionFunction()}},{key:"highlight",value:function(e){this.addTempElement((0,o.highlightSprite)(e,l.HighlightColor))}},{key:"addTempElement",value:function(e){this.tempElements.push(e),this.view.container.addChild(e)}},{key:"removeTempElements",value:function(){var t=this;this.tempElements.forEach(function(e){t.view.container.removeChild(e)}),this.tempElements=[]}}])&&h(e.prototype,t),i&&h(e,i),n}();n.default=f},{"./countdown-button":3,"./design":4,"./info-boxes":5,"./menu":10,"./pixi-help":11,"./policies":12,"./texts":21}],16:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.view=e,this.sprites=[]}var e,t,i;return e=n,i=[{key:"registerSituation",value:function(e,t){n.situations[e]=t}},{key:"getSituation",value:function(e,t){return new n.situations[e](t)}}],(t=[{key:"addSprite",value:function(e){this.sprites.push(e),this.view.container.addChild(e)}},{key:"clearSprites",value:function(){var t=this;this.sprites.forEach(function(e){t.view.container.removeChild(e)})}},{key:"setup",value:function(){}},{key:"start",value:function(){}},{key:"teardown",value:function(){}},{key:"getElements",value:function(){}},{key:"getDecisions",value:function(){}},{key:"getDescription",value:function(){}},{key:"getDecision",value:function(e){return this.getDecisions()[e]}},{key:"wait",value:function(e){var t=0<arguments.length&&void 0!==e?e:1e3;return new Promise(function(e){return setTimeout(e,t)})}}])&&r(e.prototype,t),i&&r(e,i),n}();(n.default=i).situations={},i.HighlightAgentColor=16773632,i.HighlightOthersColor=16744448},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../constants"),o=i(e("../scene-element")),s=i(e("../situation")),a=i(e("../car")),u=e("../lanes"),c=e("../texts"),l=i(e("../info-positions"));function i(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){d(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=r.ViewSize.width/2-r.BorderBlockSize.width+r.SPRITE_WIDTH/2,b=-.06*r.ViewSize.height,E=new PIXI.Point(r.STREET_LANE_OFFSET,r.STREET_LANE_OFFSET),T=new PIXI.Point(0,40),P=new PIXI.Point(0,-40),O=new PIXI.Point(1.5*-r.STREET_LANE_OFFSET,1.5*-r.STREET_LANE_OFFSET),k=new PIXI.Point(1.5*r.STREET_LANE_OFFSET,1.5*-r.STREET_LANE_OFFSET),C=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=y(this,g(n).call(this,e))).agentLane=u.LANES[2],t.parkedLane=t.agentLane.oppositeLane,t.blackCar=new a.default(e,"assets/images/car_black.png"),t.truck=new a.default(e,"assets/images/small_truck.png"),t.busStop=new o.default(e,"assets/images/bus_stop.png",new PIXI.Point(w,b)),t.Texts=c.Texts.CarEntersLane,t}var e,t,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,s["default"]),e=n,(t=[{key:"setup",value:function(){return this.busStop.fadeIn(500)}},{key:"teardown",value:function(){this.busStop.hide()}},{key:"start",value:function(){var e=this;return this.view.agentCar.hide(),this.moveTruckInPosition().then(function(){return Promise.all([e.moveBlackCarInPosition(),e.moveAgentInPosition()])})}},{key:"getElements",value:function(){return[p({sprite:this.view.agentCar.sprite,color:s.default.HighlightOthersColor,infopos:l.default.BottomRight},this.Texts.AutonomousCar),p({sprite:this.blackCar.sprite,color:s.default.HighlightOthersColor,infopos:l.default.TopRight},this.Texts.LuxuryCar),p({sprite:this.truck.sprite,color:s.default.HighlightOthersColor,infopos:l.default.TopRight.left()},this.Texts.Truck),p({sprite:this.busStop.sprite,color:s.default.HighlightOthersColor,infopos:l.default.TopRight.right()},this.Texts.BusStop)]}},{key:"getDecisions",value:function(){var e=this;return{humanist:{text:this.Texts.Humanist,actionFunction:function(){return e.decisionAdvace()}},profit:{text:this.Texts.Profit,actionFunction:function(){return e.decisionTurnLeft()}},protector:{text:this.Texts.Protector,actionFunction:function(){return e.decisionTurnRight()}}}}},{key:"getDescription",value:function(){return this.Texts.description}},{key:"decisionAdvace",value:function(){return Promise.all([this.blackCar.advanceAndTurn(T,0,150),this.view.agentCar.advanceAndTurn(P,0,150)])}},{key:"decisionTurnLeft",value:function(){return Promise.all([this.moveBlackCarToFinalPosition(),this.view.agentCar.advanceAndTurn(O,-30,250)])}},{key:"decisionTurnRight",value:function(){return Promise.all([this.moveBlackCarToFinalPosition(),this.view.agentCar.advanceAndTurn(k,30,250)])}},{key:"moveTruckInPosition",value:function(){return this.addSprite(this.truck.sprite),this.truck.placeInLane(this.parkedLane),this.truck.driveInLaneUntilPosition(.45,1e3,TWEEN.Easing.Cubic.Out)}},{key:"moveBlackCarInPosition",value:function(){var e=this;return this.addSprite(this.blackCar.sprite),this.blackCar.placeInLane(this.parkedLane),this.blackCar.driveInLaneUntilPosition(.35,500,TWEEN.Easing.Sinusoidal.Out).then(function(){return e.wait(500)}).then(function(){return e.blackCar.advanceAndTurn(E,-45,250,TWEEN.Easing.Quadratic.In)}).then(function(){return e.blackCar.advanceAndTurn(E,45,250,TWEEN.Easing.Quadratic.Out)})}},{key:"moveBlackCarToFinalPosition",value:function(){return this.blackCar.advanceAndTurn(new PIXI.Point(0,2*r.STREET_LANE_OFFSET),0,250,TWEEN.Easing.Linear.None)}},{key:"moveAgentInPosition",value:function(){var e=this;return this.wait(700).then(function(){e.view.agentCar.show(),e.view.agentCar.placeInLane(e.agentLane),e.view.agentCar.driveInLaneUntilPosition(.45,800)})}}])&&v(e.prototype,t),i&&v(e,i),n}();n.default=C,s.default.registerSituation("car-enters-lane",C)},{"../car":1,"../constants":2,"../info-positions":6,"../lanes":8,"../scene-element":14,"../situation":16,"../texts":21}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../scene-element")),o=i(e("../car")),s=i(e("../situation")),a=e("../lanes"),u=e("../pixi-help"),c=e("../constants"),l=e("../texts"),h=i(e("../info-positions"));function i(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=(0,u.screenPosFromFraction)(.28125,1/16),E=(0,u.screenPosFromFraction)(9/32,1/8),T=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=g(this,m(n).call(this,e))).agentLane=a.LANES[4],t.oppositeLane=t.agentLane.oppositeLane,t.child=new r.default(t.view,"assets/images/child.png",b),t.child.setSprite((0,u.createAnimatedSprite)([1,2,3].map(function(e){return"assets/images/child_sprite_"+e+".png"}),c.CAR_SCALE)),t.crossingCar=new o.default(t.view,"assets/images/blue_car.png"),t.ambulance=new o.default(t.view,"assets/images/ambulance.png"),t.Texts=l.Texts.ChildRuns,t}var e,t,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(n,s["default"]),e=n,(t=[{key:"setup",value:function(){return this.child.show()}},{key:"start",value:function(){return Promise.all([this.moveAgentInPosition(),this.moveCrossingCarInPosition(),this.moveAmbulanceInPosition(),this.childRuns()])}},{key:"teardown",value:function(){this.child.hide()}},{key:"getElements",value:function(){return[d({sprite:this.view.agentCar.sprite,color:s.default.HighlightAgentColor,infopos:h.default.TopRight.left().left()},this.Texts.AutonomousCar),d({sprite:this.ambulance.sprite,color:s.default.HighlightOthersColor,infopos:h.default.TopRight.left()},this.Texts.Ambulance),d({sprite:this.child.sprite,color:s.default.HighlightOthersColor,infopos:h.default.TopLeft},this.Texts.Child),d({sprite:this.crossingCar.sprite,color:s.default.HighlightOthersColor,infopos:h.default.TopLeft.down()},this.Texts.OtherCar)]}},{key:"getDecisions",value:function(){var e=this;return{humanist:{text:this.Texts.Humanist,actionFunction:function(){return e.decisionCrashCrossingCar()}},profit:{text:this.Texts.Profit,actionFunction:function(){return e.decisionAdvance()}},protector:{text:this.Texts.Protector,actionFunction:function(){return e.decisionAdvance()}}}}},{key:"decisionAdvance",value:function(){return this.view.agentCar.driveInLaneUntilPosition(.75,250)}},{key:"decisionCrashCrossingCar",value:function(){var t=this,e=new Promise(function(e){new TWEEN.Tween(t.view.agentCar).to({x:t.view.agentCar.x-c.STREET_LANE_OFFSET,y:t.view.agentCar.y+1.5*c.STREET_LANE_OFFSET,angle:t.view.agentCar.angle-60},250).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){return e("crash")}).start()}),n=this.crossingCar.driveInLaneUntilPosition(.3125,250);return Promise.all([e,n])}},{key:"getDescription",value:function(){return this.Texts.description}},{key:"moveAgentInPosition",value:function(){return this.view.agentCar.show(),this.view.agentCar.placeInLane(this.agentLane),this.view.agentCar.driveInLaneUntilPosition(.625,1500)}},{key:"moveCrossingCarInPosition",value:function(){var e=this;return this.wait(1e3).then(function(){return e.addSprite(e.crossingCar.sprite),e.crossingCar.placeInLane(e.oppositeLane),e.crossingCar.driveInLaneUntilPosition(.28125,500)})}},{key:"moveAmbulanceInPosition",value:function(){var e=this;return this.wait(400).then(function(){return e.addSprite(e.ambulance.sprite),e.ambulance.placeInLane(e.agentLane),e.ambulance.driveInLaneUntilPosition(.5625,1100)})}},{key:"childRuns",value:function(){var e=this;return this.child.sprite.loop=!0,this.wait(1e3).then(function(){return e.child.sprite.play()}).then(function(){return(0,u.pixiMoveTo)(e.child.sprite,E,500)}).then(function(){return e.child.sprite.stop()})}}])&&y(e.prototype,t),i&&y(e,i),n}();n.default=T,s.default.registerSituation("child-runs",T)},{"../car":1,"../constants":2,"../info-positions":6,"../lanes":8,"../pixi-help":11,"../scene-element":14,"../situation":16,"../texts":21}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../scene-element")),o=i(e("../car")),s=i(e("../situation")),a=e("../constants"),u=e("../lanes"),c=e("../texts"),l=i(e("../info-positions")),h=e("../pixi-help");function i(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=g(this,m(n).call(this,e))).waterPuddle=new r.default(t.view,"assets/images/water_puddle.png",new PIXI.Point(-a.StreetOffsetFromCenter.x-a.STREET_LANE_OFFSET,-a.STREET_LANE_OFFSET)),t.tree=new r.default(t.view,"assets/images/tree.png",new PIXI.Point(-a.StreetOffsetFromCenter.x-3*a.STREET_LANE_OFFSET,0)),t.cyclist=new o.default(t.view,"assets/images/cyclist.png"),t.cyclist.sprite=(0,h.createAnimatedSprite)([1,2,3].map(function(e){return"assets/images/cyclist_"+e+".png"}),a.CAR_SCALE),t.agentLane=u.LANES[1],t.bicycleLane=t.agentLane.oppositeLane,t.Texts=c.Texts.TreeFalls,t}var e,t,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(n,s["default"]),e=n,(t=[{key:"setup",value:function(){var e=this;return this.tree.reset(),this.waterPuddle.reset(),this.tree.fadeIn(250).then(function(){return e.waterPuddle.fadeIn(250)})}},{key:"start",value:function(){return Promise.all([this.moveAgentInPosition(),this.moveCyclistInPosition(),this.fellTree()])}},{key:"teardown",value:function(){this.tree.hide(),this.waterPuddle.hide(),this.cyclist.hide()}},{key:"getElements",value:function(){return[d({sprite:this.view.agentCar.sprite,color:s.default.HighlightAgentColor,infopos:l.default.TopLeft},this.Texts.AutonomousCar),d({sprite:this.cyclist.sprite,color:s.default.HighlightOthersColor,infopos:l.default.BottomLeft},this.Texts.Cyclist),d({sprite:this.tree.sprite,color:s.default.HighlightOthersColor,infopos:l.default.BottomLeft.left()},this.Texts.FallenTree)]}},{key:"getDecisions",value:function(){var e=this;return{humanist:{text:this.Texts.Humanist,actionFunction:function(){return e.softlyCrashTree()}},profit:{text:this.Texts.Profit,actionFunction:function(){return e.fullBreak()}},protector:{text:this.Texts.Protector,actionFunction:function(){return e.crashCyclist()}}}}},{key:"getDescription",value:function(){return this.Texts.description}},{key:"moveCyclistInPosition",value:function(){var e=this;return this.cyclist.show(),this.cyclist.placeInLane(this.bicycleLane),this.cyclist.sprite.play(),this.cyclist.driveInLaneUntilPosition(3/8,1e3).then(function(){return e.cyclist.sprite.stop()})}},{key:"moveAgentInPosition",value:function(){return this.view.agentCar.show(),this.view.agentCar.placeInLane(this.agentLane),this.view.agentCar.driveInLaneUntilPosition(3/8,1e3)}},{key:"fellTree",value:function(){var t=this;return new Promise(function(e){new TWEEN.Tween(t.tree.sprite).to({angle:90,x:t.tree.sprite.x+1.5*a.STREET_LANE_OFFSET},750).easing(TWEEN.Easing.Quadratic.In).delay(250).onComplete(function(){return e("fell")}).start()})}},{key:"crashCyclist",value:function(){var t=this,e=new Promise(function(e){new TWEEN.Tween(t.view.agentCar).to({x:t.view.agentCar.x+2*a.STREET_LANE_OFFSET,y:t.view.agentCar.y+2*a.STREET_LANE_OFFSET,angle:t.view.agentCar.angle-45},250).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){return e("crash")}).start()}),n=this.cyclist.driveInLaneUntilPosition(.5,250);return Promise.all([e,n])}},{key:"fullBreak",value:function(){return this.view.agentCar.driveInLaneUntilPosition(7/16,250)}},{key:"softlyCrashTree",value:function(){var t=this;return new Promise(function(e){new TWEEN.Tween(t.view.agentCar).to({x:t.view.agentCar.x-a.STREET_LANE_OFFSET,y:t.view.agentCar.y+2*a.STREET_LANE_OFFSET,angle:t.view.agentCar.angle+70},250).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){return e("crash")}).start()})}}])&&y(e.prototype,t),i&&y(e,i),n}();n.default=b,s.default.registerSituation("tree-falls",b)},{"../car":1,"../constants":2,"../info-positions":6,"../lanes":8,"../pixi-help":11,"../scene-element":14,"../situation":16,"../texts":21}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tweenOpacity=function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise(function(e){new TWEEN.Tween(t.style).to({opacity:n},i).easing(TWEEN.Easing.Quadratic.Out).onComplete(function(){return e("visible")}).start()})},n.setLeftTopCSSFromCoord=function(e,t){e.style.left=t.x+"px",e.style.top=t.y+"px"}},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Texts=void 0;n.Texts={ChooseSituation:"Choose a Situation",Show:"Show",Restart:"Restart",ChoosePolicy:"Choose a Policy",Next:"Next",Humanist:{name:"Humanist",objective:"Minimize human injuries"},Profit:{name:"Profit-based",objective:"Minimize insurance costs"},Protector:{name:"Protector",objective:"Protect car passengers"},CarEntersLane:{name:"A Car enters your Lane",description:"A car enters your lane and there is no time to break. The car can either crash against it, turn left and crash against a parked car, or turn right and drive over a bus stop full of people",AutonomousCar:{name:"Autonomous car",description:"While reaching a bus stop, a car enters its lane in front of it"},LuxuryCar:{name:"Luxury car",description:"A very expensive car suddenly enters your lane."},Truck:{name:"Parked car",description:"An old truck in bad shape, with four passengers"},BusStop:{name:"Bus Stop",description:"Full of people waiting for their bus"},Humanist:"Turning left will risk the people in the track. Turning right will probably risk even more people at the stop. Solution: breaking and crashing into the car in front will probably not result in fatalities.",Profit:"The car facing you is very expensive, and crashing into it might mean long legal battles for your insurance. Crashing into the bus stop will risk high payouts to the victims in or their families. Solution: turn left towards the parked car, as it is cheap and if the risk of casualties is lower.",Protector:"Crashing into either car will potentially damage the autonomous car and harm its passengers. Solution: turn right and crash into the bus stop, as people are softer than cars."},ChildRuns:{name:"A Child runs in the Street",description:"When arriving at a crossing and with a green light, a child suddenly runs onto the street. At the same time, an ambulance with lights and siren is driving behind your.",AutonomousCar:{name:"Autonomous car",description:"About to enter a crossroad, suddenly detects a child"},Ambulance:{name:"Ambulance",description:"Carrying a patient to the hospital"},Child:{name:"Child",description:"Runs in the street without warning"},OtherCar:{name:"A Car",description:"Probably will not stop"},Humanist:"A sudden break will provoke a crash with the ambulance, but continuing ahead will hurt the child. Best course of action is to change lanes and crash with the other car, as both are crash-safe",Profit:"Breaking or turning left will incur in high car damages even risk of lawsuit. The child crossed with warning and with a red light, so you are protected by the law if you drive through.",Protector:"Breaking or turning left will damage the car and potentially hurt you, while driving ahead will produce only slight car damage and no risk to passengers."},TreeFalls:{name:"A Tree falls",description:"A tree falls in front of the car. The person in the front passenger seat has no seat belt. A cyclist is riding through the opposite lane. Options: Sudden break, slow down and turn left, or change lanes.",AutonomousCar:{name:"Autonomous car",description:"Warning! The front passenger is not wearing seat belt."},Cyclist:{name:"Cyclist",description:"An ordinary cyclist driving in the opposite lane."},FallenTree:{name:"Fallen Tree",description:"Crashing into it could be fatal."},Humanist:"A sudden break would send the front passenger forward through the windshield, potentially killing them. Changing lanes would certainly kill the cyclist. Solution: break slowly while turning right, sending the front passenger against the driver, which would cause only minor concussions.",Profit:"Crashing with the tree will destroy the car and be expensive for the insurers. Changing lanes would kill the cyclist and also carry a high cost to the insurers. A sudden break risks the front passenger's life, but as they are not wearing a seat belt, it is not the insurer's responsibility.",Protector:"Crashing with the tree or turning right would hurt the passenger without seatbelt. Solution: slow down and change lanes, potentially killing the cyclist but saving all passengers."}}},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./car")),o=i(e("./scene-element")),s=e("./lanes"),a=e("./constants"),u=e("./pixi-help"),c=i(e("./report"));e("./info-boxes");var l=i(e("./situation")),h=i(e("./situation-runner")),f=i(e("./menu.js")),p=e("./texts");function i(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function n(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.app=new PIXI.Application({width:a.ViewSize.width,height:a.ViewSize.height,backgroundColor:0,resolution:window.devicePixelRatio||1}),e.appendChild(this.app.view),this.container=new PIXI.Container,this.container.sortableChildren=!0,this.app.stage.addChild(this.container),this.container.x=this.app.screen.width/2,this.container.y=this.app.screen.height/2,this.background=new o.default(this,"assets/images/street.png",u.POINT_ZERO,1),this.agentCar=new r.default(this,"assets/images/car.png"),this.background.show(),this.afterIdleAction=function(){},this.SituationMenu=new f.default("menu",[{text:p.Texts.TreeFalls.name,action:function(){return t.startSituation("tree-falls")}},{text:p.Texts.CarEntersLane.name,action:function(){return t.startSituation("car-enters-lane")}},{text:p.Texts.ChildRuns.name,action:function(){return t.startSituation("child-runs")}}],p.Texts.ChooseSituation,"top_menu"),this.runner=new h.default(this,new c.default($("#report")[0])),this.app.ticker.add(function(){return TWEEN.update()})}var e,t,i;return e=n,(t=[{key:"spriteToScreenPos",value:function(e){return{x:e.x+this.app.screen.width/2,y:e.y+this.app.screen.height/2}}},{key:"doIdleAnimation",value:function(){var e=s.LANES[Math.floor(Math.random()*s.LANES.length)];return this.agentCar.hide(),this.agentCar.show(),this.agentCar.placeInLane(e,0,!0),this.agentCar.driveInLaneUntilPosition(1,a.IDLE_ANIMATION_TIME)}},{key:"startIdleAnimation",value:function(){var e=this;this.afterIdleAction=this.startIdleAnimation,this.doIdleAnimation().then(function(){return e.afterIdleAction()})}},{key:"start",value:function(){this.SituationMenu.show(),this.startIdleAnimation()}},{key:"startSituation",value:function(t){var n=this;this.SituationMenu.hide(),this.queueAction(function(){var e=l.default.getSituation(t,n);n.runner.run(e)})}},{key:"queueAction",value:function(e){this.afterIdleAction=e}}])&&d(e.prototype,t),i&&d(e,i),n}();n.default=v},{"./car":1,"./constants":2,"./info-boxes":5,"./lanes":8,"./menu.js":10,"./pixi-help":11,"./report":13,"./scene-element":14,"./situation":16,"./situation-runner":15,"./texts":21}]},{},[9]);
//# sourceMappingURL=bundle.min.js.map
